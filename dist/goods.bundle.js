/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./JS/apiServices/account/accountOverview.js":
/*!***************************************************!*\
  !*** ./JS/apiServices/account/accountOverview.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initAccountOverview: () => (/* binding */ initAccountOverview),\n/* harmony export */   updateCashInMachineUI: () => (/* binding */ updateCashInMachineUI),\n/* harmony export */   updateChargesUI: () => (/* binding */ updateChargesUI),\n/* harmony export */   updateGoodsSummaryUI: () => (/* binding */ updateGoodsSummaryUI),\n/* harmony export */   updatePosCapitalUI: () => (/* binding */ updatePosCapitalUI)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config */ \"./config.js\");\n/* harmony import */ var _helper_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../helper/helper */ \"./JS/helper/helper.js\");\n/* harmony import */ var _script__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../script */ \"./JS/script.js\");\n/* harmony import */ var _pos_posResources__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../pos/posResources */ \"./JS/apiServices/pos/posResources.js\");\n\n\n\n\nconst userData = _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].userData;\nconst dummyShopId = _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dummyShopId; // Dummy user data for testing\n\nconst parsedUserData = userData ? JSON.parse(userData) : null;\nconst shopId = parsedUserData?.shopId;\nconst isStaff = parsedUserData?.accountType === 'STAFF';\nasync function initAccountOverview() {\n  if (isStaff) {\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n  }\n  if (!isStaff) return;\n  try {\n    //  const [posCapitalData, charges, goodsData] = await Promise.all([\n    //    getPosCapital(shopId),\n    //    //  getCharges(shopId),\n    //    //  getGoodsStats(shopId)\n    //  ]);\n\n    const posCapitalData = await (0,_pos_posResources__WEBPACK_IMPORTED_MODULE_3__.getPosCapital)(shopId);\n    updatePosCapitalUI(posCapitalData);\n  } catch (error) {\n    console.error('Error loading account overview:', error);\n    //  showToast('error', '❌ Failed to load account overview data.');\n  }\n  (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n}\n\n// Updates just the POS capital section\nfunction updatePosCapitalUI(posCapitalData) {\n  if (!isStaff) return;\n  const totalPosCapital = document.getElementById('totalPosCapital');\n  const posCapital = posCapitalData?.data?.totalCapital || 0;\n  if (posCapitalData) {\n    if (totalPosCapital) totalPosCapital.value = (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.formatAmountWithCommas)(posCapital);\n  }\n}\nfunction updateCashInMachineUI(openingCash) {\n  const cashInMachine = document.getElementById('cashInMachine');\n  if (cashInMachine) cashInMachine.value = (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.formatAmountWithCommas)(openingCash || 0);\n}\n\n// Later:\nfunction updateGoodsSummaryUI(goodsData) {}\nfunction updateChargesUI(chargesData) {}\n\n//# sourceURL=webpack://posbok/./JS/apiServices/account/accountOverview.js?");

/***/ }),

/***/ "./JS/apiServices/business/businessResource.js":
/*!*****************************************************!*\
  !*** ./JS/apiServices/business/businessResource.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchBusinessDetails: () => (/* binding */ fetchBusinessDetails),\n/* harmony export */   updateBusiness: () => (/* binding */ updateBusiness)\n/* harmony export */ });\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config.js */ \"./config.js\");\n/* harmony import */ var _business_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../business.js */ \"./JS/business.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../script.js */ \"./JS/script.js\");\n/* harmony import */ var _utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility/safeFetch.js */ \"./JS/apiServices/utility/safeFetch.js\");\n\n\n\n\nconst baseUrl = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].baseUrl;\nconst userToken = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].token;\nconst userData = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].userData;\nconst parsedUserData = userData ? JSON.parse(userData) : null;\nconst businessId = parsedUserData ? parsedUserData.businessId || null : null; // Get the business ID from user data\n\nasync function fetchBusinessDetails() {\n  if (!businessId) {\n    console.warn('⚠️ No businessId found — skipping fetchBusinessDetails.');\n    return;\n  }\n  try {\n    const fetchedData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_3__.safeFetch)(`${baseUrl}/api/business/${businessId}`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n\n    //  const data = await fetchedData.json();\n\n    //  console.log(data);\n\n    //  if (!fetchedData.ok) {\n    //    throw new Error(fetchedData.message || 'Something went wrong');\n    //  }\n\n    //  console.log(fetchedData);\n\n    return fetchedData;\n  } catch (error) {\n    console.error('Error checking shop:', error.message);\n    throw error;\n  }\n}\nasync function updateBusiness(businessid, businessUpdatedDetails) {\n  try {\n    console.log('Sending POST request...');\n    const updateBusinessData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_3__.safeFetch)(`${baseUrl}/api/business/${businessid}`, {\n      method: 'PUT',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(businessUpdatedDetails)\n    });\n    if (updateBusinessData) {\n      console.log('Business info Updated successfully:', updateBusinessData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.showToast)('success', `✅ ${updateBusinessData.message}`);\n\n      // Refresh list or update UI\n      // fetchBusinessDetails();\n      (0,_business_js__WEBPACK_IMPORTED_MODULE_1__.renderBusinessDetails)();\n    }\n    return updateBusinessData;\n  } catch (error) {\n    console.error('Error Updating Business Info', error);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.showToast)('error', '❌ Failed to Update Business info');\n    throw error;\n  }\n}\n\n//# sourceURL=webpack://posbok/./JS/apiServices/business/businessResource.js?");

/***/ }),

/***/ "./JS/apiServices/inventory/inventoryResources.js":
/*!********************************************************!*\
  !*** ./JS/apiServices/inventory/inventoryResources.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addInventory: () => (/* binding */ addInventory),\n/* harmony export */   createProduct: () => (/* binding */ createProduct),\n/* harmony export */   createProductCategory: () => (/* binding */ createProductCategory),\n/* harmony export */   deleteCategory: () => (/* binding */ deleteCategory),\n/* harmony export */   deleteProduct: () => (/* binding */ deleteProduct),\n/* harmony export */   getAllSales: () => (/* binding */ getAllSales),\n/* harmony export */   getProductCategories: () => (/* binding */ getProductCategories),\n/* harmony export */   getProductDetail: () => (/* binding */ getProductDetail),\n/* harmony export */   getProductInventory: () => (/* binding */ getProductInventory),\n/* harmony export */   updateCategory: () => (/* binding */ updateCategory),\n/* harmony export */   updateProduct: () => (/* binding */ updateProduct),\n/* harmony export */   updateProductInventory: () => (/* binding */ updateProductInventory)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config */ \"./config.js\");\n/* harmony import */ var _goods_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../goods.js */ \"./JS/goods.js\");\n/* harmony import */ var _helper_helper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../helper/helper.js */ \"./JS/helper/helper.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../script.js */ \"./JS/script.js\");\n/* harmony import */ var _utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utility/safeFetch.js */ \"./JS/apiServices/utility/safeFetch.js\");\n\n\n\n\n\nconst baseUrl = _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].baseUrl;\nconst userToken = _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].token;\nasync function createProductCategory(productCategoryDetails) {\n  try {\n    //  console.log('Sending POST request...');\n\n    const fetchedData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_4__.safeFetch)(`${baseUrl}/api/inventory/categories`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(productCategoryDetails)\n    });\n\n    //  console.log('Response received...');\n\n    if (fetchedData) {\n      // console.log('Product Category created successfully:', fetchedData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('success', `✅ ${fetchedData.message}`);\n\n      // Refresh the table list after successful configuration\n      getProductCategories();\n    }\n    return fetchedData;\n  } catch (error) {\n    console.error('Error creating Product Category:', error);\n    throw error;\n  }\n}\nasync function getProductCategories() {\n  const tbody = document.querySelector('.category-table tbody');\n  function showLoadingRow() {\n    if (tbody) tbody.innerHTML = `\n    <tr class=\"loading-row\">\n      <td colspan=\"6\" class=\"table-error-text\">Loading Product Categories...</td>\n    </tr>\n  `;\n  }\n  showLoadingRow();\n  try {\n    //  showGlobalLoader();\n    //  console.log('Sending getProductCategories request...');\n\n    const productCategoriesData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_4__.safeFetch)(`${baseUrl}/api/inventory/categories`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n        //  'Content-Type': 'application/json',\n      }\n    });\n\n    //  console.log('Response received...');\n\n    if (productCategoriesData) {\n      // console.log(productCategoriesData);\n      // hideGlobalLoader();\n    }\n    (0,_goods_js__WEBPACK_IMPORTED_MODULE_1__.populateCategoryTable)(productCategoriesData);\n    (0,_goods_js__WEBPACK_IMPORTED_MODULE_1__.populateCategoriesDropdown)(productCategoriesData);\n    return productCategoriesData;\n  } catch (error) {\n    //  hideGlobalLoader();\n    console.log(tbody);\n    if (tbody) tbody.innerHTML = `\n    <tr class=\"loading-row\">\n      <td colspan=\"6\" class=\"table-error-text\">Error loading Product Categories...</td>\n    </tr>\n  `;\n    console.error('Error receiving Product Categories:', error);\n    throw error;\n  }\n}\n\n// export async function createProduct(productDetails) {\n//   try {\n//     //  console.log('Sending POST request...');\n//     const fetchedData = await safeFetch(`${baseUrl}/api/inventory/products`, {\n//       method: 'POST',\n//       headers: {\n//         Authorization: `Bearer ${userToken}`,\n//         'Content-Type': 'application/json',\n//       },\n//       body: JSON.stringify(productDetails),\n//     });\n\n//     //  console.log('fetchedData received...');\n\n//     if (fetchedData) {\n//       // console.log('Product added successfully:', fetchedData);\n//       showToast('success', `✅ ${fetchedData.message}`);\n\n//       // Refresh the table list after successful configuration\n//       // getProductCategories();\n//     }\n\n//     return fetchedData;\n//   } catch (error) {\n//     console.error('Error posting product:', error);\n//   }\n// }\n\nasync function createProduct(shopId, productDetails) {\n  try {\n    //  console.log('Sending POST request...');\n    const fetchedData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_4__.safeFetch)(`${baseUrl}/api/inventory/shops/${shopId}/products`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(productDetails)\n    });\n\n    //  console.log('fetchedData received...');\n\n    if (fetchedData) {\n      // console.log('Product added successfully:', fetchedData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('success', `✅ ${fetchedData.message}`);\n\n      // Refresh the table list after successful configuration\n      // getProductCategories();\n    }\n    return fetchedData;\n  } catch (error) {\n    console.error('Error posting product:', error);\n  }\n}\nasync function addInventory(inventoryDetails, shopId) {\n  try {\n    //  console.log('Sending POST request...');\n    const fetchedData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_4__.safeFetch)(`${baseUrl}/api/inventory/shops/${shopId}/inventory`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(inventoryDetails)\n    });\n\n    //  console.log('fetchedData received...');\n\n    if (fetchedData) {\n      // console.log('Product added successfully:', fetchedData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('success', `✅ ${fetchedData.message}`);\n\n      // Refresh the table list after successful configuration\n      // getProductCategories();\n    }\n    return fetchedData;\n  } catch (error) {\n    console.error('Error posting product:', error);\n  }\n}\nasync function getProductInventory(shopId) {\n  try {\n    //  showGlobalLoader();\n    //  console.log('Sending  getProductInventory request...');\n\n    const productInventoryData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_4__.safeFetch)(`${baseUrl}/api/inventory/shops/${shopId}/inventory`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n        //  'Content-Type': 'application/json',\n      }\n    });\n\n    //  console.log('Response received...');\n\n    if (productInventoryData) {\n      // console.log(productInventoryData);\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n    }\n\n    //  populateProductInventoryTable(productInventoryData);\n\n    return productInventoryData;\n  } catch (error) {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n    console.error('Error receiving Product Categories:', error);\n    throw error;\n  }\n}\nasync function getProductDetail(productId) {\n  try {\n    //  console.log('Sending POST request...');\n\n    const fethedProductDetail = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_4__.safeFetch)(`${baseUrl}/api/inventory/products/${productId}`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n\n    //  console.log('Response received...');\n\n    if (!fethedProductDetail) {\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('fail', `✅ ${fethedProductDetail.message}`);\n      return;\n    }\n\n    //  console.log('Product detail received successfully:', fethedProductDetail);\n\n    return fethedProductDetail;\n  } catch (error) {\n    console.error('Error Getting Product Detail:', error);\n    throw error;\n  }\n}\nasync function deleteProduct(productId, shopId) {\n  try {\n    //  console.log('Sending POST request...');\n\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.showGlobalLoader)();\n    const fetchedData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_4__.safeFetch)(`${baseUrl}/api/inventory/products/${productId}`, {\n      method: 'DELETE',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n    if (fetchedData) {\n      // console.log('Staff deleted successfully:', fetchedData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('success', `✅ ${fetchedData.message}`);\n      await (0,_goods_js__WEBPACK_IMPORTED_MODULE_1__.renderProductInventoryTable)(shopId); // Refresh list or update UI\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n    }\n    return fetchedData;\n  } catch (error) {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n    //  console.error('Error deleting Product', error);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('error', '❌ Failed to delete Product');\n    throw error;\n  }\n}\nasync function deleteCategory(categoryId) {\n  try {\n    //  console.log('Sending POST request...');\n\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.showGlobalLoader)();\n    const fetchedData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_4__.safeFetch)(`${baseUrl}/api/inventory/categories/${categoryId}`, {\n      method: 'DELETE',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n    if (fetchedData) {\n      // console.log('Staff deleted successfully:', fetchedData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('success', `✅ ${fetchedData.message}`);\n      await getProductCategories(); // Refresh list or update UI\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n    }\n    return fetchedData;\n  } catch (error) {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n    //  console.error('Error deleting Category', error);\n    //  showToast('error', `❌ Failed to delete Category`);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('error', `❌ ${error.message}`);\n    throw error;\n  }\n}\nasync function updateProduct(productId, updateProductDetails, shopId) {\n  //   console.log('From API Request:', productId, updateProductDetails, shopId);\n\n  try {\n    //  console.log('Sending POST request...', productId);\n\n    const updateProductData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_4__.safeFetch)(`${baseUrl}/api/inventory/products/${productId}`, {\n      method: 'PUT',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(updateProductDetails)\n    });\n    if (updateProductData) {\n      // console.log('Product info Updated successfully:', updateProductData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('success', `✅ ${updateProductData.message}`);\n      await (0,_goods_js__WEBPACK_IMPORTED_MODULE_1__.renderProductInventoryTable)(shopId); // Refresh list or update UI\n    }\n    return updateProductData;\n  } catch (error) {\n    console.error('Error Updating Product Info', error);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('error', '❌ Failed to Update Product info');\n    throw error;\n  }\n}\nasync function updateCategory(categoryId, updateCategoryDetails) {\n  //   console.log('From API Request:', categoryId, updateCategoryDetails);\n\n  try {\n    //  console.log('Sending POST request...', categoryId);\n\n    const updateCategoryData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_4__.safeFetch)(`${baseUrl}/api/inventory/categories/${categoryId}`, {\n      method: 'PUT',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(updateCategoryDetails)\n    });\n    if (updateCategoryData) {\n      // console.log('Categories info Updated successfully:', updateCategoryData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('success', `✅ ${updateCategoryData.message}`);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.closeModal)();\n      await getProductCategories(); // Refresh list or update UI\n    }\n    return updateCategoryData;\n  } catch (error) {\n    console.error('Error Updating Categories Info', error);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('error', '❌ Failed to Update Categories info');\n    throw error;\n  }\n}\nasync function updateProductInventory(updateInventoryDetails, shopId, productId) {\n  try {\n    //  console.log('Sending POST request...');\n\n    const updateProductData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_4__.safeFetch)(`${baseUrl}/api/inventory/shops/${shopId}/inventory/${productId}`, {\n      method: 'PUT',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(updateInventoryDetails)\n    });\n    if (updateProductData) {\n      // console.log('Product info Updated successfully:', updateProductData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('success', `✅ ${updateProductData.message}`);\n      await (0,_goods_js__WEBPACK_IMPORTED_MODULE_1__.renderProductInventoryTable)(shopId); // Refresh list or update UI\n    }\n    return updateProductData;\n  } catch (error) {\n    console.error('Error Updating Product Info', error);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('error', '❌ Failed to Update Product info');\n    throw error;\n  }\n}\nasync function getAllSales({\n  shopId,\n  page = 1,\n  limit = 10,\n  filters = {}\n}) {\n  try {\n    const queryParams = new URLSearchParams({\n      shopId,\n      page,\n      limit\n    });\n    if (filters.startDate) queryParams.append('startDate', filters.startDate);\n    if (filters.endDate) queryParams.append('endDate', filters.endDate);\n    if (filters.type) queryParams.append('type', filters.type);\n    if (filters.status) queryParams.append('status', filters.status);\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.showGlobalLoader)();\n    const posTransactionsData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_4__.safeFetch)(`${baseUrl}/api/sales?${queryParams.toString()}`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n    if (posTransactionsData) {\n      // showToast('success', `✅ ${posTransactionsData.message}`);\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n    }\n    return posTransactionsData;\n  } catch (error) {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n    console.error('Error receiving POS Transaction:', error);\n    throw error;\n  }\n}\n\n//# sourceURL=webpack://posbok/./JS/apiServices/inventory/inventoryResources.js?");

/***/ }),

/***/ "./JS/apiServices/login.js":
/*!*********************************!*\
  !*** ./JS/apiServices/login.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loginUser: () => (/* binding */ loginUser),\n/* harmony export */   logoutUser: () => (/* binding */ logoutUser)\n/* harmony export */ });\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config.js */ \"./config.js\");\n/* harmony import */ var _helper_helper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helper/helper.js */ \"./JS/helper/helper.js\");\n\n\nconst baseUrl = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].baseUrl;\nconst apiToken = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].token;\n\n// Function to Login a User - API\nasync function loginUser(userDetails) {\n  try {\n    //  console.log('Sending POST request...');\n    const response = await fetch(`${baseUrl}/api/auth/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(userDetails)\n      // mode: 'no-cors',\n    });\n\n    //  console.log('Response received...');\n    const data = await response.json();\n    if (!response.ok) {\n      // throw new Error(`HTTP error! status: ${response.status}`);\n      throw new Error(data.message || 'Something went wrong');\n    }\n\n    //  console.log('Logged in successfully:', data);\n    return data;\n  } catch (error) {\n    console.error('Login Error detail:', error.message);\n    throw error;\n  }\n}\n\n// Function to Logout a User - API\nasync function logoutUser() {\n  try {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n    //  console.log('Sending POST request...');\n    const response = await fetch(`${baseUrl}/api/auth/logout`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n\n    //  console.log('Response received...');\n    const data = await response.json();\n    if (!response.ok) {\n      // throw new Error(`HTTP error! status: ${response.status}`);\n      throw new Error(data.message || 'Something went wrong');\n    }\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    //  console.log('Logout successfully:', data);\n    return data;\n  } catch (error) {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    console.error('Logout Error detail:', error.message);\n    throw error;\n  }\n}\n\n//# sourceURL=webpack://posbok/./JS/apiServices/login.js?");

/***/ }),

/***/ "./JS/apiServices/pos/posResources.js":
/*!********************************************!*\
  !*** ./JS/apiServices/pos/posResources.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addPosCapital: () => (/* binding */ addPosCapital),\n/* harmony export */   closeBusinessDay: () => (/* binding */ closeBusinessDay),\n/* harmony export */   configurePosCharges: () => (/* binding */ configurePosCharges),\n/* harmony export */   configurePosMachineFees: () => (/* binding */ configurePosMachineFees),\n/* harmony export */   createPosTransaction: () => (/* binding */ createPosTransaction),\n/* harmony export */   getCurrentBusinessDay: () => (/* binding */ getCurrentBusinessDay),\n/* harmony export */   getPosCapital: () => (/* binding */ getPosCapital),\n/* harmony export */   getPosChargeSettings: () => (/* binding */ getPosChargeSettings),\n/* harmony export */   getPosMachineFeesettings: () => (/* binding */ getPosMachineFeesettings),\n/* harmony export */   getPosTransactions: () => (/* binding */ getPosTransactions),\n/* harmony export */   openAddMachineFeeModal: () => (/* binding */ openAddMachineFeeModal),\n/* harmony export */   openAdminCloseBusinessDayModal: () => (/* binding */ openAdminCloseBusinessDayModal),\n/* harmony export */   openAdminDepositPosCapitalModal: () => (/* binding */ openAdminDepositPosCapitalModal),\n/* harmony export */   openBusinessDay: () => (/* binding */ openBusinessDay),\n/* harmony export */   openCloseBusinessDayModal: () => (/* binding */ openCloseBusinessDayModal),\n/* harmony export */   openDepositPosCapitalModal: () => (/* binding */ openDepositPosCapitalModal),\n/* harmony export */   openaddPosChargeModal: () => (/* binding */ openaddPosChargeModal)\n/* harmony export */ });\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config.js */ \"./config.js\");\n/* harmony import */ var _helper_helper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../helper/helper.js */ \"./JS/helper/helper.js\");\n/* harmony import */ var _pos_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../pos.js */ \"./JS/pos.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../script.js */ \"./JS/script.js\");\n/* harmony import */ var _account_accountOverview_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../account/accountOverview.js */ \"./JS/apiServices/account/accountOverview.js\");\n/* harmony import */ var _utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utility/safeFetch.js */ \"./JS/apiServices/utility/safeFetch.js\");\n\n\n\n\n\n\n// import { safeFetch } from '../utility/safeFetch.js';\n\nconst baseUrl = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].baseUrl;\nconst userToken = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].token;\nconst userData = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].userData;\nconst dummyShopId = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dummyShopId; // Dummy user data for testing\n\nconst parsedUserData = userData ? JSON.parse(userData) : null;\nconst isAdmin = parsedUserData?.accountType === 'ADMIN';\nconst isStaff = parsedUserData?.accountType === 'STAFF';\n\n// const shopId = parsedUserData?.shopId;\n\n// console.log(shopId);\n\nfunction getCurrentDateISO() {\n  const now = new Date();\n  const localMidnight = new Date(now.getFullYear(), now.getMonth(), now.getDate()); // Local midnight\n  return localMidnight.toISOString();\n}\n\n// Deposit POS Capital Modal FOrm\nfunction openDepositPosCapitalModal() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const depositPosCapitalContainer = document.querySelector('.depositPosCapital');\n  if (depositPosCapitalContainer) depositPosCapitalContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n  (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.depositPosCapitalForm)();\n}\nfunction openAdminDepositPosCapitalModal() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const adminDepositPosCapitalContainer = document.querySelector('.adminDepositPosCapital');\n  if (adminDepositPosCapitalContainer) adminDepositPosCapitalContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n  (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.depositPosCapitalForm)();\n}\n\n// Close Business Modal FOrm\nfunction openCloseBusinessDayModal() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const closeBusinessDayContainer = document.querySelector('.closeBusinessDay');\n  if (closeBusinessDayContainer) closeBusinessDayContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n  (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.closeBusinessDayForm)();\n}\nfunction openAdminCloseBusinessDayModal() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const adminCloseBusinessDayContainer = document.querySelector('.adminCloseBusinessDay');\n  if (adminCloseBusinessDayContainer) adminCloseBusinessDayContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n  (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.closeBusinessDayForm)();\n}\nfunction openaddPosChargeModal() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const addPosChargeContainer = document.querySelector('.addPosCharge');\n  if (addPosChargeContainer) addPosChargeContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n\n  //   console.log('object');\n\n  (0,_pos_js__WEBPACK_IMPORTED_MODULE_2__.addPosChargeForm)();\n}\nfunction openAddMachineFeeModal() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const addMachineFeesContainer = document.querySelector('.addMachineFees');\n  if (addMachineFeesContainer) addMachineFeesContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n\n  //   console.log('object 1');\n\n  (0,_pos_js__WEBPACK_IMPORTED_MODULE_2__.addMachineFeeForm)();\n}\n\n// API CALLS\n\nasync function getCurrentBusinessDay(shopId) {\n  try {\n    //  console.log('Sending GET request...');\n\n    const currentBusinessDayData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_5__.safeFetch)(`${baseUrl}/api/pos/business-day?shopId=${shopId}`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n\n    //  console.log('Response received...');\n    //  console.log('shopId sent to backend:', shopId);\n    //  console.log(\n    //    'shopId received in response:',\n    //    currentBusinessDayData?.data?.shop_id\n    //  );\n\n    //  console.log('currentBusinessDayData', currentBusinessDayData);\n\n    return currentBusinessDayData;\n  } catch (err) {\n    const message = err.message.toLowerCase();\n\n    // Handle case where backend clearly tells us there's no open business day\n    if (message.includes('no open business day') || message.includes('no business day found') || message.includes('404')) {\n      console.warn('No open business day found.');\n      return false;\n    }\n\n    // Other unexpected or connection-level errors\n    console.error('Failed to fetch current business day:', err.message);\n    return null;\n  }\n}\nasync function openBusinessDay(openBusinessDayDetails) {\n  console.log(openBusinessDayDetails);\n  try {\n    //  showGlobalLoader();\n    console.log('Sending POST request...');\n    const openBusinessDayData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_5__.safeFetch)(`${baseUrl}/api/pos/business-day/`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(openBusinessDayDetails)\n    });\n    console.log('Response received...');\n    if (openBusinessDayData) {\n      console.log('Business Opened successfully:', openBusinessDayData);\n      // showToast('success', `✅ ${openBusinessDayData.message}`);\n      // hideGlobalLoader();\n    }\n    //  hideGlobalLoader();\n\n    return openBusinessDayData;\n  } catch (error) {\n    //  hideGlobalLoader();\n    console.error('Error Opening Business:', error);\n    throw error;\n  }\n}\nasync function closeBusinessDay(closeBusinessDayDetails) {\n  console.log(closeBusinessDayDetails);\n  try {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n    //  console.log('Sending POST request...');\n\n    const closeBusinessDayData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_5__.safeFetch)(`${baseUrl}/api/pos/business-day/close`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(closeBusinessDayDetails)\n    });\n\n    //  console.log('Response received...');\n\n    if (closeBusinessDayData) {\n      console.log('Business Closed successfully:', closeBusinessDayData);\n      // showToast('success', `✅ ${closeBusinessDayData.message}`);\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    }\n    return closeBusinessDayData;\n  } catch (error) {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    console.error('Error Closing Business:', error);\n    throw error;\n  }\n}\nasync function addPosCapital(posCapitalDetails) {\n  //   console.log(posCapitalDetails);\n  try {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n    //  console.log('Sending POST request...');\n\n    const addPosCapitalData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_5__.safeFetch)(`${baseUrl}/api/pos/capital`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(posCapitalDetails)\n    });\n\n    //  console.log('Response received...');\n\n    if (addPosCapitalData) {\n      // console.log('POS Capital added successfully:', addPosCapitalData);\n      // showToast('success', `✅ ${addPosCapitalData.message}`);\n      // hideGlobalLoader();\n    }\n    (0,_account_accountOverview_js__WEBPACK_IMPORTED_MODULE_4__.initAccountOverview)();\n    return addPosCapitalData;\n  } catch (error) {\n    //  hideGlobalLoader();\n    console.error('Error Add POS Capital:', error);\n    throw error;\n  }\n}\nasync function getPosCapital(shopId) {\n  //   console.log(shopId);\n  try {\n    //  console.log('Sending POST request...');\n\n    const posCapital = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_5__.safeFetch)(`${baseUrl}/api/pos/capital?shopId=${shopId}`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n        //  'Content-Type': 'application/json',\n      }\n    });\n\n    //  console.log('Response received...');\n\n    if (!posCapital) {\n      return;\n    }\n    return posCapital;\n  } catch (error) {\n    console.error('Error receiving POS Capital:', error);\n    throw error;\n  }\n}\nasync function createPosTransaction(transactionDetail) {\n  try {\n    //  console.log('Sending POST request...');\n    const posTransactionData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_5__.safeFetch)(`${baseUrl}/api/pos/transactions`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(transactionDetail)\n    });\n\n    //  console.log('Response received...');\n\n    if (posTransactionData) {\n      console.log('POS transaction added successfully:', posTransactionData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('success', `✅ ${posTransactionData.message}`);\n      // console.log(posTransactionData);\n    }\n    return posTransactionData;\n  } catch (error) {\n    console.error('Error Creating POS Transaction:', error);\n    throw error;\n  }\n}\nasync function getPosTransactions({\n  shopId,\n  page = 1,\n  limit = 10,\n  filters = {}\n}) {\n  try {\n    const queryParams = new URLSearchParams({\n      shopId,\n      page,\n      limit\n    });\n    if (filters.startDate) queryParams.append('startDate', filters.startDate);\n    if (filters.endDate) queryParams.append('endDate', filters.endDate);\n    if (filters.type) queryParams.append('type', filters.type);\n    if (filters.status) queryParams.append('status', filters.status);\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n    const posTransactionsData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_5__.safeFetch)(`${baseUrl}/api/pos/transactions?${queryParams.toString()}`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n    if (posTransactionsData) {\n      // showToast('success', `✅ ${posTransactionsData.message}`);\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    }\n    return posTransactionsData;\n  } catch (error) {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    console.error('Error receiving POS Transaction:', error);\n    throw error;\n  }\n}\nasync function configurePosCharges(posChargesDetails) {\n  console.log(posChargesDetails);\n  try {\n    //  console.log('Sending POST request...');\n\n    const posChargesData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_5__.safeFetch)(`${baseUrl}/api/pos/settings/charges`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(posChargesDetails)\n    });\n\n    //  console.log('Response received...');\n\n    if (posChargesData) {\n      // console.log('POS Charges configured successfully:', posChargesData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('success', `✅ ${posChargesData.message}`);\n\n      // Refresh the table list after successful configuration\n      getPosChargeSettings();\n    }\n    return posChargesData;\n  } catch (error) {\n    console.error('Error Configuring POS Charges:', error);\n    throw error;\n  }\n}\nasync function getPosChargeSettings() {\n  const tbody = document.querySelector('.posCharge-table tbody');\n  function showLoadingRow() {\n    if (tbody) tbody.innerHTML = `\n    <tr class=\"loading-row\">\n      <td colspan=\"6\" class=\"table-error-text\">Loading POS Charges...</td>\n    </tr>\n  `;\n  }\n  showLoadingRow();\n  try {\n    //  console.log('Sending POST request...');\n\n    const posChargeSettingsData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_5__.safeFetch)(`${baseUrl}/api/pos/settings/charges`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n        //  'Content-Type': 'application/json',\n      }\n    });\n\n    //  console.log('Response received...');\n\n    //  if (posChargeSettingsData) {\n    //  }\n\n    //  console.log(posChargeSettingsData);\n    (0,_pos_js__WEBPACK_IMPORTED_MODULE_2__.populatePosChargesTable)(posChargeSettingsData);\n    return posChargeSettingsData;\n  } catch (error) {\n    if (tbody) tbody.innerHTML = `\n    <tr class=\"loading-row\">\n      <td colspan=\"6\" class=\"table-error-text\">Error Loading POS Charges...</td>\n    </tr>\n  `;\n    console.error('Error receiving POS COnfiguration settings:', error);\n    throw error;\n  }\n}\nasync function configurePosMachineFees(posMachineFeesDetails) {\n  //   console.log(posMachineFeesDetails);\n  try {\n    //  console.log('Sending POST request...');\n\n    const posMachineFeesData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_5__.safeFetch)(`${baseUrl}/api/pos/settings/fees`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(posMachineFeesDetails)\n    });\n\n    //  console.log('Response received...');\n\n    if (posMachineFeesData) {\n      // console.log(\n      //   'POS MachineFees configured successfully:',\n      //   posMachineFeesData\n      // );\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('success', `✅ ${posMachineFeesData.message}`);\n\n      // Refresh the table list after successful configuration\n      getPosMachineFeesettings();\n    }\n    return posMachineFeesData;\n  } catch (error) {\n    console.error('Error Configuring POS MachineFees:', error);\n    throw error;\n  }\n}\nasync function getPosMachineFeesettings() {\n  const tbody = document.querySelector('.machineFee-table tbody');\n  function showLoadingRow() {\n    if (tbody) tbody.innerHTML = `\n    <tr class=\"loading-row\">\n      <td colspan=\"6\" class=\"table-error-text\">Loading POS Machine Fees...</td>\n    </tr>\n  `;\n  }\n  showLoadingRow();\n  try {\n    //  console.log('Sending GET request...');\n\n    const posMachineFeeSettingsData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_5__.safeFetch)(`${baseUrl}/api/pos/settings/fees`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n        //  'Content-Type': 'application/json',\n      }\n    });\n\n    //  console.log('Response received...');\n\n    //  if (posMachineFeeSettingsData) {\n    //  }\n\n    //  console.log(posMachineFeeSettingsData);\n    (0,_pos_js__WEBPACK_IMPORTED_MODULE_2__.populateMachineFeesTable)(posMachineFeeSettingsData);\n    return posMachineFeeSettingsData;\n  } catch (error) {\n    if (tbody) tbody.innerHTML = `\n    <tr class=\"loading-row\">\n      <td colspan=\"6\" class=\"table-error-text\">Error Loading POS Machine Fees...</td>\n    </tr>\n  `;\n    console.error('Error receiving POS COnfiguration settings:', error);\n    throw error;\n  }\n}\n\n//# sourceURL=webpack://posbok/./JS/apiServices/pos/posResources.js?");

/***/ }),

/***/ "./JS/apiServices/sales/salesResources.js":
/*!************************************************!*\
  !*** ./JS/apiServices/sales/salesResources.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSale: () => (/* binding */ createSale),\n/* harmony export */   getAllSales: () => (/* binding */ getAllSales),\n/* harmony export */   getDailySalesSummary: () => (/* binding */ getDailySalesSummary),\n/* harmony export */   getMonthlySalesSummary: () => (/* binding */ getMonthlySalesSummary),\n/* harmony export */   getSaleById: () => (/* binding */ getSaleById),\n/* harmony export */   getSalesByProduct: () => (/* binding */ getSalesByProduct),\n/* harmony export */   getSalesByStaff: () => (/* binding */ getSalesByStaff)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config */ \"./config.js\");\n/* harmony import */ var _helper_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../helper/helper */ \"./JS/helper/helper.js\");\n/* harmony import */ var _utility_safeFetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility/safeFetch */ \"./JS/apiServices/utility/safeFetch.js\");\n\n\n\nconst baseUrl = _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].baseUrl;\nconst userToken = _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].token;\nasync function createSale(saleDetails) {\n  try {\n    //  console.log('Sending POST request...');\n    const soldData = await (0,_utility_safeFetch__WEBPACK_IMPORTED_MODULE_2__.safeFetch)(`${baseUrl}/api/sales`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(saleDetails)\n    });\n\n    //  console.log('soldData received...');\n\n    //  if (soldData) {\n    //    // console.log('Sale added successfully:', soldData);\n    //    showToast('success', `✅ ${soldData.message}`);\n    //  }\n\n    //  console.log('soldData:', soldData);\n    return soldData;\n  } catch (error) {\n    console.error('Error Creating Sale:', error.message);\n  }\n}\nasync function getAllSales({\n  shopId,\n  page = 1,\n  limit = 10,\n  filters = {}\n}) {\n  try {\n    const queryParams = new URLSearchParams({\n      shopId,\n      page,\n      limit\n    });\n    if (filters.startDate) queryParams.append('startDate', filters.startDate);\n    if (filters.endDate) queryParams.append('endDate', filters.endDate);\n    if (filters.paymentMethod) queryParams.append('paymentMethod', filters.paymentMethod);\n    if (filters.status) queryParams.append('status', filters.status);\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n    const salesData = await (0,_utility_safeFetch__WEBPACK_IMPORTED_MODULE_2__.safeFetch)(`${baseUrl}/api/sales?${queryParams.toString()}`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n\n    //  console.log(`/api/sales?${queryParams.toString()}`);\n    //  console.log('🧾 Sales FILTERING:', filters);\n\n    if (salesData) {\n      (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    }\n\n    //  console.log('salesData received...');\n\n    //  console.log('salesData:', salesData);\n\n    return salesData;\n  } catch (error) {\n    console.error('Error fetching sales:', error.message);\n  }\n}\nasync function getSaleById(saleId) {\n  try {\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n    const selectedSaleData = await (0,_utility_safeFetch__WEBPACK_IMPORTED_MODULE_2__.safeFetch)(`${baseUrl}/api/sales/${saleId}`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n\n    //  console.log('selectedSaleData received...');\n\n    //  console.log('selectedSaleData:', selectedSaleData);\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    return selectedSaleData;\n  } catch (error) {\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    console.error('Error fetching sales:', error.message);\n  }\n}\nasync function getSalesByStaff(staffId) {\n  try {\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n    const selectedStaffData = await (0,_utility_safeFetch__WEBPACK_IMPORTED_MODULE_2__.safeFetch)(`${baseUrl}/api/sales/staff/${staffId}`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n\n    //  console.log('selectedStaffData received...');\n\n    //  console.log('selectedStaffData:', selectedStaffData);\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    return selectedStaffData;\n  } catch (error) {\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    console.error('Error fetching Staffs:', error.message);\n  }\n}\nasync function getSalesByProduct(ProductId) {\n  try {\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n    const selectedProductData = await (0,_utility_safeFetch__WEBPACK_IMPORTED_MODULE_2__.safeFetch)(`${baseUrl}/api/sales/product/${ProductId}`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n\n    //  console.log('selectedProductData received...');\n\n    //  console.log('selectedProductData:', selectedProductData);\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    return selectedProductData;\n  } catch (error) {\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    console.error('Error fetching Products:', error.message);\n  }\n}\nasync function getDailySalesSummary(shopId, date) {\n  try {\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n    const dailySalesSummaryData = await (0,_utility_safeFetch__WEBPACK_IMPORTED_MODULE_2__.safeFetch)(`${baseUrl}/api/sales/summary/daily?date=${date}&shopId=${shopId}`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n    console.log(`${baseUrl}/api/sales/summary/daily?date=${date}&shopId=${shopId}`);\n    //  console.log('dailySalesSummaryData received...');\n\n    //  console.log('dailySalesSummaryData:', dailySalesSummaryData);\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    return dailySalesSummaryData;\n  } catch (error) {\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    console.error('Error fetching Products:', error.message);\n  }\n}\nasync function getMonthlySalesSummary(year, month) {\n  try {\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n    const monthlySalesSummaryData = await (0,_utility_safeFetch__WEBPACK_IMPORTED_MODULE_2__.safeFetch)(`${baseUrl}/api/sales/summary/monthly?year=${year}&month=${month}`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n\n    //  console.log('monthlySalesSummaryData received...');\n\n    //  console.log('monthlySalesSummaryData:', monthlySalesSummaryData);\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    return monthlySalesSummaryData;\n  } catch (error) {\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    console.error('Error fetching Products:', error.message);\n  }\n}\n\n//# sourceURL=webpack://posbok/./JS/apiServices/sales/salesResources.js?");

/***/ }),

/***/ "./JS/apiServices/shop/shopResource.js":
/*!*********************************************!*\
  !*** ./JS/apiServices/shop/shopResource.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkAndPromptCreateShop: () => (/* binding */ checkAndPromptCreateShop),\n/* harmony export */   createShop: () => (/* binding */ createShop),\n/* harmony export */   deleteShop: () => (/* binding */ deleteShop),\n/* harmony export */   fetchShopDetail: () => (/* binding */ fetchShopDetail),\n/* harmony export */   getShopStaff: () => (/* binding */ getShopStaff),\n/* harmony export */   openCreateShopModal: () => (/* binding */ openCreateShopModal),\n/* harmony export */   openUpdateShopModal: () => (/* binding */ openUpdateShopModal),\n/* harmony export */   setupCreateShopForm: () => (/* binding */ setupCreateShopForm),\n/* harmony export */   updateShop: () => (/* binding */ updateShop)\n/* harmony export */ });\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config.js */ \"./config.js\");\n/* harmony import */ var _goods_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../goods.js */ \"./JS/goods.js\");\n/* harmony import */ var _helper_helper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../helper/helper.js */ \"./JS/helper/helper.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../script.js */ \"./JS/script.js\");\n/* harmony import */ var _shops_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../shops.js */ \"./JS/shops.js\");\n/* harmony import */ var _staff_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../staff.js */ \"./JS/staff.js\");\n/* harmony import */ var _business_businessResource_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../business/businessResource.js */ \"./JS/apiServices/business/businessResource.js\");\n/* harmony import */ var _utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility/safeFetch.js */ \"./JS/apiServices/utility/safeFetch.js\");\n\n\n\n\n\n\n\n\nconst baseUrl = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].baseUrl;\nconst userToken = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].token;\nconst userData = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].userData;\nconst parsedUserData = userData ? JSON.parse(userData) : null;\nconst isAdmin = parsedUserData?.accountType === 'ADMIN';\nconst isStaff = parsedUserData?.accountType === 'STAFF';\nconst userId = parsedUserData?.id;\nconst shopKey = `shop_${userId}`;\n\n// const parsedUserData = userData ? JSON.parse(userData) : null;\n\nconst urlParams = new URLSearchParams(window.location.search);\nconst preselectedShopId = urlParams.get('shopId');\nasync function createShop(shopDetails) {\n  try {\n    //  console.log('Sending POST request...');\n\n    const fetchedData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_7__.safeFetch)(`${baseUrl}/api/shop`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(shopDetails)\n    });\n    if (fetchedData) {\n      // console.log('Shop created successfully:', fetchedData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('success', `✅ ${fetchedData.message}`);\n      checkAndPromptCreateShop(); // Refresh the shop list after creation\n    }\n\n    //  //  console.log('Response received...');\n\n    //  if (!response.ok) {\n    //    // throw new Error(`HTTP error! status: ${response.status}`);\n    //    throw new Error(data.message || 'Something went wrong');\n    //  }\n\n    //  //  console.log('Shop created successfully:', data);\n    //  showToast('success', `✅ ${data.message}`);\n    //  checkAndPromptCreateShop(); // Refresh the shop list after creation\n\n    if (document.querySelector('#assignStaffCheckbox').checked) {\n      setTimeout(() => {\n        const proceed = confirm('You chose to assign a staff to this shop. Would you like to do that now?');\n        if (proceed) {\n          // Open staff creation modal or navigate to staff creation page\n\n          window.location.href = `staff-profile.html?from=shop-creation&shopId=${fetchedData.data.id}`;\n        }\n      }, 600);\n    }\n    return fetchedData;\n  } catch (error) {\n    console.error('Error creating Shop:', error);\n    throw error;\n  }\n}\nasync function fetchShopDetail(shopId) {\n  try {\n    //  console.log('Sending POST request...');\n\n    const receivedShopDetail = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_7__.safeFetch)(`${baseUrl}/api/shop/${shopId}`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n\n    //  console.log('Response received...');\n\n    if (!receivedShopDetail) {\n      console.log('Shop detail NOT received :', receivedShopDetail);\n      // showToast('success', `✅ ${receivedShopDetail.message}`);\n      return;\n    }\n    localStorage.setItem(shopKey, JSON.stringify(receivedShopDetail));\n    return receivedShopDetail;\n  } catch (error) {\n    console.error('Error creating Admin:', error);\n    throw error;\n  }\n}\n\n// The functions below are used to check if the user has a shop and prompt them to creat one if they don't - checkAndPromptCreateShop, openCreateShopModal, setupCreateShopForm, and setupModalCloseButtons\n\nasync function checkAndPromptCreateShop() {\n  const tbody = document.querySelector('.shops-table tbody');\n  function showLoadingRow() {\n    if (tbody) tbody.innerHTML = `\n   <tr class=\"loading-row\">\n     <td colspan=\"6\" class=\"table-error-text\">Loading shops...</td>\n   </tr>\n `;\n  }\n  showLoadingRow();\n  try {\n    // Get the business ID from user data\n\n    //  showGlobalLoader();\n    //  const businessData = await fetchBusinessDetails();\n    //  const businessId = businessData?.data?.id;\n\n    const userData = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].userData;\n    const parsedUserData = userData ? JSON.parse(userData) : null;\n    const businessId = parsedUserData ? parsedUserData.businessId || null : null;\n    if (!businessId) {\n      console.warn('⚠️ No businessId found — skipping fetchBusinessDetails.');\n      return;\n    }\n    const fetchedData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_7__.safeFetch)(`${baseUrl}/api/shop`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n    let userShops = [];\n    let enrichedShopData = [];\n\n    //  console.log('fetchedData', fetchedData);\n\n    if (fetchedData) {\n      // hideGlobalLoader();\n      userShops = fetchedData.data.filter(shop => shop.business_id === businessId);\n\n      // console.log(userShops);\n\n      // Get staff data for each shop in parallel\n      enrichedShopData = await Promise.all(userShops.map(async shop => {\n        //  console.log('shop', shop);\n        const staffResponse = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_7__.safeFetch)(`${baseUrl}/api/shop/${shop.id}/staff`, {\n          method: 'GET',\n          headers: {\n            Authorization: `Bearer ${userToken}`\n          }\n        });\n        const staff = staffResponse?.data || [];\n        //  const staffList = staffResponse?.data || [];\n\n        //  console.log('staffList', staffList);\n        //  console.log('staffList', staff);\n\n        //  const staffNames = staffList\n        //    .map(\n        //      (staff, i) => `${i + 1}. ${staff.first_name} ${staff.last_name}`\n        //    )\n        //    .join('<br>');\n\n        //  const staffId = staffList.map((staff) => staff.id);\n\n        // Enrich staff with shopId\n        const enrichedStaff = staff.map(staffMember => ({\n          ...staffMember,\n          shopId: shop.id // Add the shopId to each staff member\n        }));\n        return {\n          ...shop,\n          staff: enrichedStaff\n          // manager_name: staffNames || '—',\n          // staffId: staffId,\n        };\n      }));\n\n      // console.log('ShopResources.js enrichedShopData', enrichedShopData);\n\n      (0,_shops_js__WEBPACK_IMPORTED_MODULE_4__.populateShopsTable)(enrichedShopData);\n      (0,_staff_js__WEBPACK_IMPORTED_MODULE_5__.populateShopDropdown)(enrichedShopData, Number(preselectedShopId));\n      (0,_goods_js__WEBPACK_IMPORTED_MODULE_1__.populateGoodsShopDropdown)(enrichedShopData);\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.populateBusinessShopDropdown)(enrichedShopData);\n      // populateUserShop(userShops);\n\n      //  console.log('checkAndPromptCreateShop data', enrichedShopData);\n\n      if (enrichedShopData.length === 0) {\n        openCreateShopModal();\n      }\n    }\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n    return {\n      fetchedData,\n      userShops,\n      enrichedShopData,\n      businessId\n    };\n  } catch (error) {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n    console.error('Error checking shop:', error.message);\n    throw error;\n  }\n}\nfunction openCreateShopModal() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const createShopContainer = document.querySelector('.createShop');\n  if (createShopContainer) createShopContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n}\nfunction openUpdateShopModal() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const updateShopContainer = document.querySelector('.adminUpdateShopData');\n  if (updateShopContainer) updateShopContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n}\nfunction setupCreateShopForm() {\n  const form = document.querySelector('.createShopModal');\n  if (!form || form.dataset.bound === 'true') return;\n  form.dataset.bound = 'true';\n  if (form) {\n    form.addEventListener('submit', async function (e) {\n      e.preventDefault();\n      const shopNameInput = document.querySelector('#shopName');\n      const shopAddressInput = document.querySelector('#shopAddress');\n      const serviceTypeCheckboxes = document.querySelectorAll('input[name=\"serviceType\"]:checked');\n      const serviceType = Array.from(serviceTypeCheckboxes).map(cb => cb.value);\n      const serviceTypeValue = serviceType[0] || null;\n      const shopDetails = {\n        shopName: shopNameInput.value,\n        location: shopAddressInput.value,\n        serviceType: serviceTypeValue\n      };\n      try {\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.showGlobalLoader)();\n        createShop(shopDetails).then(data => {\n          (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n          (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.closeModal)();\n\n          // Clear inputs and checkboxes\n          shopNameInput.value = '';\n          shopAddressInput.value = '';\n          document.querySelectorAll('input[name=\"serviceType\"]').forEach(cb => cb.checked = false);\n          // serviceTypeCheckboxes.forEach(\n          //   (checkbox) => (checkbox.checked = false)\n          // );\n\n          //   redirectWithDelay('Homepage', 'manage.html', 500);\n          // window.location.href = 'manage.html';\n        }).catch(data => {\n          (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n          (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('fail', `❎ ${data.message}`);\n          console.error('❎ Failed to create shop:', data.message);\n        });\n        //   console.log('Creating shop with:', shopDetails);\n        // closeModal(); // close modal after success\n      } catch (err) {\n        console.error('Error creating shop:', err.message);\n      }\n    });\n  }\n}\n\n// More Shop functions for shop functionality\n\nasync function deleteShop(shopId) {\n  try {\n    //  console.log('Sending POST request...');\n\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.showGlobalLoader)();\n    const response = await fetch(`${baseUrl}/api/shop/${shopId}`, {\n      method: 'DELETE',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.message || 'Something went wrong');\n    }\n    if (data) {\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n    }\n\n    //  console.log('Shop deleted successfully:', data);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('success', `✅ ${data.message}`);\n    checkAndPromptCreateShop(); // Refresh list or update UI\n\n    return data;\n  } catch (error) {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n    console.error('Error deleting Shop', error);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('error', '❌ Failed to delete Shop');\n    throw error;\n  }\n}\nasync function getShopStaff(shopId) {\n  // console.log('Fetching shop staff for shopId:', shopId);\n  try {\n    const fetchedData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_7__.safeFetch)(`${baseUrl}/api/shop/${shopId}/staff`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n\n    // If data was fetched successfully, return it\n    if (fetchedData) {\n      return fetchedData.data;\n    }\n    return []; // If no data, return empty array\n  } catch (error) {\n    console.error('Error fetching shop staff:', error);\n    return []; // Return empty array on error\n  }\n}\nasync function updateShop(shop_id, shopUpdatedDetails) {\n  try {\n    console.log('Sending POST request...');\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.showGlobalLoader)();\n    const updateShopData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_7__.safeFetch)(`${baseUrl}/api/shop/${shop_id}`, {\n      method: 'PUT',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(shopUpdatedDetails)\n    });\n    if (updateShopData) {\n      // console.log('Shop info Updated successfully:', updateShopData);\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('success', `✅ ${updateShopData.message}`);\n      checkAndPromptCreateShop(); // Refresh list or update UI\n    }\n    return updateShopData;\n  } catch (error) {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n    console.error('Error Updating Shop Info', error);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_3__.showToast)('error', '❌ Failed to Update Shop info');\n    throw error;\n  }\n}\n\n//# sourceURL=webpack://posbok/./JS/apiServices/shop/shopResource.js?");

/***/ }),

/***/ "./JS/apiServices/user/userResource.js":
/*!*********************************************!*\
  !*** ./JS/apiServices/user/userResource.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assignUserToShop: () => (/* binding */ assignUserToShop),\n/* harmony export */   checkAndPromptCreateStaff: () => (/* binding */ checkAndPromptCreateStaff),\n/* harmony export */   createStaff: () => (/* binding */ createStaff),\n/* harmony export */   deleteUser: () => (/* binding */ deleteUser),\n/* harmony export */   fetchProfileDetails: () => (/* binding */ fetchProfileDetails),\n/* harmony export */   fetchStaffDetail: () => (/* binding */ fetchStaffDetail),\n/* harmony export */   openCreateStaffModal: () => (/* binding */ openCreateStaffModal),\n/* harmony export */   openManageStaffModal: () => (/* binding */ openManageStaffModal),\n/* harmony export */   openUpdateStaffModal: () => (/* binding */ openUpdateStaffModal),\n/* harmony export */   removeStaffFromShop: () => (/* binding */ removeStaffFromShop),\n/* harmony export */   updateUser: () => (/* binding */ updateUser),\n/* harmony export */   updateUserProfile: () => (/* binding */ updateUserProfile),\n/* harmony export */   updateUserProfilePassword: () => (/* binding */ updateUserProfilePassword)\n/* harmony export */ });\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config.js */ \"./config.js\");\n/* harmony import */ var _helper_helper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../helper/helper.js */ \"./JS/helper/helper.js\");\n/* harmony import */ var _script_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../script.js */ \"./JS/script.js\");\n/* harmony import */ var _staff_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../staff.js */ \"./JS/staff.js\");\n/* harmony import */ var _business_businessResource_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../business/businessResource.js */ \"./JS/apiServices/business/businessResource.js\");\n/* harmony import */ var _shop_shopResource_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../shop/shopResource.js */ \"./JS/apiServices/shop/shopResource.js\");\n/* harmony import */ var _utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utility/safeFetch.js */ \"./JS/apiServices/utility/safeFetch.js\");\n\n\n\n\n\n\n\nconst baseUrl = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].baseUrl;\nconst userToken = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].token;\nconst userData = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].userData;\nconst parsedUserData = userData ? JSON.parse(userData) : null;\nconst params = new URLSearchParams(window.location.search);\nconst shopId = params.get('shopId');\nconst from = params.get('from');\nconst isStaffProfilePage = window.location.href.includes('staff-profile');\nlet enrichedShopData = [];\n\n// window.addEventListener('DOMContentLoaded', async () => {\n//   try {\n//     const shopData = await checkAndPromptCreateShop();\n\n//     // Assign to outer variables\n\n//     //  enrichedShopData = shopData.enrichedShopData;\n\n//     //  await checkAndPromptCreateStaff();\n\n//     //  console.log('Shops loaded:', userShops);\n//     //  console.log('enrichedShopData loaded:', enrichedShopData);\n\n//     // ✅ Now that data is available, call populateStaffTable here\n//     //  populateStaffTable();\n\n//     // Now you can safely call functions below that depend on them\n//   } catch (err) {\n//     console.error('Failed to load shop data:', err.message);\n//   }\n// });\n\nasync function createStaff(staffDetails) {\n  try {\n    //  console.log('Sending POST request...');\n\n    const createStaffData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_6__.safeFetch)(`${baseUrl}/api/users`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(staffDetails)\n    });\n\n    //  console.log('Response received...');\n\n    if (createStaffData) {\n      // console.log('Staff created successfully:', createStaffData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.showToast)('success', `✅ ${createStaffData.message}`);\n      checkAndPromptCreateStaff(); // Refresh the Staff list after creation\n    }\n    return createStaffData;\n  } catch (error) {\n    console.error('Error creating Admin:', error);\n    throw error;\n  }\n}\nasync function fetchProfileDetails() {\n  try {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n    //  console.log('Fetching profile details for user');\n\n    const fetchedData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_6__.safeFetch)(`${baseUrl}/api/users/profile`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n\n    //  console.log('Response received...');\n    //  console.log(fetchedData);\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    return fetchedData;\n  } catch (error) {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    console.error('Error Fetching Profile Info:', error.message);\n    throw error;\n  }\n}\nasync function updateUserProfile(updateProfileDetails) {\n  try {\n    //  console.log('Sending POST request...');\n\n    const updateUserProfileData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_6__.safeFetch)(`${baseUrl}/api/users/profile`, {\n      method: 'PUT',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(updateProfileDetails)\n    });\n    if (updateUserProfileData) {\n      // console.log('Profile info Updated successfully:', updateUserProfileData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.showToast)('success', `✅ ${updateUserProfileData.message}`);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.renderUserprofileDetails)(); // Refresh list or update UI\n    }\n    return updateUserProfileData;\n  } catch (error) {\n    console.error('Error Updating Profile Info', error);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.showToast)('error', '❌ Failed to Update Profile info');\n    throw error;\n  }\n}\nasync function updateUserProfilePassword(updateProfileDetails) {\n  try {\n    //  console.log('Sending POST request...');\n\n    const updateUserProfilePasswordData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_6__.safeFetch)(`${baseUrl}/api/users/change-password`, {\n      method: 'PUT',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(updateProfileDetails)\n    });\n    if (updateUserProfilePasswordData) {\n      // console.log(\n      //   'Password info Updated successfully:',\n      //   updateUserProfilePasswordData\n      // );\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.showToast)('success', `✅ ${updateUserProfilePasswordData.message}`);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.renderUserprofileDetails)(); // Refresh list or update UI\n    }\n    return updateUserProfilePasswordData;\n  } catch (error) {\n    console.error('Error Updating Password Info', error);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.showToast)('error', '❌ Failed to Update Password info');\n    throw error;\n  }\n}\nasync function fetchStaffDetail(staffId) {\n  try {\n    //  console.log('Sending POST request...');\n\n    const receivedStaffDetail = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_6__.safeFetch)(`${baseUrl}/api/users/${staffId}`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n\n    //  console.log('Response received...');\n\n    if (!receivedStaffDetail) {\n      // showToast('fail', `✅ ${receivedStaffDetail.message}`);\n      return;\n    }\n\n    //  console.log('Staff detail received successfully:', receivedStaffDetail);\n\n    return receivedStaffDetail;\n  } catch (error) {\n    console.error('Error creating Admin:', error);\n    throw error;\n  }\n}\n\n// export async function fetchAndDisplayAllShopStaff() {\n//   try {\n//     const businessData = await fetchBusinessDetails();\n//     const businessId = businessData?.data?.id;\n\n//     if (!businessId) throw new Error('Business ID not found');\n\n//     const fetchedShops = await safeFetch(`${baseUrl}/api/shop`, {\n//       method: 'GET',\n//       headers: {\n//         Authorization: `Bearer ${userToken}`,\n//       },\n//     });\n\n//     if (!fetchedShops || !fetchedShops.data) return;\n\n//     const userShops = fetchedShops.data.filter(\n//       (shop) => shop.business_id === businessId\n//     );\n\n//     // Fetch staff for each shop and attach shopId\n//     const allStaffWithShopId = [];\n\n//     for (const shop of userShops) {\n//       const staffResponse = await safeFetch(\n//         `${baseUrl}/api/shop/${shop.id}/staff`,\n//         {\n//           method: 'GET',\n//           headers: {\n//             Authorization: `Bearer ${userToken}`,\n//           },\n//         }\n//       );\n\n//       const staffList = staffResponse?.data || [];\n\n//       const enrichedStaff = staffList.map((staff) => ({\n//         ...staff,\n//         shopId: shop.id,\n//         shopName: shop.shop_name,\n//       }));\n\n//       allStaffWithShopId.push(...enrichedStaff);\n//     }\n\n//     console.log('allStaffWithShopId', allStaffWithShopId);\n\n//     // Display the enriched staff list in the staff table\n//     populateStaffTable(allStaffWithShopId);\n//   } catch (error) {\n//     console.error('Error fetching staff across shops:', error.message);\n//     throw error;\n//   }\n// }\n\n// fetchAndDisplayAllShopStaff();\n\n// The functions below are used to check if the user has a Staff and prompt them to creat one if they don't - checkAndPromptCreateStaff, openCreateStaffModal, setupCreateStaffForm, and setupModalCloseButtons\n\nasync function checkAndPromptCreateStaff() {\n  (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n  function showLoadingRow() {\n    const tbody = document.querySelector('.staff-table tbody');\n    if (tbody) tbody.innerHTML = `\n   <tr class=\"loading-row\">\n     <td colspan=\"6\" class=\"table-error-text\">Loading Staff...</td>\n   </tr>\n `;\n  }\n  showLoadingRow();\n\n  //   console.log('enrichedShopData', enrichedShopData);\n\n  try {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n    const {\n      enrichedShopData: loadedShops\n    } = await (0,_shop_shopResource_js__WEBPACK_IMPORTED_MODULE_5__.checkAndPromptCreateShop)();\n    enrichedShopData = loadedShops;\n    const response = await fetch(`${baseUrl}/api/users?page=1&limit=10`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n    const data = await response.json();\n    const allStaffs = data.data.users || [];\n\n    // Filter out admins\n    const nonAdminStaff = allStaffs.filter(staff => staff.accountType !== 'ADMIN');\n\n    // If we’re on staff-profile and there is only one staff (admin)\n    const onlyAdminExists = allStaffs.length === 1 && allStaffs[0].accountType === 'ADMIN';\n    const shouldOpenModal = onlyAdminExists && isStaffProfilePage || from === 'shop-creation' && isStaffProfilePage;\n    if (shouldOpenModal) {\n      // showGlobalLoader();\n      openCreateStaffModal();\n      const newUrl = new URL(window.location.href);\n      newUrl.searchParams.delete('from');\n      window.history.replaceState({}, '', newUrl);\n      // hideGlobalLoader();\n    }\n\n    // Populate the table with all business staff\n    //  console.log('allStaffs', allStaffs);\n    //  console.log('enrichedShopData', enrichedShopData);\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n    (0,_staff_js__WEBPACK_IMPORTED_MODULE_3__.populateStaffTable)(allStaffs, enrichedShopData);\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.populateBusinessStaffDropdown)(allStaffs);\n    if (!response.ok) {\n      throw new Error(data.message || 'Something went wrong');\n    }\n    return data;\n  } catch (error) {\n    console.error('Error checking Staff:', error.message);\n  } finally {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n  }\n\n  //   try {\n  //     const response = await fetch(`${baseUrl}/api/users?page=1&limit=10`, {\n  //       method: 'GET',\n  //       headers: {\n  //         Authorization: `Bearer ${userToken}`,\n  //       },\n  //     });\n\n  //     const data = await response.json();\n  //     console.log(data);\n\n  //     const allStaffs = data.data.users || [];\n\n  //     const businessStaffIsAdmin = data.data.users.filter(\n  //       (staff) => staff.accountType === 'ADMIN'\n  //     );\n\n  //     // Show modal if:\n  //     // (1) Only ADMIN exists, and we're on the staff-profile page\n  //     // (2) Redirected from shop creation\n  //     if (\n  //       (allStaffs.length === 0 && businessStaffIsAdmin && isStaffProfilePage) ||\n  //       (from === 'shop-creation' && isStaffProfilePage)\n  //     ) {\n  //       openCreateStaffModal();\n  //     }\n\n  //     // Populate the table with all business staff\n  //     populateStaffTable(allStaffs);\n\n  //     if (!response.ok) {\n  //       throw new Error(data.message || 'Something went wrong');\n  //     }\n\n  //     return data;\n  //   } catch (error) {\n  //     console.error('Error checking Staff:', error.message);\n  //     throw error;\n  //   }\n}\nfunction openCreateStaffModal() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const createStaffContainer = document.querySelector('.addUser');\n  if (createStaffContainer) createStaffContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n}\nfunction openUpdateStaffModal() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const updateStaffContainer = document.querySelector('.adminUpdateUserData');\n  if (updateStaffContainer) updateStaffContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n}\nfunction openManageStaffModal() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const ManageStaffContainer = document.querySelector('.staffManage');\n  if (ManageStaffContainer) ManageStaffContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n}\nasync function deleteUser(user_id) {\n  try {\n    //  console.log('Sending POST request...');\n\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n    const response = await fetch(`${baseUrl}/api/users/${user_id}`, {\n      method: 'DELETE',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.message || 'Something went wrong');\n    }\n    if (data) {\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    }\n\n    //  console.log('Staff deleted successfully:', data);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.showToast)('success', `✅ ${data.message}`);\n    checkAndPromptCreateStaff(); // Refresh list or update UI\n\n    return data;\n  } catch (error) {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n    //  console.error('Error deleting Staff', error);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.showToast)('error', '❌ Failed to delete staff');\n    throw error;\n  }\n}\nasync function assignUserToShop(user_id, staffAssigningDetails) {\n  try {\n    //  console.log('Sending POST request...');\n\n    const assignUserToShopData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_6__.safeFetch)(`${baseUrl}/api/users/${user_id}/shops`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(staffAssigningDetails)\n    });\n    if (assignUserToShopData) {\n      // console.log('Staff assigned to shop successfully:', assignUserToShopData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.showToast)('success', `✅ ${assignUserToShopData.message}`);\n      checkAndPromptCreateStaff(); // Refresh list or update UI\n    }\n    return assignUserToShopData;\n  } catch (error) {\n    console.error('Error Assigning Staff', error);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.showToast)('error', '❌ Failed to Assign staff');\n    throw error;\n  }\n}\n\n// CORS ISSUE WIH THIS ENDPOINT - NO ACCESS-CONTROL-ALLOW-ORIGIN HEADER\n// export async function assignStaffToShop(shop_id, staffDetailsForAssigningShop) {\n//   try {\n//     //  console.log('Sending POST request...');\n\n//     const assignStaffToShopData = await safeFetch(\n//       `${baseUrl}/api/users/${shop_id}/shops`,\n//       {\n//         method: 'POST',\n//         headers: {\n//           Authorization: `Bearer ${userToken}`,\n//           'Content-Type': 'application/json',\n//         },\n//         body: JSON.stringify(staffDetailsForAssigningShop),\n//       }\n//     );\n\n//     if (assignStaffToShopData) {\n//       // console.log('Staff assigned to shop successfully:', assignStaffToShopData);\n//       showToast('success', `✅ ${assignStaffToShopData.message}`);\n//       checkAndPromptCreateStaff(); // Refresh list or update UI\n//     }\n\n//     return assignStaffToShopData;\n//   } catch (error) {\n//     console.error('Error Assigning Staff', error);\n//     showToast('error', '❌ Failed to Assign staff');\n//     throw error;\n//   }\n// }\n\nasync function updateUser(user_id, staffUpdatedDetails) {\n  try {\n    //  console.log('Sending POST request...');\n\n    const updateStaffData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_6__.safeFetch)(`${baseUrl}/api/users/${user_id}`, {\n      method: 'PUT',\n      headers: {\n        Authorization: `Bearer ${userToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(staffUpdatedDetails)\n    });\n    if (updateStaffData) {\n      // console.log('Staff info Updated successfully:', updateStaffData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.showToast)('success', `✅ ${updateStaffData.message}`);\n      checkAndPromptCreateStaff(); // Refresh list or update UI\n    }\n    return updateStaffData;\n  } catch (error) {\n    console.error('Error Updating Staff Info', error);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.showToast)('error', '❌ Failed to Update staff info');\n    throw error;\n  }\n}\nasync function removeStaffFromShop(user_id, shop_id) {\n  console.log(user_id, shop_id);\n  try {\n    console.log('Sending POST request...');\n    const fetchedData = await (0,_utility_safeFetch_js__WEBPACK_IMPORTED_MODULE_6__.safeFetch)(`${baseUrl}/api/users/${user_id}/shops/${shop_id}`, {\n      method: 'DELETE',\n      headers: {\n        Authorization: `Bearer ${userToken}`\n      }\n    });\n    if (fetchedData) {\n      console.log('Staff removed from shop successfully:', fetchedData);\n      (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.showToast)('success', `✅ ${fetchedData.message}`);\n      checkAndPromptCreateStaff(); // Refresh list or update UI\n    } else {\n      console.log('Failed to remove staff from shop:', fetchedData);\n    }\n    return fetchedData;\n  } catch (error) {\n    console.error('Error removing Staff from shop', error);\n    (0,_script_js__WEBPACK_IMPORTED_MODULE_2__.showToast)('error', '❌ Failed to remove Staff from shop');\n    throw error;\n  }\n}\n\n//# sourceURL=webpack://posbok/./JS/apiServices/user/userResource.js?");

/***/ }),

/***/ "./JS/apiServices/utility/safeFetch.js":
/*!*********************************************!*\
  !*** ./JS/apiServices/utility/safeFetch.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   safeFetch: () => (/* binding */ safeFetch)\n/* harmony export */ });\n/* harmony import */ var _helper_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../helper/helper */ \"./JS/helper/helper.js\");\n/* harmony import */ var _script__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../script */ \"./JS/script.js\");\n\n\nasync function safeFetch(url, options) {\n  try {\n    const response = await fetch(url, options);\n    if (!response.ok) {\n      const data = await response.json();\n      // hideGlobalLoader();\n      throw new Error(data.message || `HTTP error! status: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Error during fetch:', error);\n    //  hideGlobalLoader();\n\n    if (error.message.includes('You are not allowed to access the system at this time')) {\n      await (0,_script__WEBPACK_IMPORTED_MODULE_1__.handleLogout)(true); // auto-triggered logout\n    }\n\n    // Check for ECONNREFUSED specifically\n    if (error.message.includes('ECONNREFUSED')) {\n      (0,_script__WEBPACK_IMPORTED_MODULE_1__.showToast)('warning', 'Server is down or unreachable. Please try again later.');\n      // hideGlobalLoader();\n    } else {\n      // hideGlobalLoader();\n      (0,_script__WEBPACK_IMPORTED_MODULE_1__.showToast)('error', `❌ ${error.message}`);\n    }\n    throw error; // Return null in case of error\n  }\n}\n\n// export async function safeFetch(url, options) {\n//   try {\n//     const response = await fetch(url, options);\n\n//     if (!response.ok) {\n//       const data = await response.json();\n//       throw new Error(data.message || `HTTP error! status: ${response.status}`);\n//     }\n\n//     return await response.json();\n//   } catch (error) {\n//     console.error('Error during fetch:', error);\n//     showToast('error', `❌ ${error.message}`);\n//     throw error; // Return null in case of error\n//   }\n// }\n\n// import { showToast } from '../../script';\n\n// export async function safeFetch(url, options) {\n//   try {\n//     const response = await fetch(url, options);\n\n//     if (!response.ok) {\n//       let errorMessage = `HTTP error! status: ${response.status}`;\n//       try {\n//         const data = await response.json();\n//         errorMessage = data.message || errorMessage;\n//       } catch (_) {\n//         // Failed to parse JSON, leave the default message\n//       }\n//       throw new Error(errorMessage);\n//     }\n\n//     return await response.json();\n//   } catch (error) {\n//     console.error('Error during fetch:', error);\n\n//     // Show toast for both network and HTTP errors\n//     showToast('error', `❌ ${error.message || 'Something went wrong'}`);\n\n//     throw error;\n//   }\n// }\n\n//# sourceURL=webpack://posbok/./JS/apiServices/utility/safeFetch.js?");

/***/ }),

/***/ "./JS/business.js":
/*!************************!*\
  !*** ./JS/business.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bindUpdateBusinessFormListener: () => (/* binding */ bindUpdateBusinessFormListener),\n/* harmony export */   openUpdateBusinessModal: () => (/* binding */ openUpdateBusinessModal),\n/* harmony export */   renderBusinessDetails: () => (/* binding */ renderBusinessDetails),\n/* harmony export */   setupUpdateBusinessForm: () => (/* binding */ setupUpdateBusinessForm)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ \"./config.js\");\n/* harmony import */ var _apiServices_business_businessResource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./apiServices/business/businessResource */ \"./JS/apiServices/business/businessResource.js\");\n/* harmony import */ var _helper_helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helper/helper */ \"./JS/helper/helper.js\");\n/* harmony import */ var _script__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./script */ \"./JS/script.js\");\n\n\n\n\nconst userData = _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].userData;\nlet parsedUserData = null;\nparsedUserData = userData ? JSON.parse(userData) : null;\nconst isAdmin = parsedUserData?.accountType === 'ADMIN';\ndocument.addEventListener('DOMContentLoaded', async function () {\n  if (isAdmin) {\n    await renderBusinessDetails();\n  }\n});\nasync function renderBusinessDetails() {\n  (0,_helper_helper__WEBPACK_IMPORTED_MODULE_2__.showGlobalLoader)();\n  const businessData = await (0,_apiServices_business_businessResource__WEBPACK_IMPORTED_MODULE_1__.fetchBusinessDetails)();\n  if (!businessData) {\n    //  showToast('error', ' ⛔ Failed to fetch business details');\n    console.error('Failed to fetch business details');\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n    return;\n  }\n  const businessName = businessData?.data.business_name || 'Business Name Not Available';\n  const businessAddress = businessData?.data.address || 'Business Address Not Available';\n  const businessPhoneNumber = businessData?.data.phone_number || 'Business Phone Number Not Available';\n  const stateofOperation = businessData?.data.state_of_operation || 'Business State Of Operation Not Available';\n  const cacRegNo = businessData?.data.cac_reg_no || 'Business CAC Reg No. Not Available';\n  const taxId = businessData?.data.tax_id || 'Business Tax ID Not Available';\n  const nin = businessData?.data.nin || 'Business NIN Not Available';\n  const businessType = businessData?.data.business_type || 'Business Type Not Available';\n  const staffSize = businessData?.data.staff_size || 'Business Staff Size Not Available';\n  const versionPreference = businessData?.data.version_preference || 'Business Version Not Available';\n  //   const isActive = businessData?.data.is_active || 'Business SUbscription Not Available';\n\n  //   DOM Elements Input\n  const businessNameInput = document.getElementById('businessName');\n  const businessAddressInput = document.getElementById('businessAddress');\n  const businessPhoneNumberInput = document.getElementById('businessPhoneNumber');\n  const businessStateInput = document.getElementById('businessState');\n  const businessCacRegNoInput = document.getElementById('businessCacRegNo');\n  const businessTaxIdInput = document.getElementById('businessTaxId');\n  const businessNinInput = document.getElementById('businessNin');\n  const businessTypeInput = document.getElementById('businessType');\n  const businessStaffSizeInput = document.getElementById('businessStaffSize');\n  const businessVersionPreferenceInput = document.getElementById('businessVersionPreference');\n\n  //   const BusinessIsActiveInput = document.getElementById('isActive');\n\n  //   Set the values of the input fields\n  if (businessNameInput) businessNameInput.value = businessName;\n  if (businessAddressInput) businessAddressInput.value = businessAddress;\n  if (businessPhoneNumberInput) businessPhoneNumberInput.value = businessPhoneNumber;\n  if (businessStateInput) businessStateInput.value = stateofOperation;\n  if (businessCacRegNoInput) businessCacRegNoInput.value = cacRegNo;\n  if (businessTaxIdInput) businessTaxIdInput.value = taxId;\n  if (businessNinInput) businessNinInput.value = nin;\n  if (businessTypeInput) businessTypeInput.value = businessType === 'BOTH' ? 'POS & SALES' : businessType;\n  if (businessStaffSizeInput) businessStaffSizeInput.value = staffSize;\n  if (businessVersionPreferenceInput) businessVersionPreferenceInput.value = versionPreference;\n\n  // Update Business Details\n\n  document.querySelector('#openUpdateBusinessModalBtn')?.addEventListener('click', async () => {\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_2__.showGlobalLoader)();\n    const adminUpdateBusinessDataContainer = document.querySelector('.adminUpdateBusinessData');\n    if (adminUpdateBusinessDataContainer) {\n      if (businessData?.data) {\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n        openUpdateBusinessModal();\n        setupUpdateBusinessForm(businessData.data);\n      }\n    } else {\n      (0,_helper_helper__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n      (0,_script__WEBPACK_IMPORTED_MODULE_3__.showToast)('fail', '❌ Failed to fetch Business details.');\n    }\n\n    // openUpdateBusinessModal\n  });\n  //   console.log(businessData);\n}\nfunction openUpdateBusinessModal() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const adminUpdateBusinessDataContainer = document.querySelector('.adminUpdateBusinessData');\n  if (adminUpdateBusinessDataContainer) adminUpdateBusinessDataContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n}\nfunction setupUpdateBusinessForm(businessData) {\n  const form = document.querySelector('.adminUpdateBusinessDataModal');\n  if (!form) return;\n\n  // Save businessData.id in the form for later use\n  form.dataset.businessid = businessData.id;\n\n  // Fill form inputs\n  document.getElementById('updateBusinessName').value = businessData.business_name || '';\n  document.getElementById('updateBusinessAddress').value = businessData.address || '';\n  document.getElementById('updateBusinessPhoneNumber').value = businessData.phone_number || '';\n  document.getElementById('updateBusinessStateOfOperation').value = businessData.state_of_operation || '';\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n  bindUpdateBusinessFormListener(); // Only once\n});\nfunction bindUpdateBusinessFormListener() {\n  const form = document.querySelector('.adminUpdateBusinessDataModal');\n  if (!form) return;\n  form.addEventListener('submit', async function (e) {\n    e.preventDefault();\n    const businessid = form.dataset.businessid; // ✅ Get user ID\n    if (!businessid) {\n      (0,_script__WEBPACK_IMPORTED_MODULE_3__.showToast)('fail', '❎ No Business selected for update.');\n      return;\n    }\n    const updateBusinessName = document.getElementById('updateBusinessName').value;\n    const updateBusinessAddress = document.getElementById('updateBusinessAddress').value;\n    const updateBusinessPhoneNumber = document.getElementById('updateBusinessPhoneNumber').value;\n    const updateBusinessStateOfOperation = document.getElementById('updateBusinessStateOfOperation').value;\n    const businessUpdatedDetails = {\n      businessName: updateBusinessName,\n      address: updateBusinessAddress,\n      phoneNumber: updateBusinessPhoneNumber,\n      stateOfOperation: updateBusinessStateOfOperation\n    };\n\n    //  console.log('📦 Business Update:', {\n    //    businessid,\n    //    ...businessUpdatedDetails,\n    //  });\n\n    const updateBusinessBtn = document.querySelector('.updateBusinessBtn');\n    try {\n      (0,_helper_helper__WEBPACK_IMPORTED_MODULE_2__.showBtnLoader)(updateBusinessBtn);\n      const data = await (0,_apiServices_business_businessResource__WEBPACK_IMPORTED_MODULE_1__.updateBusiness)(businessid, businessUpdatedDetails);\n      if (data) {\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_2__.hideBtnLoader)(updateBusinessBtn);\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n        (0,_script__WEBPACK_IMPORTED_MODULE_3__.closeModal)();\n      }\n    } catch (err) {\n      (0,_helper_helper__WEBPACK_IMPORTED_MODULE_2__.hideBtnLoader)(updateBusinessBtn);\n      (0,_helper_helper__WEBPACK_IMPORTED_MODULE_2__.hideGlobalLoader)();\n      (0,_script__WEBPACK_IMPORTED_MODULE_3__.showToast)('fail', `❎ ${err.message}`);\n    }\n  });\n}\n\n//# sourceURL=webpack://posbok/./JS/business.js?");

/***/ }),

/***/ "./JS/goods.js":
/*!*********************!*\
  !*** ./JS/goods.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addProductCategoryForm: () => (/* binding */ addProductCategoryForm),\n/* harmony export */   bindUpdateCategoryFormListener: () => (/* binding */ bindUpdateCategoryFormListener),\n/* harmony export */   bindUpdateProductFormListener: () => (/* binding */ bindUpdateProductFormListener),\n/* harmony export */   createProductForm: () => (/* binding */ createProductForm),\n/* harmony export */   openAddCategoryModalBtn: () => (/* binding */ openAddCategoryModalBtn),\n/* harmony export */   openAddProductModalBtn: () => (/* binding */ openAddProductModalBtn),\n/* harmony export */   openUpdateCategoryButton: () => (/* binding */ openUpdateCategoryButton),\n/* harmony export */   openUpdateProductButton: () => (/* binding */ openUpdateProductButton),\n/* harmony export */   populateCategoriesDropdown: () => (/* binding */ populateCategoriesDropdown),\n/* harmony export */   populateCategoryTable: () => (/* binding */ populateCategoryTable),\n/* harmony export */   populateGoodsShopDropdown: () => (/* binding */ populateGoodsShopDropdown),\n/* harmony export */   renderProductInventoryTable: () => (/* binding */ renderProductInventoryTable),\n/* harmony export */   updateCategoryForm: () => (/* binding */ updateCategoryForm),\n/* harmony export */   updateProductForm: () => (/* binding */ updateProductForm)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ \"./config.js\");\n/* harmony import */ var _apiServices_inventory_inventoryResources__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./apiServices/inventory/inventoryResources */ \"./JS/apiServices/inventory/inventoryResources.js\");\n/* harmony import */ var _apiServices_shop_shopResource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./apiServices/shop/shopResource */ \"./JS/apiServices/shop/shopResource.js\");\n/* harmony import */ var _helper_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helper/helper */ \"./JS/helper/helper.js\");\n/* harmony import */ var _pos__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pos */ \"./JS/pos.js\");\n/* harmony import */ var _script__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./script */ \"./JS/script.js\");\n/* harmony import */ var _staff__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./staff */ \"./JS/staff.js\");\n\n\n\n\n\n\n\nlet isSubmitting = false;\nconst deleteProductButton = document.querySelector('.deleteProductButton');\n\n// JS for Adding Products\nconst addProductName = document.getElementById('addProductName');\nconst addProductBoughtPrice = document.getElementById('addProductBoughtPrice');\nconst addProductSellingPrice = document.getElementById('addProductSellingPrice');\nconst addProductQuantity = document.getElementById('addProductQuantity');\nconst userData = _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].userData;\nconst dummyShopId = _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dummyShopId; // Dummy user data for testing\n\nconst parsedUserData = userData ? JSON.parse(userData) : null;\n\n// const shopId = parsedUserData?.shopId || dummyShopId;\n\nconst isAdmin = parsedUserData?.accountType === 'ADMIN';\nconst isStaff = parsedUserData?.accountType === 'STAFF';\nif (isAdmin) {\n  document.addEventListener('DOMContentLoaded', () => {\n    (0,_apiServices_inventory_inventoryResources__WEBPACK_IMPORTED_MODULE_1__.getProductCategories)();\n  });\n}\nfunction openAddCategoryModalBtn() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const addProductCategoryContainer = document.querySelector('.addCategory');\n  if (addProductCategoryContainer) addProductCategoryContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n  addProductCategoryForm();\n}\nfunction openAddProductModalBtn() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const addProductContainer = document.querySelector('.addProduct');\n  if (addProductContainer) addProductContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n  createProductForm();\n}\nfunction openUpdateProductButton() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const updateProductContainer = document.querySelector('.updateProduct');\n  if (updateProductContainer) updateProductContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n\n  //   updateProductForm();\n}\nfunction openUpdateCategoryButton() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const updateCategoryContainer = document.querySelector('.updateCategory');\n  if (updateCategoryContainer) updateCategoryContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Setup for Opening Pos Charges Modal\n  (0,_script__WEBPACK_IMPORTED_MODULE_5__.setupModalCloseButtons)();\n  document.querySelector('#openAddCategoryModalBtn')?.addEventListener('click', openAddCategoryModalBtn);\n  document.querySelector('#openAddProductModalBtn')?.addEventListener('click', openAddProductModalBtn);\n  document.querySelector('#openUpdateProductBtn')?.addEventListener('click', openUpdateProductButton);\n  document.querySelector('.openUpdateCategoryButton')?.addEventListener('click', openUpdateCategoryButton);\n});\nfunction addProductCategoryForm() {\n  const form = document.querySelector('.addCategoryModal');\n  if (!form || form.dataset.bound === 'true') return;\n  form.dataset.bound = 'true';\n  if (form) {\n    form.addEventListener('submit', async function (e) {\n      e.preventDefault();\n      const addCategoryName = document.querySelector('#addCategoryName').value;\n      const addCategoryDescription = document.querySelector('#addCategoryDescription').value;\n      const addProductCategoryDetails = {\n        name: addCategoryName,\n        description: addCategoryDescription\n      };\n\n      // console.log('Add Category Details:', addProductCategoryDetails);\n\n      const addCategorySubmitBtn = document.querySelector('.addCategorySubmitBtn');\n      try {\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.showBtnLoader)(addCategorySubmitBtn);\n        const data = await (0,_apiServices_inventory_inventoryResources__WEBPACK_IMPORTED_MODULE_1__.createProductCategory)(addProductCategoryDetails);\n        if (data) {\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(addCategorySubmitBtn);\n          (0,_script__WEBPACK_IMPORTED_MODULE_5__.closeModal)();\n        }\n        (0,_script__WEBPACK_IMPORTED_MODULE_5__.closeModal)(); // close modal after success\n      } catch (err) {\n        console.error('Error Adding Product Category:', err.message);\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(addCategorySubmitBtn);\n        (0,_script__WEBPACK_IMPORTED_MODULE_5__.showToast)('fail', `❎ ${err.message}`);\n      }\n    });\n  }\n}\nfunction populateCategoryTable(productCategoriesData) {\n  const tbody = document.querySelector('.category-table tbody');\n  const loadingRow = document.querySelector('.loading-row');\n\n  // Remove static rows and loading\n\n  const categories = productCategoriesData.data;\n  if (tbody) tbody.innerHTML = '';\n  if (!categories.length) {\n    const emptyRow = document.createElement('tr');\n    emptyRow.innerHTML = `\n        <td colspan=\"6\" class=\"table-error-text\">No Categories found.</td>\n      `;\n    if (tbody) tbody.appendChild(emptyRow);\n    return;\n  }\n  categories.forEach((category, index) => {\n    const row = document.createElement('tr');\n    row.classList.add('table-body-row');\n    if (row) row.innerHTML = `\n        <td class=\"py-1 categorySerialNumber\">${index + 1}</td>\n        <td class=\"py-1 categoryName\">${category.name}</td>\n         <td class=\"py-1 categoryDescription\">${category.description}</td>\n\n        <td class=\"py-1 action-buttons\">\n          <button class=\"hero-btn-outline openUpdateCategoryButton\" data-category-id=\"${category.id}\">\n            <i class=\"fa-solid fa-pen-to-square\"></i>\n          </button>\n\n          <button class=\"hero-btn-outline deleteCategoryButton\" data-category-id=\"${category.id}\">\n            <i class=\"fa-solid fa-trash-can\"></i>\n          </button>\n        </td>\n      `;\n    if (tbody) tbody.appendChild(row);\n    const deleteCategoryButton = row.querySelector(`.deleteCategoryButton`);\n    deleteCategoryButton.addEventListener('click', async () => {\n      const categoryId = deleteCategoryButton.dataset.categoryId;\n      // console.log('deleteCategoryButton clicked', categoryId);\n      await (0,_apiServices_inventory_inventoryResources__WEBPACK_IMPORTED_MODULE_1__.deleteCategory)(categoryId);\n    });\n\n    // Update Product Logic\n\n    const updateCategoryBtn = row.querySelector('.openUpdateCategoryButton');\n    updateCategoryBtn?.addEventListener('click', async () => {\n      (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.showGlobalLoader)();\n      const categoryId = updateCategoryBtn.dataset.categoryId;\n      const updateCategoryModalContainer = document.querySelector('.updateCategoryModal');\n      if (updateCategoryModalContainer) {\n        // Store categoryId in modal container for reference\n        updateCategoryModalContainer.dataset.categoryId = categoryId;\n        console.log(updateCategoryModalContainer.dataset.categoryId);\n        // Fetch staff detail\n        const CategoryDetail = await (0,_apiServices_inventory_inventoryResources__WEBPACK_IMPORTED_MODULE_1__.getProductCategories)(categoryId);\n\n        //  console.log('Category detail received successfully:', CategoryDetail);\n\n        // Call function to prefill modal inputs\n        if (CategoryDetail?.success === true) {\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.hideGlobalLoader)();\n          openUpdateCategoryButton(); // Show modal after data is ready\n\n          updateCategoryForm(CategoryDetail);\n        } else {\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.hideGlobalLoader)();\n          (0,_script__WEBPACK_IMPORTED_MODULE_5__.showToast)('fail', '❌ Failed to fetch Category details.');\n        }\n      }\n    });\n\n    //  const deleteBtn = row.querySelector('.deleteShopButton');\n    //  deleteBtn.addEventListener('click', async () => {\n    //    const shopId = deleteBtn.dataset.shopId;\n    //    await deleteShop(shopId);\n    //  });\n\n    //  const updateShopBtn = row.querySelector('.editShopButton');\n    //  updateShopBtn?.addEventListener('click', async () => {\n    //    showGlobalLoader();\n    //    const shopId = updateShopBtn.dataset.shopId;\n\n    //    const adminUpdateShopDataContainer = document.querySelector(\n    //      '.adminUpdateShopData'\n    //    );\n\n    //    if (adminUpdateShopDataContainer) {\n    //      // Store shopId in modal container for reference\n    //      adminUpdateShopDataContainer.dataset.shopId = shopId;\n\n    //      // Fetch Shop detail\n    //      const shopDetail = await fetchShopDetail(shopId);\n\n    //      //   console.log(shopDetail);\n\n    //      // Call function to prefill modal inputs\n    //      if (shopDetail?.data) {\n    //        hideGlobalLoader();\n    //        openUpdateShopModal(); // Show modal after data is ready\n    //        setupUpdateShopForm(shopDetail.data);\n    //      } else {\n    //        hideGlobalLoader();\n    //        showToast('fail', '❌ Failed to fetch shop details.');\n    //      }\n    //    }\n    //  });\n  });\n}\nfunction populateGoodsShopDropdown(shopList = []) {\n  const inventoryShopDropdown = document.getElementById('inventoryShopDropdown');\n  if (!inventoryShopDropdown) return;\n  inventoryShopDropdown.innerHTML = `<option value=\"\">Select a shop</option>`;\n  shopList.forEach(shop => {\n    const option = document.createElement('option');\n    option.value = shop.id;\n    option.textContent = `${shop.shop_name} - ${shop.location}`;\n    inventoryShopDropdown.appendChild(option);\n  });\n}\nfunction populateCategoriesDropdown(categoriesData = []) {\n  const categoryList = categoriesData.data;\n  const addProductCategoryDropdown = document.getElementById('addProductCategory');\n  const updateProductCategoryDropdown = document.getElementById('updateProductCategory');\n  if (!addProductCategoryDropdown || !updateProductCategoryDropdown) return;\n\n  // Clear existing options except the default\n  addProductCategoryDropdown.innerHTML = `<option value=\"\">Select a Category</option>`;\n  updateProductCategoryDropdown.innerHTML = `<option value=\"\">Select a Category</option>`;\n  categoryList.forEach(category => {\n    const option1 = document.createElement('option');\n    option1.value = category.id;\n    option1.textContent = `${category.name}`;\n    if (addProductCategoryDropdown) addProductCategoryDropdown.appendChild(option1);\n    const option2 = document.createElement('option');\n    option2.value = category.id;\n    option2.textContent = `${category.name}`;\n    if (updateProductCategoryDropdown) updateProductCategoryDropdown.appendChild(option2);\n  });\n}\nfunction createProductForm() {\n  const form = document.querySelector('.addProductModal');\n  if (!form || form.dataset.bound === 'true') return;\n  form.dataset.bound = 'true';\n  if (form) {\n    form.addEventListener('submit', async function (e) {\n      e.preventDefault();\n      const inventoryShopDropdown = document.querySelector('#inventoryShopDropdown').value;\n      const addProductCategory = document.querySelector('#addProductCategory').value;\n      const addProductName = document.querySelector('#addProductName').value;\n      const addProductDescription = document.querySelector('#addProductDescription').value;\n      const addProductBoughtPrice = document.querySelector('#addProductBoughtPrice').value;\n      const addProductSellingPrice = document.querySelector('#addProductSellingPrice').value;\n      const addProductQuantity = document.querySelector('#addProductQuantity').value;\n      const addProductDetails = {\n        categoryId: addProductCategory,\n        name: addProductName,\n        description: addProductDescription,\n        purchasePrice: Number((0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.getAmountForSubmission)(addProductBoughtPrice)),\n        sellingPrice: Number((0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.getAmountForSubmission)(addProductSellingPrice)),\n        barcode: (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.generateBarcode)()\n      };\n      const addInventoryDetails = {\n        quantity: Number(addProductQuantity),\n        productId: Number(addProductQuantity)\n      };\n      const shopId = Number(inventoryShopDropdown);\n      // console.log('Adding Products with:', addProductDetails);\n\n      const addProductModalBtn = document.querySelector('.addProductModalBtn');\n      try {\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.showBtnLoader)(addProductModalBtn);\n        const productData = await (0,_apiServices_inventory_inventoryResources__WEBPACK_IMPORTED_MODULE_1__.createProduct)(shopId, addProductDetails);\n\n        //   if (!productData) {\n        //     showToast('fail', productData.message);\n        //     return;\n        //   }\n\n        console.log(productData);\n        const productId = productData?.data.id;\n        if (!productId) {\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(addProductModalBtn);\n          return;\n        }\n        const addInventoryDetails = {\n          quantity: Number(addProductQuantity),\n          productId: Number(productId)\n        };\n\n        //   console.log('Adding Products with:', addProductDetails);\n\n        try {\n          const inventoryData = await (0,_apiServices_inventory_inventoryResources__WEBPACK_IMPORTED_MODULE_1__.addInventory)(addInventoryDetails, shopId);\n          if (inventoryData) {\n            (0,_script__WEBPACK_IMPORTED_MODULE_5__.showToast)('success', `✅ ${inventoryData.message}`);\n            (0,_script__WEBPACK_IMPORTED_MODULE_5__.closeModal)();\n            (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.clearFormInputs)();\n            await renderProductInventoryTable(shopId);\n          }\n        } catch (inventoryDataErr) {\n          (0,_script__WEBPACK_IMPORTED_MODULE_5__.showToast)('fail', `❎ ${inventoryDataErr.message || 'Failed to Add inventory'}`);\n          console.error('Error During Inventory Adding:', inventoryDataErr.message);\n        }\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(addProductModalBtn);\n        //   hideGlobalLoader();\n      } catch (err) {\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(addProductModalBtn);\n        console.error('Error Creating product:', err);\n        (0,_script__WEBPACK_IMPORTED_MODULE_5__.showToast)('fail', `❎ ${err.message}`);\n      }\n    });\n  }\n}\n\n//  Update Product\nfunction bindUpdateProductFormListener() {\n  const form = document.querySelector('.updateProductModal');\n  if (!form) return;\n  if (form) {\n    form.addEventListener('submit', async function (e) {\n      e.preventDefault();\n      const productId = form.dataset.productId;\n      const shopId = form.dataset.shopId;\n      if (!productId) {\n        (0,_script__WEBPACK_IMPORTED_MODULE_5__.showToast)('fail', '❎ No Product selected for update.');\n        return;\n      }\n      if (!shopId) {\n        (0,_script__WEBPACK_IMPORTED_MODULE_5__.showToast)('fail', '❎ No shop selected for update.');\n        return;\n      }\n      const updateProductCategory = document.querySelector('#updateProductCategory').value;\n      const updateProductName = document.querySelector('#updateProductName').value;\n      const updateProductDescription = document.querySelector('#updateProductDescription').value;\n      const updateProductBoughtPrice = document.querySelector('#updateProductBoughtPrice').value;\n      const updateProductSellingPrice = document.querySelector('#updateProductSellingPrice').value;\n      const updateProductQuantity = document.querySelector('#updateProductQuantity').value;\n      const updateProductDetails = {\n        categoryId: updateProductCategory,\n        name: updateProductName,\n        description: updateProductDescription,\n        purchasePrice: Number((0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.getAmountForSubmission)(updateProductBoughtPrice)),\n        sellingPrice: Number((0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.getAmountForSubmission)(updateProductSellingPrice))\n      };\n      const updateInventoryDetails = {\n        quantity: Number(updateProductQuantity)\n      };\n\n      // console.log(\n      //   'Updating Product Detail with:',\n      //   updateProductDetails,\n      //   productId\n      // );\n\n      const updateProductModalBtn = document.querySelector('.updateProductModalBtn');\n      try {\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.showBtnLoader)(updateProductModalBtn);\n        const updatedProductData = await (0,_apiServices_inventory_inventoryResources__WEBPACK_IMPORTED_MODULE_1__.updateProduct)(productId, updateProductDetails, shopId);\n        if (!updatedProductData) {\n          console.error('fail', updatedProductData.message);\n          return;\n        }\n\n        //   console.log('Adding Products with:', addProductDetails);\n\n        try {\n          const inventoryData = await (0,_apiServices_inventory_inventoryResources__WEBPACK_IMPORTED_MODULE_1__.updateProductInventory)(updateInventoryDetails, shopId, productId);\n          if (inventoryData) {\n            (0,_script__WEBPACK_IMPORTED_MODULE_5__.showToast)('success', `✅ ${inventoryData.message}`);\n            (0,_script__WEBPACK_IMPORTED_MODULE_5__.closeModal)();\n            (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.clearFormInputs)();\n            await renderProductInventoryTable(shopId);\n          }\n        } catch (inventoryDataErr) {\n          (0,_script__WEBPACK_IMPORTED_MODULE_5__.showToast)('fail', `❎ ${inventoryDataErr.message || 'Failed to Update inventory'}`);\n          console.error('Error During Inventory Updating:', inventoryDataErr.message);\n        }\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(updateProductModalBtn);\n        //   hideGlobalLoader();\n      } catch (err) {\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(updateProductModalBtn);\n        console.error('Error Updating product:', err);\n        (0,_script__WEBPACK_IMPORTED_MODULE_5__.showToast)('fail', `❎ ${err.message}`);\n        return;\n      }\n    });\n  }\n}\nfunction updateProductForm(productDetail) {\n  //   console.log('Product Detail:', productDetail);\n\n  const form = document.querySelector('.updateProductModal');\n  if (!form) return;\n\n  //   if (!form || form.dataset.bound === 'true') return;\n  //   form.dataset.bound = 'true';\n\n  const product = productDetail.data;\n  const productCategory = product.ProductCategory;\n  const productInventory = product.inventory[0];\n  const shopId = productInventory?.Shop.id;\n  const productId = product.id;\n  form.dataset.productId = productId;\n  form.dataset.shopId = shopId;\n\n  // Save user.id in the form for later use\n\n  const {\n    id: inventoryId,\n    product_id,\n    quantity\n  } = productInventory;\n  const {\n    name: productName,\n    description: productDescription,\n    purchase_price,\n    selling_price\n  } = product;\n  const {\n    name: categoryName,\n    id: categoryId\n  } = productCategory;\n\n  //   console.log(\n  //     inventoryId,\n  //     product_id,\n  //     quantity,\n  //     productName,\n  //     productDescription,\n  //     purchase_price,\n  //     selling_price,\n  //     categoryName,\n  //     categoryId,\n  //     shopId\n  //   );\n\n  document.querySelector('#updateProductCategory').value = categoryId || '';\n  document.querySelector('#updateProductName').value = productName;\n  document.querySelector('#updateProductDescription').value = productDescription;\n  document.querySelector('#updateProductBoughtPrice').value = (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.formatAmountWithCommas)(purchase_price) || '';\n  document.querySelector('#updateProductSellingPrice').value = (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.formatAmountWithCommas)(selling_price) || '';\n  document.querySelector('#updateProductQuantity').value = quantity || '';\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n  bindUpdateProductFormListener(); // Only once\n});\n\n//  Update Category\nfunction bindUpdateCategoryFormListener() {\n  const form = document.querySelector('.updateCategoryModal');\n  if (!form) return;\n  if (form) {\n    form.addEventListener('submit', async function (e) {\n      e.preventDefault();\n      const categoryId = form.dataset.categoryId;\n      if (!categoryId) {\n        (0,_script__WEBPACK_IMPORTED_MODULE_5__.showToast)('fail', '❎ No Category selected for update.');\n        return;\n      }\n      const updateCategoryName = document.querySelector('#updateCategoryName').value;\n      const updateCategoryDescription = document.querySelector('#updateCategoryDescription').value;\n      const updateCategoryDetails = {\n        name: updateCategoryName,\n        description: updateCategoryDescription\n      };\n\n      // console.log(\n      //   'Updating Category Detail with:',\n      //   updateCategoryDetails,\n      //   categoryId\n      // );\n\n      const updateCategoryModalBtn = document.querySelector('.updateCategoryModalBtn');\n      try {\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.showBtnLoader)(updateCategoryModalBtn);\n        const updatedCategoryData = await (0,_apiServices_inventory_inventoryResources__WEBPACK_IMPORTED_MODULE_1__.updateCategory)(categoryId, updateCategoryDetails);\n        if (!updatedCategoryData) {\n          console.error('fail', updatedCategoryData.message);\n          return;\n        }\n        (0,_script__WEBPACK_IMPORTED_MODULE_5__.closeModal)();\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(updateCategoryModalBtn);\n        //   hideGlobalLoader();\n      } catch (err) {\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(updateCategoryModalBtn);\n        console.error('Error Updating Category:', err);\n        (0,_script__WEBPACK_IMPORTED_MODULE_5__.showToast)('fail', `❎ ${err.message}`);\n        return;\n      }\n    });\n  }\n}\nfunction updateCategoryForm(categoryDetail) {\n  //   console.log('Category Detail:', CategoryDetail);\n\n  const form = document.querySelector('.updateCategoryModal');\n  if (!form) return;\n\n  //   form.dataset.categoryId = categoryId;\n\n  //   if (!form || form.dataset.bound === 'true') return;\n  //   form.dataset.bound = 'true';\n\n  //   console.log(categoryDetail.data);\n\n  const categories = categoryDetail.data;\n  categories.forEach(category => {\n    console.log('category', category.id);\n    console.log('dataset', form.dataset.categoryId);\n    if (category.id === Number(form.dataset.categoryId)) {\n      const categoryName = category.name;\n      const categoryDescription = category.description;\n      const categoryId = category.id;\n      document.querySelector('#updateCategoryName').value = categoryName;\n      document.querySelector('#updateCategoryDescription').value = categoryDescription;\n    }\n  });\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n  bindUpdateCategoryFormListener(); // Only once\n});\n\n// function getFilters(role, shopId) {\n//   const suffix = role === 'admin' ? `${role}_${shopId}` : role;\n\n//   return {\n//     startDate:\n//       document.getElementById(`startDateFilter_${suffix}`)?.value || '',\n//     endDate: document.getElementById(`endDateFilter_${suffix}`)?.value || '',\n//     type: document.getElementById(`typeFilter_${suffix}`)?.value || '',\n//     status: document.getElementById(`statusFilter_${suffix}`)?.value || '',\n//   };\n// }\n\n// function resetFilters(role, shopId) {\n//   const suffix = role === 'admin' ? `${role}_${shopId}` : role;\n\n//   document.getElementById(`startDateFilter_${suffix}`).value = '';\n//   document.getElementById(`endDateFilter_${suffix}`).value = '';\n//   document.getElementById(`typeFilter_${suffix}`).value = '';\n//   document.getElementById(`statusFilter_${suffix}`).value = '';\n// }\n\nconst adminAccordionContainer = document.querySelector('.adminAccordionContainer');\nconst container = document.getElementById('accordionProductInventory');\n\n// export async function populateProductInventoryTable(productInventoryData) {\n// if (userData && isAdmin) {\n\nconst shopProductMap = {};\nif (isAdmin && adminAccordionContainer && container) {\n  adminAccordionContainer.style.display = 'block';\n  (async () => {\n    if (container.dataset.accordionRendered === 'true') {\n      // console.warn('Accordion already rendered. Skipping...');\n      return;\n    }\n    container.dataset.accordionRendered = 'true';\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.showGlobalLoader)();\n    let enrichedShopData = [];\n    const currentFiltersByShop = {};\n    const {\n      enrichedShopData: loadedShops\n    } = await (0,_apiServices_shop_shopResource__WEBPACK_IMPORTED_MODULE_2__.checkAndPromptCreateShop)();\n    enrichedShopData = loadedShops;\n    if (enrichedShopData.length === 0) {\n      container.innerHTML = `<h1 class=\"heading-text\">No shop Available for Product Inventory Display</h1>`;\n    }\n    container.innerHTML = '';\n    enrichedShopData.forEach((shop, index) => {\n      const accordion = document.createElement('section');\n      //  shopPageTracker[shop.id] = 1;\n      const shopId = shop.id;\n\n      // console.log(shop);\n\n      accordion.className = 'accordion-section';\n      accordion.innerHTML = `        <button class=\"accordion-toggle card heading-text\" data-shop-id=\"${shopId}\">\n                       <h2 class=\"heading-subtext\">\n                          ${shop.shop_name}\n                       </h2>\n                       <i class=\"fa-solid icon fa-chevron-down\"></i>\n                    </button>\n                        <div class=\"accordion-content\">\n           <div id=\"shop-report-${shop.id}\" class=\"reports card\" data-loaded=\"false\">\n                      <div class=\"reports \">\n                          <div class=\"reports-method\">\n                             <h2 class=\"heading-text mb-2\">\n                               Shop inventory\n                             </h2>\n\n                              <div class=\"search-section_${shop.id} mb-2\">\n\n                                 <div class=\"inventory-method-form_input ml-1 mr-1\">\n                                 <label for=\"searchProdutInventory_${shop.id}\">Search Products:</label>\n                                 <input type=\"search\" id=\"searchProdutInventory_${shop.id}\" class=\"searchProductInput\"\n                                    placeholder=\"Search Product Name or Description \">\n                                </div>\n                              </div>\n\n                             <div class=\"table-header\">\n                                <!-- <h2 class=\"heading-subtext\"> inventory </h2> -->\n                             </div>\n                             <div class=\"reports-table-container\">\n                                <table class=\"reports-table inventoryTableDisplay_admin_${shop.id}\">\n                                          <thead>\n                                      <tr class=\"table-header-row\">\n                                          <th class=\"py-1\">S/N</th>\n                          <th class=\"py-1\">Product Name</th>\n                          <th class=\"py-1\">Product Description</th>\n                          <th class=\"py-1\">Product Category</th>\n                          <th class=\"py-1\">Buying Price</th>\n                          <th class=\"py-1\">Quantity</th>\n                          <th class=\"py-1\">Selling Price</th>\n                          <th class=\"py-1\">Action</th>\n                                      </tr>\n                                   </thead>\n                                     <tbody id=\"inventory-tbody-${shop.id}\">\n                                      </tbody>\n                                </table>\n                                      \n                             </div>\n           </div>\n        </div>`;\n      if (container) container.appendChild(accordion);\n      if (container) container.dataset.shopId;\n\n      // console.log(accordion);\n\n      const searchProductInput = document.getElementById(`searchProdutInventory_${shopId}`);\n      searchProductInput.addEventListener('input', e => {\n        const query = e.target.value.toLowerCase();\n        const products = shopProductMap[shopId] || [];\n        const filteredProducts = products.filter(item => {\n          const product = item.Product;\n          return product.name.toLowerCase().includes(query) || product.description.toLowerCase().includes(query);\n        });\n        renderFilteredProducts(shopId, filteredProducts);\n      });\n\n      // const filters = getFilters('admin', shop.id);\n      // currentFiltersByShop[shop.id] = filters;\n    });\n    container.addEventListener('click', async function (e) {\n      const toggleBtn = e.target.closest('.accordion-toggle');\n      if (!toggleBtn) return;\n      const section = toggleBtn.closest('.accordion-section');\n      const content = section.querySelector('.accordion-content');\n      const shopId = toggleBtn.dataset.shopId;\n      const isActive = section.classList.contains('active');\n\n      // Close all accordion sections\n      document.querySelectorAll('.accordion-section').forEach(sec => {\n        sec.classList.remove('active');\n      });\n      // Re-open only if it wasn't active before\n      if (!isActive) {\n        section.classList.add('active');\n      }\n      window.scrollTo({\n        top: 0,\n        left: 0,\n        behavior: 'smooth'\n      });\n      // const filters = getFilters('admin', shopId);\n      // currentFiltersByShop[shopId] = filters;\n      //  shopPageTracker[shopId] = 1;\n\n      // await renderProductInventoryTable(shopId);\n\n      const shopInventorySection = document.getElementById(`shop-report-${shopId}`);\n      if (shopInventorySection && shopInventorySection.dataset.loaded !== 'true') {\n        await renderProductInventoryTable(shopId);\n        shopInventorySection.dataset.loaded = 'true';\n      }\n\n      // Toggle accordion\n      //  section.classList.toggle('active');\n      //  if (section.classList.contains('active')) {\n      //    icon.style.transform = 'rotate(180deg)';\n      //  } else {\n      //    icon.style.transform = 'rotate(0deg)';\n      //  }\n    });\n    //   });\n  })();\n}\nfunction renderFilteredProducts(shopId, productList) {\n  const inventoryTableBody = document.querySelector(`#inventory-tbody-${shopId}`);\n  if (!inventoryTableBody) return;\n  if (productList.length === 0) {\n    inventoryTableBody.innerHTML = '<tr class=\"loading-row\"><td colspan=\"6\" class=\"table-error-text \">No Product matches search Query.</td></tr>';\n    return;\n  }\n  inventoryTableBody.innerHTML = ''; // Clear old\n\n  productList.forEach((productInventory, index) => {\n    const {\n      id,\n      product_id,\n      quantity,\n      Product: {\n        name: productName,\n        description,\n        purchase_price,\n        selling_price,\n        ProductCategory: {\n          name: categoryName\n        }\n      }\n    } = productInventory;\n    const row = document.createElement('tr');\n    row.classList.add('table-body-row');\n    row.innerHTML = `\n       \n                <td class=\"py-1 productSerialNumber\">${index + 1}</td>\n                <td class=\"py-1 productName\">${productName}</td>\n                <td class=\"py-1 productDescription\">${description}</td>\n                <td class=\"py-1 producCategory\">${categoryName}</td>\n                <td class=\"py-1 productAmountBought\">&#x20A6;${(0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.formatAmountWithCommas)(purchase_price)}</td>\n                <td class=\"py-1 productQuantity\">${quantity}</td>\n                <td class=\"py-1 productSellingPrice\">&#x20A6;${(0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.formatAmountWithCommas)(selling_price)}</td>\n                <td class=\"py-1 action-buttons\">\n                  <button\n                    class=\"hero-btn-outline openUpdateProductBtn\"\n                    id=\"openUpdateProductBtn\" data-product-id=\"${product_id}\"\n                  >\n                    <i class=\"fa-solid fa-pen-to-square\"></i>\n                  </button>\n                  <button\n                    class=\"hero-btn-outline deleteProductBtn\"\n                    id=\"deleteProductBtn\" data-product-id=\"${product_id}\"\n                  >\n                    <i class=\"fa-solid fa-trash-can\"></i>\n                  </button>\n                </td>\n    \n             `;\n    inventoryTableBody.appendChild(row);\n    const deleteProductBtn = row.querySelector(`.deleteProductBtn`);\n    deleteProductBtn.addEventListener('click', async () => {\n      const productId = deleteProductBtn.dataset.productId;\n      //   console.log('deleteProductBtn clicked', productId);\n      await (0,_apiServices_inventory_inventoryResources__WEBPACK_IMPORTED_MODULE_1__.deleteProduct)(productId, shopId);\n    });\n\n    // Update Product Logic\n\n    const updateProductBtn = row.querySelector('.openUpdateProductBtn');\n    updateProductBtn?.addEventListener('click', async () => {\n      (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.showGlobalLoader)();\n      const productId = updateProductBtn.dataset.productId;\n      const updateProductModalContainer = document.querySelector('.updateProductModal');\n      if (updateProductModalContainer) {\n        // Store productId in modal container for reference\n        updateProductModalContainer.dataset.productId = productId;\n\n        // Fetch staff detail\n        const ProductDetail = await (0,_apiServices_inventory_inventoryResources__WEBPACK_IMPORTED_MODULE_1__.getProductDetail)(productId);\n\n        //  console.log('Product detail received successfully:', ProductDetail);\n\n        // Call function to prefill modal inputs\n        if (ProductDetail?.success === true) {\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.hideGlobalLoader)();\n          openUpdateProductButton(); // Show modal after data is ready\n\n          updateProductForm(ProductDetail);\n        } else {\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.hideGlobalLoader)();\n          (0,_script__WEBPACK_IMPORTED_MODULE_5__.showToast)('fail', '❌ Failed to fetch Product details.');\n        }\n      }\n    });\n  });\n}\nasync function renderProductInventoryTable(shopId) {\n  const inventoryTableBody = document.querySelector(`#inventory-tbody-${shopId}`);\n  if (!inventoryTableBody) {\n    console.error('Error: Table body not found');\n    return;\n  }\n  try {\n    let loadingRow = document.querySelector('.loading-row');\n    if (!loadingRow) {\n      loadingRow = document.createElement('tr');\n      loadingRow.className = 'loading-row';\n      loadingRow.innerHTML = `<td colspan=\"11\" class=\"table-loading-text\">Loading Product Inventory...</td>`;\n      inventoryTableBody.appendChild(loadingRow);\n    }\n    const result = await (0,_apiServices_inventory_inventoryResources__WEBPACK_IMPORTED_MODULE_1__.getProductInventory)(shopId);\n    if (!result) throw new Error('Failed to fetch Product Inventory');\n    const productInventories = result.data;\n    shopProductMap[shopId] = productInventories;\n    if (productInventories.length === 0) {\n      const searchSection = document.querySelector(`.search-section_${shopId}`);\n      searchSection.style.display = 'none';\n      inventoryTableBody.innerHTML = '<tr class=\"loading-row\"><td colspan=\"11\" class=\"table-error-text \">No Product Inventory Available.</td></tr>';\n      return;\n    }\n    inventoryTableBody.innerHTML = '';\n    productInventories.map((productInventory, index) => {\n      const {\n        id,\n        product_id,\n        quantity\n      } = productInventory;\n      const {\n        name: productName,\n        description,\n        purchase_price,\n        selling_price\n      } = productInventory.Product;\n      const {\n        name: categoryName\n      } = productInventory.Product.ProductCategory;\n      const row = document.createElement('tr');\n      row.classList.add('table-body-row');\n      row.innerHTML = `\n       \n                <td class=\"py-1 productSerialNumber\">${index + 1}</td>\n                <td class=\"py-1 productName\">${productName}</td>\n                <td class=\"py-1 productDescription\">${description}</td>\n                <td class=\"py-1 producCategory\">${categoryName}</td>\n                <td class=\"py-1 productAmountBought\">&#x20A6;${(0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.formatAmountWithCommas)(purchase_price)}</td>\n                <td class=\"py-1 productQuantity\">${quantity}</td>\n                <td class=\"py-1 productSellingPrice\">&#x20A6;${(0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.formatAmountWithCommas)(selling_price)}</td>\n                <td class=\"py-1 action-buttons\">\n                  <button\n                    class=\"hero-btn-outline openUpdateProductBtn\"\n                    id=\"openUpdateProductBtn\" data-product-id=\"${product_id}\"\n                  >\n                    <i class=\"fa-solid fa-pen-to-square\"></i>\n                  </button>\n                  <button\n                    class=\"hero-btn-outline deleteProductBtn\"\n                    id=\"deleteProductBtn\" data-product-id=\"${product_id}\"\n                  >\n                    <i class=\"fa-solid fa-trash-can\"></i>\n                  </button>\n                </td>\n    \n             `;\n      inventoryTableBody.appendChild(row);\n      const deleteProductBtn = row.querySelector(`.deleteProductBtn`);\n      deleteProductBtn.addEventListener('click', async () => {\n        const productId = deleteProductBtn.dataset.productId;\n        //   console.log('deleteProductBtn clicked', productId);\n        await (0,_apiServices_inventory_inventoryResources__WEBPACK_IMPORTED_MODULE_1__.deleteProduct)(productId, shopId);\n      });\n\n      // Update Product Logic\n\n      const updateProductBtn = row.querySelector('.openUpdateProductBtn');\n      updateProductBtn?.addEventListener('click', async () => {\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.showGlobalLoader)();\n        const productId = updateProductBtn.dataset.productId;\n        const updateProductModalContainer = document.querySelector('.updateProductModal');\n        if (updateProductModalContainer) {\n          // Store productId in modal container for reference\n          updateProductModalContainer.dataset.productId = productId;\n\n          // Fetch staff detail\n          const ProductDetail = await (0,_apiServices_inventory_inventoryResources__WEBPACK_IMPORTED_MODULE_1__.getProductDetail)(productId);\n\n          //  console.log('Product detail received successfully:', ProductDetail);\n\n          // Call function to prefill modal inputs\n          if (ProductDetail?.success === true) {\n            (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.hideGlobalLoader)();\n            openUpdateProductButton(); // Show modal after data is ready\n\n            updateProductForm(ProductDetail);\n          } else {\n            (0,_helper_helper__WEBPACK_IMPORTED_MODULE_3__.hideGlobalLoader)();\n            (0,_script__WEBPACK_IMPORTED_MODULE_5__.showToast)('fail', '❌ Failed to fetch Product details.');\n          }\n        }\n      });\n      return {\n        productName,\n        description\n      };\n    });\n  } catch (error) {\n    console.error('Error rendering Product Inventory:', error);\n    inventoryTableBody.innerHTML = '<tr><td colspan=\"6\" class=\"table-error-text\">Error loading Product Inventory.</td></tr>';\n  }\n}\n\n// export function populateProductInventoryTable(productInventoryData) {\n//   const tbody = document.querySelector('.category-table tbody');\n//   const loadingRow = document.querySelector('.loading-row');\n\n//   // Remove static rows and loading\n\n//   const productInventory = productInventoryData.data;\n\n//   if (tbody) tbody.innerHTML = '';\n\n//   if (!productInventory.length) {\n//     const emptyRow = document.createElement('tr');\n//     emptyRow.innerHTML = `\n//         <td colspan=\"6\" class=\"table-error-text\">No Products found.</td>\n//       `;\n//     if (tbody) tbody.appendChild(emptyRow);\n//     return;\n//   }\n\n//   productInventory.forEach((product, index) => {\n//     const row = document.createElement('tr');\n//     row.classList.add('table-body-row');\n\n//     //  console.log('product', product);\n\n//     if (row)\n//       row.innerHTML = `\n//         <td class=\"py-1 productSerialNumber\">${index + 1}</td>\n//         <td class=\"py-1 productName\">${product.name}</td>\n//          <td class=\"py-1 productDescription\">${product.description}</td>\n\n//         <td class=\"py-1 action-buttons\">\n//           <button class=\"hero-btn-outline editproductButton\" data-product-id=\"${\n//             product.id\n//           }\">\n//             <i class=\"fa-solid fa-pen-to-square\"></i>\n//           </button>\n//           <button class=\"hero-btn-outline deleteproductButton\" data-product-id=\"${\n//             product.id\n//           }\">\n//             <i class=\"fa-solid fa-trash-can\"></i>\n//           </button>\n//         </td>\n//       `;\n\n//     if (tbody) tbody.appendChild(row);\n\n//     //  const deleteBtn = row.querySelector('.deleteShopButton');\n//     //  deleteBtn.addEventListener('click', async () => {\n//     //    const shopId = deleteBtn.dataset.shopId;\n//     //    await deleteShop(shopId);\n//     //  });\n\n//     //  const updateShopBtn = row.querySelector('.editShopButton');\n//     //  updateShopBtn?.addEventListener('click', async () => {\n//     //    showGlobalLoader();\n//     //    const shopId = updateShopBtn.dataset.shopId;\n\n//     //    const adminUpdateShopDataContainer = document.querySelector(\n//     //      '.adminUpdateShopData'\n//     //    );\n\n//     //    if (adminUpdateShopDataContainer) {\n//     //      // Store shopId in modal container for reference\n//     //      adminUpdateShopDataContainer.dataset.shopId = shopId;\n\n//     //      // Fetch Shop detail\n//     //      const shopDetail = await fetchShopDetail(shopId);\n\n//     //      //   console.log(shopDetail);\n\n//     //      // Call function to prefill modal inputs\n//     //      if (shopDetail?.data) {\n//     //        hideGlobalLoader();\n//     //        openUpdateShopModal(); // Show modal after data is ready\n//     //        setupUpdateShopForm(shopDetail.data);\n//     //      } else {\n//     //        hideGlobalLoader();\n//     //        showToast('fail', '❌ Failed to fetch shop details.');\n//     //      }\n//     //    }\n//     //  });\n//   });\n// }\n\n//# sourceURL=webpack://posbok/./JS/goods.js?");

/***/ }),

/***/ "./JS/helper/helper.js":
/*!*****************************!*\
  !*** ./JS/helper/helper.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearFormInputs: () => (/* binding */ clearFormInputs),\n/* harmony export */   ensureBusinessDayOpen: () => (/* binding */ ensureBusinessDayOpen),\n/* harmony export */   formatAmountWithCommas: () => (/* binding */ formatAmountWithCommas),\n/* harmony export */   formatAmountWithCommasOnInput: () => (/* binding */ formatAmountWithCommasOnInput),\n/* harmony export */   formatDateTimeReadable: () => (/* binding */ formatDateTimeReadable),\n/* harmony export */   formatSaleStatus: () => (/* binding */ formatSaleStatus),\n/* harmony export */   formatTransactionType: () => (/* binding */ formatTransactionType),\n/* harmony export */   generateBarcode: () => (/* binding */ generateBarcode),\n/* harmony export */   getAmountForSubmission: () => (/* binding */ getAmountForSubmission),\n/* harmony export */   hideBtnLoader: () => (/* binding */ hideBtnLoader),\n/* harmony export */   hideGlobalLoader: () => (/* binding */ hideGlobalLoader),\n/* harmony export */   isUserLoggedIn: () => (/* binding */ isUserLoggedIn),\n/* harmony export */   populateBusinessShopDropdown: () => (/* binding */ populateBusinessShopDropdown),\n/* harmony export */   populateBusinessStaffDropdown: () => (/* binding */ populateBusinessStaffDropdown),\n/* harmony export */   showBtnLoader: () => (/* binding */ showBtnLoader),\n/* harmony export */   showGlobalLoader: () => (/* binding */ showGlobalLoader)\n/* harmony export */ });\n/* harmony import */ var _apiServices_pos_posResources__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../apiServices/pos/posResources */ \"./JS/apiServices/pos/posResources.js\");\n/* harmony import */ var _script__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../script */ \"./JS/script.js\");\n// isUserLoggedIn() - Used to make sure that a user is loggedin before running functions that needs to run automatically so that they don rn on Authenyication pages\n\n\n\nfunction isUserLoggedIn() {\n  const token = localStorage.getItem('accessToken');\n  const user = localStorage.getItem('userData');\n  return Boolean(token && user);\n}\n\n// export function isUserLoggedIn() {\n//    return !!localStorage.getItem('accessToken') && !!localStorage.getItem('userData');\n//  }\n\nfunction clearFormInputs() {\n  // Select the form element and reset its inputs\n  const createShopForm = document.querySelector('.createShopModal');\n  const createStaffForm = document.querySelector('.createStaffModal');\n  const updateStaffForm = document.querySelector('.adminUpdateUserDataModal');\n  const updateShopForm = document.querySelector('.adminUpdateShopDataModal');\n  const staffManageForm = document.querySelector('.staffManageModal');\n  const depositPosCapitalForm = document.querySelector('.depositPosCapitalModal');\n  const createPosTransactionForm = document.querySelector('.pos-method-form');\n  const addPosChargeForm = document.querySelector('.addPosChargeModal');\n  const addMachineFeesForm = document.querySelector('.addMachineFeesModal');\n  const addProductForm = document.querySelector('.addProductModal');\n  const addCategoryForm = document.querySelector('.addCategoryModal');\n  const updateProductForm = document.querySelector('.updateProductModal');\n  const openBusinessDayForm = document.querySelector('.openBusinessDayModal');\n  const checkoutForm = document.querySelector('.checkout-form');\n\n  //   Clear Search Input\n  const searchProductInput = document.querySelector('.searchProductInput');\n  if (searchProductInput) searchProductInput.value = '';\n\n  //   if (createStaffForm || updateStaffForm) {\n  //     if (createStaffForm) createStaffForm.reset();\n  //     if (updateStaffForm) updateStaffForm.reset();\n  //   }\n\n  // Clear Create Staff Form Inputs\n  if (createStaffForm) {\n    createStaffForm.querySelectorAll('input, textarea, select').forEach(el => {\n      if (el.type === 'checkbox' || el.type === 'radio') {\n        el.checked = false;\n      } else {\n        el.value = '';\n      }\n    });\n  }\n\n  // Clear Create Shop Form Inputs\n  if (createShopForm) {\n    createShopForm.querySelectorAll('input, textarea, select').forEach(el => {\n      if (el.type === 'checkbox' || el.type === 'radio') {\n        el.checked = false;\n      } else {\n        el.value = '';\n      }\n    });\n    delete createShopForm.dataset.bound;\n  }\n\n  // Clear Update Staff Form Inputs\n  if (updateStaffForm) {\n    updateStaffForm.querySelectorAll('input, textarea, select').forEach(el => {\n      if (el.type === 'checkbox' || el.type === 'radio') {\n        el.checked = false;\n      } else {\n        el.value = '';\n      }\n    });\n    delete updateStaffForm.dataset.bound;\n  }\n\n  // Clear Update SHop Form Inputs\n  if (updateShopForm) {\n    updateShopForm.querySelectorAll('input, textarea, select').forEach(el => {\n      if (el.type === 'checkbox' || el.type === 'radio') {\n        el.checked = false;\n      } else {\n        el.value = '';\n      }\n    });\n    delete updateShopForm.dataset.bound;\n  }\n\n  // Clear Create Shop Form Inputs\n  if (depositPosCapitalForm) {\n    depositPosCapitalForm.querySelectorAll('input, textarea, select').forEach(el => {\n      if (el.type === 'checkbox' || el.type === 'radio') {\n        el.checked = false;\n      } else {\n        el.value = '';\n      }\n    });\n    delete depositPosCapitalForm.dataset.bound;\n  }\n\n  // Clear Create Shop Form Inputs\n  if (staffManageForm) {\n    staffManageForm.querySelectorAll('input, textarea, select').forEach(el => {\n      if (el.type === 'checkbox' || el.type === 'radio') {\n        el.checked = false;\n      } else {\n        el.value = '';\n      }\n    });\n    delete staffManageForm.dataset.staffId;\n\n    // Optional: reset text labels like staff name or current shop\n    const nameLabel = staffManageForm.querySelector('#staffManage-name');\n    if (nameLabel) nameLabel.innerText = '';\n    const currentShopDisplay = staffManageForm.querySelector('#currentAssignedShop');\n    if (currentShopDisplay) currentShopDisplay.innerText = 'No Shop Assigned';\n    delete staffManageForm.dataset.bound;\n  }\n\n  // Clear POS Transaction Form Inputs\n  if (createPosTransactionForm) {\n    createPosTransactionForm.querySelectorAll('input, textarea, select').forEach(el => {\n      if (el.type === 'checkbox' || el.type === 'radio') {\n        el.checked = false;\n      } else {\n        el.value = '';\n      }\n    });\n    delete createPosTransactionForm.dataset.staffId;\n  }\n\n  // Clear POS Charges Form Inputs\n  if (addPosChargeForm) {\n    addPosChargeForm.querySelectorAll('input, textarea, select').forEach(el => {\n      if (el.type === 'checkbox' || el.type === 'radio') {\n        el.checked = false;\n      } else {\n        el.value = '';\n      }\n    });\n    delete addPosChargeForm.dataset.staffId;\n  }\n\n  // Clear POS Machine Fee Form Inputs\n  if (addMachineFeesForm) {\n    addMachineFeesForm.querySelectorAll('input, textarea, select').forEach(el => {\n      if (el.type === 'checkbox' || el.type === 'radio') {\n        el.checked = false;\n      } else {\n        el.value = '';\n      }\n    });\n    delete addMachineFeesForm.dataset.staffId;\n  }\n\n  // Clear Add Product Form Inputs\n  if (addProductForm) {\n    addProductForm.querySelectorAll('input, textarea, select').forEach(el => {\n      if (el.type === 'checkbox' || el.type === 'radio') {\n        el.checked = false;\n      } else {\n        el.value = '';\n      }\n    });\n    delete addProductForm.dataset.staffId;\n  }\n\n  // Clear Add Categoty Form Inputs\n  if (addCategoryForm) {\n    addCategoryForm.querySelectorAll('input, textarea, select').forEach(el => {\n      if (el.type === 'checkbox' || el.type === 'radio') {\n        el.checked = false;\n      } else {\n        el.value = '';\n      }\n    });\n    delete addCategoryForm.dataset.staffId;\n  }\n\n  // Clear Update Product Form Inputs\n  if (updateProductForm) {\n    updateProductForm.querySelectorAll('input, textarea, select').forEach(el => {\n      if (el.type === 'checkbox' || el.type === 'radio') {\n        el.checked = false;\n      } else {\n        el.value = '';\n      }\n    });\n    delete updateProductForm.dataset.staffId;\n  }\n\n  // Clear Open Business Day  Inputs\n  if (openBusinessDayForm) {\n    openBusinessDayForm.querySelectorAll('input, textarea, select').forEach(el => {\n      if (el.type === 'checkbox' || el.type === 'radio') {\n        el.checked = false;\n      } else {\n        el.value = '';\n      }\n    });\n    delete openBusinessDayForm.dataset.staffId;\n  }\n\n  // Clear Checkout Form Inputs\n  if (checkoutForm) {\n    checkoutForm.querySelectorAll('input, textarea, select').forEach(el => {\n      if (el.type === 'checkbox' || el.type === 'radio') {\n        el.checked = false;\n      } else {\n        el.value = '';\n      }\n    });\n\n    //  delete checkoutForm.dataset.staffId;\n  }\n}\n\n// function to format amounts with commas\nfunction formatAmountWithCommas(amount) {\n  if (amount === null || amount === undefined) {\n    return amount; // return an empty string if amount is null or undefined\n  }\n  const amountString = amount.toString();\n  return amountString.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n}\n\n// Function to handle input formatting and remove commas when submitting\nfunction formatAmountWithCommasOnInput(input) {\n  //   console.log('formatAmountWithCommasOnInput() Reached');\n\n  let value = input.value;\n  value = value.replace(/[^0-9]/g, ''); // Remove non-numeric characters\n  input.value = formatAmountWithCommas(value);\n}\n\n// Format transaction type\nfunction formatTransactionType(value) {\n  switch (value.toLowerCase()) {\n    case 'withdrawal':\n      return 'Withdrawal';\n    case 'withdrawal_transfer':\n      return 'Withdrawal & Transfer';\n    case 'bill_payment':\n      return 'Bill Payment';\n    case 'deposit':\n      return 'Deposit';\n    default:\n      return value;\n  }\n}\n\n// Format Sale Status\nfunction formatSaleStatus(value) {\n  switch (value.toLowerCase()) {\n    case 'completed_full_payment':\n      return 'Completed Payment';\n    case 'partial_payment':\n      return 'Partial Payment';\n    default:\n      return value;\n  }\n}\ndocument.addEventListener('DOMContentLoaded', function () {\n  const posCapitalAmountInput = document.getElementById('posCapitalAmount');\n  const posTransactionAmountInput = document.getElementById('posTransactionAmount');\n  const adminPosTransactionAmountInput = document.getElementById('adminPosTransactionAmount');\n  const addPosChargeMinAmountInput = document.getElementById('addPosChargeMinAmount');\n  const addPosChargeMaxAmountInput = document.getElementById('addPosChargeMaxAmount');\n  const addPosChargeAmountInput = document.getElementById('addPosChargeAmount');\n  const addProductBoughtPriceInput = document.getElementById('addProductBoughtPrice');\n  const addProductSellingPriceInput = document.getElementById('addProductSellingPrice');\n  const addMachineFeesMinAmountInput = document.getElementById('addMachineFeesMinAmount');\n  const addMachineFeesMaxAmountInput = document.getElementById('addMachineFeesMaxAmount');\n  const openPosCapitalAmountInput = document.getElementById('openPosCapitalAmount');\n  const openCashAmountInput = document.getElementById('openCashAmount');\n  const adminOpenPosCapitalAmount = document.getElementById('adminOpenPosCapitalAmount');\n  const adminOpenCashAmount = document.getElementById('adminOpenCashAmount');\n  const closingCashAmountInput = document.getElementById('closingCashAmount');\n  const adminClosingCashAmountInput = document.getElementById('adminClosingCashAmount');\n  const adminPosCapitalAmount = document.getElementById('adminPosCapitalAmount');\n  const adminSoldProductPrice = document.getElementById('adminSoldProductPrice');\n  const soldProductPrice = document.getElementById('soldProductPrice');\n  const amountPaid = document.getElementById('amount-paid');\n  const productBalancePrice = document.getElementById('productBalancePrice');\n  if (posCapitalAmountInput) posCapitalAmountInput.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(posCapitalAmountInput);\n  });\n  if (posTransactionAmountInput) posTransactionAmountInput.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(posTransactionAmountInput);\n  });\n  if (adminPosTransactionAmountInput) adminPosTransactionAmountInput.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(adminPosTransactionAmountInput);\n  });\n  if (addPosChargeMinAmountInput) addPosChargeMinAmountInput.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(addPosChargeMinAmountInput);\n  });\n  if (addPosChargeMaxAmountInput) addPosChargeMaxAmountInput.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(addPosChargeMaxAmountInput);\n  });\n  if (addPosChargeAmountInput) addPosChargeAmountInput.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(addPosChargeAmountInput);\n  });\n  if (addProductSellingPriceInput) addProductSellingPriceInput.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(addProductSellingPriceInput);\n  });\n  if (addProductBoughtPriceInput) addProductBoughtPriceInput.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(addProductBoughtPriceInput);\n  });\n  if (addMachineFeesMinAmountInput) addMachineFeesMinAmountInput.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(addMachineFeesMinAmountInput);\n  });\n  if (addMachineFeesMaxAmountInput) addMachineFeesMaxAmountInput.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(addMachineFeesMaxAmountInput);\n  });\n  if (openCashAmountInput) openCashAmountInput.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(openCashAmountInput);\n  });\n  if (openPosCapitalAmountInput) openPosCapitalAmountInput.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(openPosCapitalAmountInput);\n  });\n  if (adminOpenCashAmount) adminOpenCashAmount.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(adminOpenCashAmount);\n  });\n  if (adminOpenPosCapitalAmount) adminOpenPosCapitalAmount.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(adminOpenPosCapitalAmount);\n  });\n  if (adminPosCapitalAmount) adminPosCapitalAmount.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(adminPosCapitalAmount);\n  });\n  if (adminSoldProductPrice) adminSoldProductPrice.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(adminSoldProductPrice);\n  });\n  if (soldProductPrice) soldProductPrice.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(soldProductPrice);\n  });\n  if (productBalancePrice) productBalancePrice.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(productBalancePrice);\n  });\n  if (amountPaid) amountPaid.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(amountPaid);\n  });\n  if (adminClosingCashAmountInput) adminClosingCashAmountInput.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(adminClosingCashAmountInput);\n  });\n  if (closingCashAmountInput) closingCashAmountInput.addEventListener('input', function () {\n    formatAmountWithCommasOnInput(closingCashAmountInput);\n  });\n});\n\n// Make the function globally available\nwindow.formatAmountWithCommasOnInput = formatAmountWithCommasOnInput;\n\n// When submitting, remove commas from the value before processing\n// export function getAmountForSubmission(input) {\n//   console.log('This is the input received from call', input);\n//   return input.value.replace(/,/g, ''); // Remove commas for backend submission\n// }\n\nfunction getAmountForSubmission(inputOrString) {\n  const rawValue = typeof inputOrString === 'string' ? inputOrString : inputOrString?.value || '';\n  return rawValue.replace(/,/g, '');\n}\n\n// Turns ISO Date formats like \"2025-05-14T10:46:04.164Z\" into: 14 May, 2025 10:46AM\n\nfunction formatDateTimeReadable(isoString) {\n  const date = new Date(isoString);\n  const options = {\n    day: '2-digit',\n    month: 'short',\n    year: 'numeric',\n    hour: 'numeric',\n    minute: '2-digit',\n    hour12: true\n  };\n\n  // e.g., \"14 May 2025, 10:46 AM\"\n  const formatted = date.toLocaleString('en-US', options);\n\n  // Optional tweak to remove the comma between day and year\n  const parts = formatted.split(', ');\n  return `${parts[0]} ${parts[1]}`;\n}\n\n// Global UI Spinner\nfunction showGlobalLoader() {\n  document.getElementById('global-loader').classList.remove('hidden');\n}\nfunction hideGlobalLoader() {\n  document.getElementById('global-loader').classList.add('hidden');\n}\n\n// Button UI spinner\nfunction showBtnLoader(button) {\n  const text = button.querySelector('.btn-text');\n  const spinner = button.querySelector('.btn-spinner');\n  text.style.opacity = '0.5';\n  spinner.classList.remove('hidden');\n  button.classList.add('loading');\n  button.disabled = true;\n}\nfunction hideBtnLoader(button) {\n  const text = button.querySelector('.btn-text');\n  const spinner = button.querySelector('.btn-spinner');\n  text.style.opacity = '1';\n  spinner.classList.add('hidden');\n  button.classList.remove('loading');\n  button.disabled = false;\n}\nfunction generateBarcode() {\n  const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  const alphanumerics = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  const prefix = letters.charAt(Math.floor(Math.random() * letters.length));\n  let body = '';\n  for (let i = 0; i < 9; i++) {\n    body += alphanumerics.charAt(Math.floor(Math.random() * alphanumerics.length));\n  }\n  return prefix + body;\n}\nfunction populateBusinessShopDropdown(shopList = [], dropdownId = 'inventoryShopDropdown') {\n  const dropdown = document.getElementById(dropdownId);\n  if (!dropdown) return;\n  dropdown.innerHTML = `<option value=\"\">Select a shop</option>`;\n  shopList.forEach(shop => {\n    const option = document.createElement('option');\n    option.value = shop.id;\n    option.textContent = `${shop.shop_name} - ${shop.location}`;\n    dropdown.appendChild(option);\n  });\n}\nfunction populateBusinessStaffDropdown(staffList = [], dropdownId = 'staffDropdown') {\n  const dropdown = document.getElementById(dropdownId);\n  if (!dropdown) return;\n\n  //   console.log(staffList);\n\n  dropdown.innerHTML = `<option value=\"\">Select a Staff</option>`;\n  staffList.forEach(staff => {\n    const option = document.createElement('option');\n    option.value = staff.id;\n    option.textContent = `${staff.firstName} ${staff.lastName}`;\n    dropdown.appendChild(option);\n  });\n}\n\n// export async function ensureBusinessDayOpen(shopId) {\n//   const day = await getCurrentBusinessDay(shopId);\n//   console.log(shopId, day);\n//   if (!day || !day.is_open) {\n//     showToast('warning', '⛔ Please open a business day to continue.');\n//     return false;\n//   }\n//   return true;\n// }\n\nasync function ensureBusinessDayOpen(shopId) {\n  const response = await (0,_apiServices_pos_posResources__WEBPACK_IMPORTED_MODULE_0__.getCurrentBusinessDay)(shopId);\n  console.log(shopId, response);\n\n  // Make sure response and response.data exist\n  //   if (!response?.success || !response.data) {\n  //     showToast('warning', '⛔ Could not verify business day. Try again.');\n  //     return false;\n  //   }\n\n  const day = response.data;\n  if (day === null) {\n    (0,_script__WEBPACK_IMPORTED_MODULE_1__.showToast)('warning', '⛔ Please open a business day to continue.');\n    return false;\n  }\n  return true;\n}\n\n//# sourceURL=webpack://posbok/./JS/helper/helper.js?");

/***/ }),

/***/ "./JS/pos.js":
/*!*******************!*\
  !*** ./JS/pos.js ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addMachineFeeForm: () => (/* binding */ addMachineFeeForm),\n/* harmony export */   addPosChargeForm: () => (/* binding */ addPosChargeForm),\n/* harmony export */   handlePosFormSubmit: () => (/* binding */ handlePosFormSubmit),\n/* harmony export */   populateMachineFeesTable: () => (/* binding */ populateMachineFeesTable),\n/* harmony export */   populatePosChargesTable: () => (/* binding */ populatePosChargesTable)\n/* harmony export */ });\n/* harmony import */ var _apiServices_pos_posResources__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./apiServices/pos/posResources */ \"./JS/apiServices/pos/posResources.js\");\n/* harmony import */ var _script__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./script */ \"./JS/script.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config.js */ \"./config.js\");\n/* harmony import */ var _helper_helper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helper/helper.js */ \"./JS/helper/helper.js\");\n/* harmony import */ var _goods_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./goods.js */ \"./JS/goods.js\");\n/* harmony import */ var _apiServices_shop_shopResource_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./apiServices/shop/shopResource.js */ \"./JS/apiServices/shop/shopResource.js\");\n\n\n\n\n\n\nconst userData = _config_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].userData;\nconst dummyShopId = _config_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].dummyShopId;\nconst parsedUserData = userData ? JSON.parse(userData) : null;\nconst isAdmin = parsedUserData?.accountType === 'ADMIN';\nconst staffShopId = parsedUserData?.shopId;\nif (isAdmin) {\n  document.addEventListener('DOMContentLoaded', () => {\n    (0,_apiServices_pos_posResources__WEBPACK_IMPORTED_MODULE_0__.getPosChargeSettings)();\n    (0,_apiServices_pos_posResources__WEBPACK_IMPORTED_MODULE_0__.getPosMachineFeesettings)();\n  });\n}\nconst adminPosContainer = document.querySelector('.adminPosContainer');\nconst staffPosContainer = document.querySelector('.staffPosContainer');\n\n// if ((isAdmin && adminPosContainer) || staffPosContainer) {\n//   if (adminPosContainer) adminPosContainer.style.display = 'block';\n//   if (staffPosContainer) staffPosContainer.style.display = 'none';\n\n//   async function loadShopDropdown() {\n//     try {\n//       showGlobalLoader();\n//       const { enrichedShopData } = await checkAndPromptCreateShop();\n//       populateBusinessShopDropdown(enrichedShopData, 'posShopDropdown');\n//       hideGlobalLoader();\n//     } catch (err) {\n//       hideGlobalLoader();\n//       console.error('Failed to load dropdown:', err.message);\n//     }\n//   }\n\n//   loadShopDropdown();\n// } else {\n//   if (adminPosContainer) adminPosContainer.style.display = 'none';\n//   if (staffPosContainer) staffPosContainer.style.display = 'block';\n// }\n\nif (isAdmin && adminPosContainer) {\n  if (adminPosContainer) adminPosContainer.style.display = 'block';\n  if (staffPosContainer) staffPosContainer.innerHTML = '';\n  if (staffPosContainer) staffPosContainer.style.display = 'none';\n  async function loadShopDropdown() {\n    try {\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.showGlobalLoader)();\n      const {\n        enrichedShopData\n      } = await (0,_apiServices_shop_shopResource_js__WEBPACK_IMPORTED_MODULE_5__.checkAndPromptCreateShop)();\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.populateBusinessShopDropdown)(enrichedShopData, 'posShopDropdown');\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.hideGlobalLoader)();\n    } catch (err) {\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.hideGlobalLoader)();\n      console.error('Failed to load dropdown:', err.message);\n    }\n  }\n  loadShopDropdown();\n} else {\n  if (adminPosContainer) adminPosContainer.innerHTML = '';\n  if (adminPosContainer) adminPosContainer.style.display = 'none';\n  if (staffPosContainer) staffPosContainer.style.display = 'block';\n}\nconst shopId = parsedUserData?.shopId;\n\n// JavaScript for POS Form\n\n// POS Form submission\n\nasync function handlePosFormSubmit() {\n  const posForm = document.querySelector('.pos-method-form');\n  if (!posForm || posForm.dataset.bound === 'true') return;\n  posForm.dataset.bound = 'true';\n  if (posForm) {\n    posForm.addEventListener('submit', async function (e) {\n      e.preventDefault();\n      const posShopDropdown = document.getElementById('posShopDropdown')?.value;\n      const amount = document.getElementById(isAdmin ? 'adminPosTransactionAmount' : 'posTransactionAmount').value;\n      const customerName = document.getElementById(isAdmin ? 'adminPosCustomerName' : 'posCustomerName').value;\n      const customerPhone = document.getElementById(isAdmin ? 'adminPosCustomerPhone' : 'posCustomerPhone').value;\n      const posFeePaymentType = document.getElementById(isAdmin ? 'adminPosFeePaymentType' : 'posFeePaymentType').value;\n      const transactionType = document.getElementById(isAdmin ? 'adminTransactionType' : 'transactionType').value;\n      const paymentMethod = document.getElementById(isAdmin ? 'adminPaymentMethod' : 'paymentMethod').value;\n      const posTransactionRemark = document.getElementById(isAdmin ? 'adminPosTransactionRemark' : 'posTransactionRemark').value;\n      // const posRemarksDiv = document.querySelector('.posRemarksDiv').value;\n      // const paymentMethodTypeDiv =\n      //   document.querySelector('.paymentMethodType').value;\n\n      // const fee = document.getElementById('posTransactionFee').value;\n      // const machineFeeContainer = document.querySelector('.machine-fee').value;\n      // const machineFeeInput = document.getElementById('posMachineFee').value;\n      // const posMachineFee = document.getElementById('posMachineFee');\n      // const posSuccessfulCheckbox = document.getElementById(\n      //   'posSuccessfulCheckbox'\n      // ).value;\n      // const posPendingCheckbox =\n      //   document.getElementById('posPendingCheckbox').value;\n      // const posTransactionConfirmation = document.getElementById(\n      //   'posTransactionConfirmation'\n      // ).value;\n\n      //   isSubmitting = true;\n\n      // const transactionTypeValue = transactionType.trim().toLowerCase();\n\n      // Create the form data with documentIds\n\n      // \"transactionType\" must be one of [WITHDRAWAL, DEPOSIT, WITHDRAWAL_TRANSFER, BILL_PAYMENT]\n      const shopId = isAdmin ? Number(posShopDropdown) : Number(staffShopId);\n      const posFormData = {\n        shopId,\n        transactionType: transactionType.toUpperCase(),\n        amount: Number((0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.getAmountForSubmission)(amount)),\n        customerName: customerName,\n        customerPhone: customerPhone,\n        paymentMethod: paymentMethod.toUpperCase(),\n        chargePaymentMethod: posFeePaymentType.toUpperCase(),\n        remarks: posTransactionRemark\n        //   transaction_fee: Number(fee),\n        //   machine_fee: Number(machineFeeInput),\n      };\n      const posSubmitButton = document.querySelector('.posSubmitButton');\n      try {\n        console.log('📦 POS Ttransaction Details:', posFormData);\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.showBtnLoader)(posSubmitButton);\n        const isDayOpen = await (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.ensureBusinessDayOpen)(shopId);\n        if (!isDayOpen) {\n          (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(posSubmitButton);\n          return;\n        }\n        const posTransactionCreated = await (0,_apiServices_pos_posResources__WEBPACK_IMPORTED_MODULE_0__.createPosTransaction)(posFormData);\n        console.log(posTransactionCreated);\n\n        //   console.log(\n        //     'POS transaction sent successfully:',\n        //     posTransactionCreated\n        //   );\n        resetFormInputs();\n        (0,_script__WEBPACK_IMPORTED_MODULE_1__.showToast)('success', `✅ ${posTransactionCreated?.message}`);\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(posSubmitButton);\n      } catch (err) {\n        //   console.error('Error sending POS transaction:', error);\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(posSubmitButton);\n        (0,_script__WEBPACK_IMPORTED_MODULE_1__.showToast)('fail', `❎ POS transaction not created: ${err?.message} `);\n        // reset form inputs\n        resetFormInputs();\n      }\n      function resetFormInputs() {\n        console.log('Reset fORM');\n        document.getElementById(isAdmin ? 'adminTransactionType' : 'transactionType').value = 'withdrawal';\n        document.getElementById(isAdmin ? 'adminPaymentMethod' : 'paymentMethod').value = 'card';\n        document.getElementById(isAdmin ? 'adminPosFeePaymentType' : 'posFeePaymentType').value = 'card';\n        document.getElementById(isAdmin ? 'adminPosTransactionAmount' : 'posTransactionAmount').value = '';\n        document.getElementById(isAdmin ? 'adminPosCustomerName' : 'posCustomerName').value = '';\n        document.getElementById(isAdmin ? 'adminPosCustomerPhone' : 'posCustomerPhone').value = '';\n        document.getElementById(isAdmin ? 'adminPosTransactionRemark' : 'posTransactionRemark').value = '';\n        document.querySelector('.paymentMethodType').style.display = 'block';\n        document.querySelector('.posRemarksDiv').style.display = 'block';\n\n        //   document.getElementById('posTransactionFee').value = '';\n        //   document.getElementById('posMachineFee').value = '';\n        //   document.getElementById('posTransactionConfirmation').value = '';\n        //   document.getElementById('posSuccessfulCheckbox').checked = false;\n        //   document.getElementById('posPendingCheckbox').checked = false;\n      }\n    });\n  }\n}\nhandlePosFormSubmit();\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Setup for Opening Pos Charges Modal\n  (0,_script__WEBPACK_IMPORTED_MODULE_1__.setupModalCloseButtons)();\n  document.querySelector('#openAddPosChargeModal')?.addEventListener('click', _apiServices_pos_posResources__WEBPACK_IMPORTED_MODULE_0__.openaddPosChargeModal);\n  document.querySelector('#openAddMachineFeeModal')?.addEventListener('click', _apiServices_pos_posResources__WEBPACK_IMPORTED_MODULE_0__.openAddMachineFeeModal);\n});\n\n// Function to open Form to Confiure POS Charges .\nfunction addPosChargeForm() {\n  const form = document.querySelector('.addPosChargeModal');\n  if (!form || form.dataset.bound === 'true') return;\n  form.dataset.bound = 'true';\n  if (form) {\n    form.addEventListener('submit', async function (e) {\n      e.preventDefault();\n      const posChargeTransactionType = document.querySelector('#addPosChargeTransactionType').value;\n      const posChargeMinAmount = document.querySelector('#addPosChargeMinAmount').value;\n      const posChargeMaxAmount = document.querySelector('#addPosChargeMaxAmount').value;\n      const posChargeAmount = document.querySelector('#addPosChargeAmount').value;\n      const addPosChargesDetails = {\n        transactionType: posChargeTransactionType.toUpperCase(),\n        minAmount: Number((0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.getAmountForSubmission)(posChargeMinAmount)),\n        maxAmount: Number((0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.getAmountForSubmission)(posChargeMaxAmount)),\n        chargeAmount: Number((0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.getAmountForSubmission)(posChargeAmount))\n      };\n\n      // console.log('Configuring POS Charges with:', addPosChargesDetails);\n\n      const addPosChargeBtn = document.querySelector('.addPosChargeBtn');\n      try {\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.showBtnLoader)(addPosChargeBtn);\n        const data = await (0,_apiServices_pos_posResources__WEBPACK_IMPORTED_MODULE_0__.configurePosCharges)(addPosChargesDetails);\n        if (data) {\n          (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(addPosChargeBtn);\n          (0,_script__WEBPACK_IMPORTED_MODULE_1__.closeModal)();\n        }\n        //   closeModal(); // close modal after success\n      } catch (err) {\n        console.error('Error COnfiguring POS Charges:', err.message);\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(addPosChargeBtn);\n        (0,_script__WEBPACK_IMPORTED_MODULE_1__.showToast)('fail', `❎ ${err.message}`);\n      }\n    });\n  }\n}\nfunction populatePosChargesTable(posChargesData) {\n  const tbody = document.querySelector('.posCharge-table tbody');\n  const loadingRow = document.querySelector('.loading-row');\n  const posCharges = posChargesData.data;\n\n  //   console.log('posCharges', posCharges);\n\n  // Remove static rows and loading\n\n  if (tbody) tbody.innerHTML = '';\n  if (!posCharges.length) {\n    const emptyRow = document.createElement('tr');\n    emptyRow.innerHTML = `\n        <td colspan=\"6\" class=\"table-error-text\">No POS Charges Settings found.</td>\n      `;\n    if (tbody) tbody.appendChild(emptyRow);\n    return;\n  }\n  posCharges.forEach((charge, index) => {\n    const row = document.createElement('tr');\n    row.classList.add('table-body-row');\n\n    //  console.log('charge', charge);\n\n    const {\n      transaction_type,\n      min_amount,\n      max_amount,\n      charge_amount,\n      created_at\n    } = charge;\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.formatDateTimeReadable)(created_at);\n    if (row) row.innerHTML = `\n\n      <td class=\"py-1 posChargeSerialNumber\">${index + 1}</td>\n      <td class=\"py-1 posChargeType\">${(0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.formatTransactionType)(transaction_type)}\n      <td class=\"py-1 posChargeMinAmount\">₦${(0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.formatAmountWithCommas)(min_amount)}</td>\n      <td class=\"py-1 posChargeMaxAmount\">₦${(0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.formatAmountWithCommas)(max_amount)}</td>\n      <td class=\"py-1 posChargeAmount\"><strong>₦${(0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.formatAmountWithCommas)(charge_amount)}</td>\n      <td class=\"py-1 posChargeCreatedDate\"> ${(0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.formatDateTimeReadable)(created_at)}\n      </td>\n       `;\n    if (tbody) tbody.appendChild(row);\n  });\n}\n\n// Function to open Form to Configure POS Machine Fees\nfunction addMachineFeeForm() {\n  const form = document.querySelector('.addMachineFeesModal');\n  if (!form || form.dataset.bound === 'true') return;\n  form.dataset.bound = 'true';\n  const percentageTypeSelect = document.querySelector('#addMachineFeesPercentageType');\n  const percentageRateDiv = document.querySelector('.percentageRateDiv');\n  const machineFeesAmountDiv = document.querySelector('.machineFeesAmountDiv');\n  const machineFeesPercentageRateInput = document.querySelector('#addMachineFeesPercentageRate');\n  const machineFeesAmountInput = document.querySelector('#addMachineFeesAmount');\n\n  // Default setup\n  percentageTypeSelect.value = 'false';\n  percentageRateDiv.style.display = 'none';\n  machineFeesAmountDiv.style.display = '';\n  machineFeesPercentageRateInput.value = '';\n  //   machineFeesAmountInput.value = 0;\n\n  // Ensure proper required attributes\n  machineFeesPercentageRateInput.removeAttribute('required');\n  machineFeesAmountInput.setAttribute('required', 'true');\n  percentageTypeSelect.addEventListener('change', () => {\n    const selected = percentageTypeSelect.value;\n    console.log('Selected:', selected);\n    if (selected === 'true') {\n      // Show percentage input, hide fixed amount\n      percentageRateDiv.style.display = '';\n      machineFeesAmountDiv.style.display = 'none';\n      machineFeesAmountInput.value = '';\n\n      // Validation\n      machineFeesPercentageRateInput.setAttribute('required', 'true');\n      machineFeesAmountInput.removeAttribute('required');\n    } else {\n      // Show fixed amount input, hide percentage\n      percentageRateDiv.style.display = 'none';\n      machineFeesAmountDiv.style.display = '';\n      machineFeesPercentageRateInput.value = '';\n\n      // Validation\n      machineFeesPercentageRateInput.removeAttribute('required');\n      machineFeesAmountInput.setAttribute('required', 'true');\n    }\n  });\n  if (form) {\n    form.addEventListener('submit', async function (e) {\n      e.preventDefault();\n\n      // Previously Declared\n      // const percentageTypeSelect = document.querySelector(\n      //    '#addMachineFeesPercentageType'\n      //  );\n\n      const machineFeesMinAmount = document.querySelector('#addMachineFeesMinAmount').value;\n      const machineFeesMaxAmount = document.querySelector('#addMachineFeesMaxAmount').value;\n      const machineFeesPercentageRate = document.querySelector('#addMachineFeesPercentageRate').value;\n      const machineFeesAmount = document.querySelector('#addMachineFeesAmount').value;\n      const isPercentage = percentageTypeSelect.value === 'true';\n      const addMachineFeesDetails = {\n        isPercentage,\n        minAmount: Number((0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.getAmountForSubmission)(machineFeesMinAmount)),\n        maxAmount: Number((0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.getAmountForSubmission)(machineFeesMaxAmount)),\n        ...(isPercentage ? {\n          percentageRate: Number((0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.getAmountForSubmission)(machineFeesPercentageRate))\n        } : {\n          feeAmount: Number((0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.getAmountForSubmission)(machineFeesAmount))\n        })\n      };\n\n      // console.log('Configuring POS Charges with:', addMachineFeesDetails);\n\n      const addMachineFeeBtn = document.querySelector('.addMachineFeeBtn');\n      try {\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.showBtnLoader)(addMachineFeeBtn);\n        const data = await (0,_apiServices_pos_posResources__WEBPACK_IMPORTED_MODULE_0__.configurePosMachineFees)(addMachineFeesDetails);\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(addMachineFeeBtn);\n        if (data) {\n          (0,_script__WEBPACK_IMPORTED_MODULE_1__.closeModal)();\n        }\n        (0,_script__WEBPACK_IMPORTED_MODULE_1__.closeModal)(); // close modal after success\n      } catch (err) {\n        console.error('Error COnfiguring POS Charges:', err.message);\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.hideBtnLoader)(addMachineFeeBtn);\n        (0,_script__WEBPACK_IMPORTED_MODULE_1__.showToast)('fail', `❎ ${err.message}`);\n      }\n    });\n  }\n}\nfunction populateMachineFeesTable(MachineFeesData) {\n  const tbody = document.querySelector('.machineFee-table tbody');\n  const loadingRow = document.querySelector('.loading-row');\n  const MachineFees = MachineFeesData.data;\n\n  //   console.log('MachineFees', MachineFees);\n\n  // Remove static rows and loading\n\n  if (tbody) tbody.innerHTML = '';\n  if (!MachineFees.length) {\n    const emptyRow = document.createElement('tr');\n    emptyRow.innerHTML = `\n        <td colspan=\"6\" class=\"table-error-text\">No POS Machine Fee Settings found.</td>\n      `;\n    if (tbody) tbody.appendChild(emptyRow);\n    return;\n  }\n  MachineFees.forEach((charge, index) => {\n    const row = document.createElement('tr');\n    row.classList.add('table-body-row');\n\n    //  console.log('charge', charge);\n\n    const {\n      min_amount,\n      max_amount,\n      is_percentage,\n      fee_amount,\n      percentage_rate\n    } = charge;\n    if (row) row.innerHTML = `\n\n      <td class=\"py-1 MachineFeeSerialNumber\">${index + 1}</td>\n      <td class=\"py-1 MachineFeeMinAmount\">₦${(0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.formatAmountWithCommas)(min_amount)}</td>\n      <td class=\"py-1 MachineFeeMaxAmount\">₦${(0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_3__.formatAmountWithCommas)(max_amount)}</td>\n      <td class=\"py-1 MachineFeeType\">${is_percentage}\n      <td class=\"py-1 MachineFeeCreatedDate\"> ${percentage_rate}\n      <td class=\"py-1 MachineFeeAmount\"><strong>₦${fee_amount}</td>\n      </td>\n       `;\n    if (tbody) tbody.appendChild(row);\n  });\n}\n\n// POS FORM MANIPUATION - LEAVE AS IT IS\n// document.addEventListener('DOMContentLoaded', function () {\n//   const posSuccessfulCheckbox = document.getElementById(\n//     'posSuccessfulCheckbox'\n//   );\n//   const posPendingCheckbox = document.getElementById('posPendingCheckbox');\n//   const posRemarksDiv = document.querySelector('.posRemarksDiv');\n//   const posTransactionRemark = document.getElementById('posTransactionRemark');\n//   const checkboxes = document.querySelectorAll('input[type=\"radio\"]');\n\n//   function updateStatus() {\n//     if (posSuccessfulCheckbox?.checked) {\n//       if (posRemarksDiv) posRemarksDiv.style.display = 'none';\n//       if (posTransactionRemark) posTransactionRemark.value = 'Successful';\n//       if (posTransactionRemark) posTransactionRemark.disabled = true;\n//     } else {\n//       if (posRemarksDiv) posRemarksDiv.style.display = 'block';\n//       if (posTransactionRemark) posTransactionRemark.disabled = false;\n//     }\n//   }\n\n//   updateStatus();\n\n//   //   nOW USING RADIO BUTTONS BUT STILLL KEEPING THIS HERE\n//   //   checkboxes.forEach((checkbox) => {\n//   //     checkbox.addEventListener('change', function () {\n//   //       checkboxes.forEach((otherCheckbox) => {\n//   //         if (otherCheckbox !== checkbox) {\n//   //           otherCheckbox.checked = false;\n//   //           otherCheckbox.removeAttribute('required');\n//   //         }\n//   //       });\n\n//   //       if (checkbox === posSuccessfulCheckbox) {\n//   //         posPendingCheckbox.checked = !checkbox.checked;\n//   //       } else {\n//   //         posSuccessfulCheckbox.checked = !checkbox.checked;\n//   //         posTransactionRemark.value = '';\n//   //       }\n\n//   //       //Backup\n//   //       // if (checkbox === posSuccessfulCheckbox) {\n//   //       //   posSuccessfulCheckbox.checked = true;\n//   //       //   posRemarksDiv.style.display = 'none';\n//   //       //   posTransactionRemark.disabled = true;\n//   //       //   posTransactionRemark.value = 'Successful';\n//   //       // } else {\n//   //       //   posPendingCheckbox.checked = true;\n//   //       //   posRemarksDiv.style.display = 'flex';\n//   //       //   posTransactionRemark.disabled = false;\n//   //       //   posTransactionRemark.value = '';\n//   //       // }\n//   //       updateStatus();\n//   //     });\n//   //   });\n\n//   if (posTransactionRemark)\n//     posTransactionRemark.addEventListener('input', function () {\n//       const inputValue = posTransactionRemark.value.trim();\n\n//       posPendingCheckbox.checked = inputValue !== '';\n//       posSuccessfulCheckbox.checked = !posPendingCheckbox.checked;\n//       posSuccessfulCheckbox.removeAttribute('required');\n\n//       //Backup\n//       //  if (inputValue !== '') {\n//       //    posPendingCheckbox.checked = true;\n//       //    posSuccessfulCheckbox.checked = false;\n//       //    posSuccessfulCheckbox.removeAttribute('required');\n//       //  } else {\n//       //    posPendingCheckbox.checked = false;\n//       //    return;\n//       //  }\n\n//       updateStatus();\n//     });\n// });\n\n// Machine Fees\n// amount.addEventListener('input', () => {\n//   const value = amount.value.trim();\n\n//   let machineFee = '';\n\n//   if (!value || value <= 0) {\n//     machineFee = '';\n//     machineFeeContainer.style.display = 'none';\n//   } else {\n//     machineFeeContainer.style.display = 'block';\n\n//     if (value <= 100) {\n//       machineFee = 0.5;\n//     } else if (value <= 200) {\n//       machineFee = 1;\n//     } else if (value <= 500) {\n//       machineFee = 3;\n//     } else if (value <= 1100) {\n//       machineFee = 5;\n//     } else if (value <= 1600) {\n//       machineFee = 8;\n//     } else if (value <= 2000) {\n//       machineFee = 10;\n//     } else if (value <= 2100) {\n//       machineFee = 11;\n//     } else if (value <= 3100) {\n//       machineFee = 16;\n//     } else if (value <= 5200) {\n//       machineFee = 26;\n//     } else if (value <= 10000) {\n//       machineFee = 50;\n//     } else if (value <= 12000) {\n//       machineFee = 64;\n//     } else if (value <= 20000 || value > 20000) {\n//       machineFee = 100;\n//     }\n//   }\n\n//   machineFeeInput.value = machineFee ? machineFee : '';\n// });\n\n// getPosTransactions();\n\n// JavaScript to toggle withdrawal methods\n\n// document.addEventListener('DOMContentLoaded', function () {\n//   const Div = document.querySelector(\n//     '.paymentMethodType'\n//   );\n//   const transactionType = document.getElementById('transactionType');\n//   const paymentMethod = document.getElementById('paymentMethod');\n//   const posFeePaymentType = document.getElementById('posFeePaymentType');\n//   //   const posTransactionConfirmation = document.getElementById(\n//   //     'posTransactionConfirmation'\n//   //   );\n\n//   if (transactionType) {\n//     transactionType.addEventListener('change', function (e) {\n//       const selectedType = e.target.value;\n\n//       if (\n//         selectedType === 'withdrawal' ||\n//         selectedType === 'withdrawal/transfer' ||\n//         selectedType === 'bill-Payment'\n//       ) {\n//         Div.style.display = 'block';\n//         //   posTransactionConfirmation.style.display = 'block';\n//       } else if (selectedType === 'deposit') {\n//         paymentMethod.value = 'cash';\n//         posFeePaymentType.value = 'cash';\n//         posFeePaymentType.style.display = 'block';\n//         Div.style.display = 'none';\n//         //   posTransactionConfirmation.style.display = 'none';\n//       }\n\n//       //  if (selectedType === 'Deposit') {\n//       //   paymentMethod.value = 'Cash';\n\n//       //   const selectedOption =\n//       //     paymentMethod.querySelector(`option[value='Cash']`);\n//       //   if (selectedOption) {\n//       //     selectedOption.selected = true;\n//       //   }\n\n//       //   console.log('Withdrawal Type set to Cash');\n//       // }\n//     });\n//   }\n// });\n\n//# sourceURL=webpack://posbok/./JS/pos.js?");

/***/ }),

/***/ "./JS/script.js":
/*!**********************!*\
  !*** ./JS/script.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bindChangePasswordFormListener: () => (/* binding */ bindChangePasswordFormListener),\n/* harmony export */   bindCloseBusinessDayFormListener: () => (/* binding */ bindCloseBusinessDayFormListener),\n/* harmony export */   bindDepositPosCapitalFormListener: () => (/* binding */ bindDepositPosCapitalFormListener),\n/* harmony export */   bindOpenBusinessDayFormListener: () => (/* binding */ bindOpenBusinessDayFormListener),\n/* harmony export */   bindUpdateProfileFormListener: () => (/* binding */ bindUpdateProfileFormListener),\n/* harmony export */   closeBusinessDayForm: () => (/* binding */ closeBusinessDayForm),\n/* harmony export */   closeModal: () => (/* binding */ closeModal),\n/* harmony export */   depositPosCapitalForm: () => (/* binding */ depositPosCapitalForm),\n/* harmony export */   generateBusinessOwnerId: () => (/* binding */ generateBusinessOwnerId),\n/* harmony export */   handleLogout: () => (/* binding */ handleLogout),\n/* harmony export */   openAdminBusinessDayModal: () => (/* binding */ openAdminBusinessDayModal),\n/* harmony export */   openBusinessDayForm: () => (/* binding */ openBusinessDayForm),\n/* harmony export */   openStaffBusinessDayModal: () => (/* binding */ openStaffBusinessDayModal),\n/* harmony export */   redirectWithDelay: () => (/* binding */ redirectWithDelay),\n/* harmony export */   renderUserprofileDetails: () => (/* binding */ renderUserprofileDetails),\n/* harmony export */   setupModalCloseButtons: () => (/* binding */ setupModalCloseButtons),\n/* harmony export */   showToast: () => (/* binding */ showToast)\n/* harmony export */ });\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config.js */ \"./config.js\");\n/* harmony import */ var flatpickr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! flatpickr */ \"./node_modules/flatpickr/dist/esm/index.js\");\n/* harmony import */ var _apiServices_sales_salesResources_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./apiServices/sales/salesResources.js */ \"./JS/apiServices/sales/salesResources.js\");\n/* harmony import */ var _apiServices_login__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./apiServices/login */ \"./JS/apiServices/login.js\");\n/* harmony import */ var _apiServices_shop_shopResource_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./apiServices/shop/shopResource.js */ \"./JS/apiServices/shop/shopResource.js\");\n/* harmony import */ var _apiServices_business_businessResource_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./apiServices/business/businessResource.js */ \"./JS/apiServices/business/businessResource.js\");\n/* harmony import */ var _apiServices_user_userResource_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./apiServices/user/userResource.js */ \"./JS/apiServices/user/userResource.js\");\n/* harmony import */ var _helper_helper_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./helper/helper.js */ \"./JS/helper/helper.js\");\n/* harmony import */ var _apiServices_pos_posResources_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./apiServices/pos/posResources.js */ \"./JS/apiServices/pos/posResources.js\");\n/* harmony import */ var _apiServices_account_accountOverview_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./apiServices/account/accountOverview.js */ \"./JS/apiServices/account/accountOverview.js\");\n/* harmony import */ var _staff_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./staff.js */ \"./JS/staff.js\");\n/* harmony import */ var _apiServices_inventory_inventoryResources_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./apiServices/inventory/inventoryResources.js */ \"./JS/apiServices/inventory/inventoryResources.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nconst userData = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].userData;\nconst dummyShopId = _config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dummyShopId;\nlet parsedUserData = null;\nparsedUserData = userData ? JSON.parse(userData) : null;\nconst isAdmin = parsedUserData?.accountType === 'ADMIN';\nconst isStaff = parsedUserData?.accountType === 'STAFF';\nconst shopId = parsedUserData?.shopId;\nconst staffUserId = parsedUserData?.id;\nconst shopKey = `shop_${staffUserId}`;\n\n// Normalize current page name from pathname\nconst currentPage = window.location.pathname.toLowerCase();\n\n// Toggle the active class for sideNavs\nconst sideNavs = document.querySelectorAll('.side-nav_item');\nsideNavs.forEach(nav => {\n  nav.addEventListener('click', () => {\n    nav.classList.add('active');\n    sideNavs.forEach(otherNav => {\n      if (otherNav !== nav) {\n        otherNav.classList.remove('active');\n      }\n    });\n  });\n});\n\n// Toast notification\n\n// JavaScript to show toast\n\nfunction showToast(type, message) {\n  const toast = document.getElementById('toast');\n  if (!toast) {\n    console.warn('⚠️ Toast element not found in DOM.');\n    return;\n  }\n  toast.textContent = message;\n  toast.className = 'toast'; // Reset classes\n  toast.classList.add(type);\n  toast.classList.add('show');\n\n  // Hide after 5 seconds\n  setTimeout(() => {\n    toast.classList.remove('show');\n    setTimeout(() => {\n      toast.className = 'toast'; // Cleanup\n      toast.textContent = '';\n    }, 500); // Wait for transition to complete\n  }, 5000);\n}\n\n//  Get & Update Profile\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const profileIcon = document.querySelector('.profileIconDiv');\n  const profileSliderOverlay = document.querySelector('.profile-slider-overlay');\n  const profileSlider = document.querySelector('.profile-slider-content');\n  const closeProfileBtn = document.querySelector('.close-profile-btn');\n  const sliderWrapper = document.querySelector('.slider-wrapper');\n\n  //   profileIcon?.click();\n\n  // OpenProfile Slider\n  profileIcon?.addEventListener('click', async () => {\n    (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.showGlobalLoader)();\n    profileSlider.classList.add('open');\n    profileSliderOverlay.classList.add('visible');\n    sliderWrapper.style.transform = 'translateX(0%)'; // Always reset toprofile View\n    renderUserprofileDetails();\n    //  hideGlobalLoader();\n  });\n\n  // Close profile Slider\n  closeProfileBtn?.addEventListener('click', () => {\n    profileSlider?.classList.remove('open');\n    profileSliderOverlay?.classList.remove('visible');\n  });\n  profileSliderOverlay?.addEventListener('click', () => {\n    profileSlider?.classList.remove('open');\n    profileSliderOverlay?.classList.remove('visible');\n  });\n});\nasync function renderUserprofileDetails() {\n  (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.showGlobalLoader)();\n  const profileData = await (0,_apiServices_user_userResource_js__WEBPACK_IMPORTED_MODULE_6__.fetchProfileDetails)();\n  const userData = profileData?.data?.user;\n  const firstName = userData?.firstName || 'First Name Not Available';\n  const lastName = userData?.lastName || 'Last Name Not Available';\n  const address = userData?.address || 'Address Not Available';\n  const phoneNumber = userData?.phoneNumber || 'Phone Number Not Available';\n  const email = userData?.email || 'Email Not Available';\n  const dateOfBirth = userData?.dateOfBirth || 'Date of Birth Not Available';\n  const stateOfOrigin = userData?.stateOfOrigin || 'State Not Available';\n  const lga = userData?.lga || 'LGA Not Available';\n  const accountType = userData?.accountType || 'Account Type Not Available';\n  const servicePermission = userData?.servicePermission || 'Permission Not Available';\n  const businessName = userData?.businessName || 'Business Name Not Available';\n  const updateProfileFormContainer = document.querySelector('#profile-form');\n  const updatePasswordFormContainer = document.querySelector('#updatePassword-form');\n  if (updateProfileFormContainer) {\n    // Store userId in form container for reference\n    updateProfileFormContainer.dataset.userId = userData.id;\n  }\n  if (updatePasswordFormContainer) {\n    // Store userId in form container for reference\n    updatePasswordFormContainer.dataset.userId = userData.id;\n  }\n\n  // DOM Elements\n  document.getElementById('userProfileFirstName').value = firstName;\n  document.getElementById('userProfileLastName').value = lastName;\n  document.getElementById('userProfileAddress').value = address;\n  document.getElementById('userProfilePhoneNumber').value = phoneNumber;\n  document.getElementById('userProfileEmail').value = email;\n  document.getElementById('userProfileDate Of Birth').value = dateOfBirth;\n  document.getElementById('userProfileStateOfOrigin').value = stateOfOrigin;\n  document.getElementById('userProfilelga').value = lga;\n  document.getElementById('userProfileAccountType').value = accountType;\n  document.getElementById('userProfileServicePermission').value = servicePermission === 'BOTH' ? 'POS & SALES' : servicePermission;\n  document.getElementById('userProfileBusinessName').value = businessName;\n  (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideGlobalLoader)();\n  bindUpdateProfileFormListener();\n  bindChangePasswordFormListener();\n}\nfunction bindUpdateProfileFormListener() {\n  const form = document.querySelector('#profile-form');\n  if (!form) return;\n  if (form) {\n    form.addEventListener('submit', async function (e) {\n      e.preventDefault();\n      const userId = form.dataset.userId;\n      if (!userId) {\n        showToast('fail', '❎ No Profile selected for update.');\n        return;\n      }\n      const userProfileFirstName = document.getElementById('userProfileFirstName').value;\n      const userProfileLastName = document.getElementById('userProfileLastName').value;\n      const userProfileAddress = document.getElementById('userProfileAddress').value;\n      const userProfilePhoneNumber = document.getElementById('userProfilePhoneNumber').value;\n      const updateProfileDetails = {\n        firstName: userProfileFirstName,\n        lastName: userProfileLastName,\n        address: userProfileAddress,\n        phoneNumber: userProfilePhoneNumber\n      };\n\n      // console.log(\n      //   'Updating Profile Detail with:',\n      //   updateProfileDetails,\n      //   userId\n      // );\n\n      const updateProfileModalBtn = document.querySelector('.updateProfileModalBtn');\n      try {\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.showBtnLoader)(updateProfileModalBtn);\n        const updatedProfileData = await (0,_apiServices_user_userResource_js__WEBPACK_IMPORTED_MODULE_6__.updateUserProfile)(updateProfileDetails);\n\n        //   Update LocalStorage\n        const currentUser = JSON.parse(localStorage.getItem('userData'));\n        const updatedUser = {\n          ...currentUser,\n          firstName: updatedProfileData.data.user.firstName,\n          lastName: updatedProfileData.data.user.lastName,\n          phoneNumber: updatedProfileData.data.user.phoneNumber,\n          address: updatedProfileData.data.user.address\n        };\n        localStorage.setItem('userData', JSON.stringify(updatedUser));\n\n        // Immediately reflect name update in UI\n        const userNameDisplay = document.querySelector('.user-name');\n        if (userNameDisplay) {\n          if (userNameDisplay) userNameDisplay.textContent = updatedUser.firstName;\n        }\n        if (!updatedProfileData) {\n          console.error('fail', updatedProfileData.message);\n          return;\n        }\n        closeModal();\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideBtnLoader)(updateProfileModalBtn);\n        //   hideGlobalLoader();\n      } catch (err) {\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideBtnLoader)(updateProfileModalBtn);\n        console.error('Error Updating Profile:', err);\n        showToast('fail', `❎ ${err.message}`);\n        return;\n      }\n    });\n  }\n}\n\n// Change Passeord (Profile) Logic\n\nfunction bindChangePasswordFormListener() {\n  const form = document.querySelector('#updatePassword-form');\n  if (!form) return;\n  document.getElementById('newPassword').addEventListener('input', () => {\n    const newPassword = document.getElementById('newPassword');\n    const lengthError = document.getElementById('password-length');\n    if (newPassword.value.length < 6) {\n      lengthError.textContent = 'Password must be at least 6 characters.';\n      lengthError.style.display = 'block';\n    } else {\n      lengthError.style.display = 'none';\n    }\n  });\n  document.getElementById('confirmNewPassword').addEventListener('input', () => {\n    const newPassword = document.getElementById('newPassword').value;\n    const confirmPassword = document.getElementById('confirmNewPassword').value;\n    const mismatchError = document.getElementById('password-mismatch');\n    if (confirmPassword && confirmPassword !== newPassword) {\n      mismatchError.textContent = 'Passwords do not match.';\n      mismatchError.style.display = 'block';\n    } else {\n      mismatchError.style.display = 'none';\n    }\n  });\n  document.getElementById('newPassword').addEventListener('input', () => {\n    const current = document.getElementById('currentPassword').value;\n    const newPass = document.getElementById('newPassword').value;\n    const samePassword = document.getElementById('same-password');\n    if (current && current === newPass) {\n      samePassword.textContent = ' New password cannot be the same as current password.';\n      samePassword.style.display = 'block';\n    } else {\n      samePassword.style.display = 'none';\n    }\n  });\n  if (form) {\n    form.addEventListener('submit', async function (e) {\n      e.preventDefault();\n      const currentPassword = form.querySelector('#currentPassword').value.trim();\n      const newPassword = form.querySelector('#newPassword').value.trim();\n      const confirmNewPassword = form.querySelector('#confirmNewPassword').value.trim();\n\n      // 🔁 FINAL VALIDATIONS\n      if (!currentPassword || !newPassword || !confirmNewPassword) {\n        showToast('fail', '❎ Please fill in all password fields.');\n        return;\n      }\n      if (newPassword.length < 6) {\n        showToast('fail', '❎ New password must be at least 6 characters.');\n        return;\n      }\n      if (newPassword !== confirmNewPassword) {\n        showToast('fail', '❎ New password and confirmation do not match.');\n        return;\n      }\n      if (currentPassword === newPassword) {\n        showToast('fail', '❎ New password must be different from current password.');\n        return;\n      }\n      const userId = form.dataset.userId;\n      if (!userId) {\n        showToast('fail', '❎ No Profile selected for update.');\n        return;\n      }\n\n      // Passed all checks — proceed\n      const changePasswordDetails = {\n        currentPassword,\n        newPassword,\n        confirmPassword: confirmNewPassword\n      };\n\n      // console.log(\n      //   'Changing Password Detail with:',\n      //   changePasswordDetails,\n      //   userId\n      // );\n\n      const updatePasswordSubmitBtn = document.querySelector('.updatePasswordSubmitBtn');\n      try {\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.showBtnLoader)(updatePasswordSubmitBtn);\n        const updatedProfilePasswordData = await (0,_apiServices_user_userResource_js__WEBPACK_IMPORTED_MODULE_6__.updateUserProfilePassword)(changePasswordDetails);\n        if (!updatedProfilePasswordData) {\n          console.error('fail', updatedProfilePasswordData.message);\n          return;\n        }\n        closeModal();\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideBtnLoader)(updatePasswordSubmitBtn);\n        //   hideGlobalLoader();\n      } catch (err) {\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideBtnLoader)(updatePasswordSubmitBtn);\n        console.error('Error Updating Profile:', err);\n        showToast('fail', `❎ ${err.message}`);\n        return;\n      }\n    });\n  }\n}\nfunction openStaffBusinessDayModal() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const openStaffBusinessDayContainer = document.querySelector('.openStaffBusinessDay');\n  if (openStaffBusinessDayContainer) openStaffBusinessDayContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n}\nfunction openAdminBusinessDayModal() {\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  const openAdminBusinessDayContainer = document.querySelector('.openAdminBusinessDay');\n  if (openAdminBusinessDayContainer) openAdminBusinessDayContainer.classList.add('active');\n  if (main) main.classList.add('blur');\n  if (sidebar) sidebar.classList.add('blur');\n}\nconst adminBusinessDayContainer = document.querySelector('.adminBusinessDayContainer');\nif (isAdmin && adminBusinessDayContainer) {\n  async function loadShopDropdown() {\n    try {\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.showGlobalLoader)();\n      const {\n        enrichedShopData\n      } = await (0,_apiServices_shop_shopResource_js__WEBPACK_IMPORTED_MODULE_4__.checkAndPromptCreateShop)();\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.populateBusinessShopDropdown)(enrichedShopData, 'businessDayShopDropdown');\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.populateBusinessShopDropdown)(enrichedShopData, 'adminDepositposCapitalShopDropdown');\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.populateBusinessShopDropdown)(enrichedShopData, 'closeBusinessDayShopDropdown');\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideGlobalLoader)();\n    } catch (err) {\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideGlobalLoader)();\n      console.error('Failed to load dropdown:', err.message);\n    }\n  }\n  loadShopDropdown();\n}\nasync function renderBusinessDayButtons() {\n  const businessInitBtnDiv = document.querySelector('.businessInitBtnDiv');\n\n  //   console.log(isStaff ? shopId : '');\n\n  if (isStaff) {\n    const businessDay = await (0,_apiServices_pos_posResources_js__WEBPACK_IMPORTED_MODULE_8__.getCurrentBusinessDay)(isStaff ? shopId : '');\n    console.log('new Business Day:', businessDay.data);\n    if (!businessInitBtnDiv) return;\n    businessInitBtnDiv.innerHTML = ''; // Clear current buttons\n\n    if (businessDay.data === false || businessDay.data === null || businessDay.success === false) {\n      const openBusinessDayBtn = document.createElement('button');\n      openBusinessDayBtn.classList.add('openBusinessDayBtn', 'businessInitBtn');\n      openBusinessDayBtn.id = 'openBusinessDayBtn';\n      openBusinessDayBtn.innerText = 'Open Business Day';\n      businessInitBtnDiv.appendChild(openBusinessDayBtn);\n      document.querySelector('#openBusinessDayBtn')?.addEventListener('click', openStaffBusinessDayModal);\n      openStaffBusinessDayModal();\n    } else if (businessDay.success === null) {\n      // fallback\n      businessInitBtnDiv.innerHTML = `\n    <p class=\"text-danger\">⚠️ Failed to fetch business day status. Please refresh or try again later.</p>\n  `;\n    } else {\n      businessInitBtnDiv.innerHTML = `\n      <button class=\"hero-btn-danger closeBusinessDayModal mb-0\" id=\"closeBusinessDayModal\">Close Business Day</button>\n      <button class=\"depositPosCapitalBtn businessInitBtn\" id=\"depositPosCapitalBtn\">Deposit POS Capital</button>\n    `;\n      setupModalCloseButtons();\n      document.querySelector('#depositPosCapitalBtn')?.addEventListener('click', _apiServices_pos_posResources_js__WEBPACK_IMPORTED_MODULE_8__.openDepositPosCapitalModal);\n      document.querySelector('#closeBusinessDayModal')?.addEventListener('click', _apiServices_pos_posResources_js__WEBPACK_IMPORTED_MODULE_8__.openCloseBusinessDayModal);\n      (0,_apiServices_account_accountOverview_js__WEBPACK_IMPORTED_MODULE_9__.initAccountOverview)();\n    }\n    //   else if (businessDay.data.status === 'closed')\n    //    businessInitBtnDiv.innerHTML = `\n    //   <button class=\"viewSummaryBtn businessInitBtn\" id=\"viewSummaryBtn\">📊 View Business Day Summary</button>\n    // `;\n\n    //   }\n\n    // Update Opening Cash Input - Cash in Machine\n    const openingCash = businessDay?.data?.opening_cash || 0;\n    (0,_apiServices_account_accountOverview_js__WEBPACK_IMPORTED_MODULE_9__.updateCashInMachineUI)(openingCash);\n  }\n  if (isAdmin) {\n    if (!businessInitBtnDiv) return;\n    businessInitBtnDiv.innerHTML = `\n    <button class=\"businessInitBtn\" id=\"openBusinessDayBtn\">Open Business Day</button>\n\n    <button class=\"businessInitBtn\" id=\"depositPosCapitalBtn\">Deposit POS Capital</button>\n\n    <button class=\" hero-btn-danger adminCloseBusinessDayModal  \" id=\"adminCloseBusinessDayModal\">Close Business Day</button>\n\n  `;\n    document.querySelector('#openBusinessDayBtn')?.addEventListener('click', openAdminBusinessDayModal);\n    document.querySelector('#adminCloseBusinessDayModal')?.addEventListener('click', _apiServices_pos_posResources_js__WEBPACK_IMPORTED_MODULE_8__.openAdminCloseBusinessDayModal);\n    document.querySelector('#depositPosCapitalBtn')?.addEventListener('click', _apiServices_pos_posResources_js__WEBPACK_IMPORTED_MODULE_8__.openAdminDepositPosCapitalModal);\n    setupModalCloseButtons();\n    (0,_apiServices_account_accountOverview_js__WEBPACK_IMPORTED_MODULE_9__.initAccountOverview)();\n  }\n  //   else if (businessDay.data.status === 'closed')\n  //    businessInitBtnDiv.innerHTML = `\n  //   <button class=\"viewSummaryBtn businessInitBtn\" id=\"viewSummaryBtn\">📊 View Business Day Summary</button>\n  // `;\n\n  //   }\n}\ndocument.addEventListener('DOMContentLoaded', async () => {\n  // isUserLoggedIN() is a conditional functions used for functions that needs to run automatically - it basically checks if the user is logged in before it fetchs. It is present in the helper.js file\n\n  if (!(0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.isUserLoggedIn)()) {\n    //  console.log('User not logged in. Skipping business day check.');\n    return;\n  }\n  if (isStaff || isAdmin) {\n    await renderBusinessDayButtons();\n  }\n});\n\n// Function to Open Business Day - Added to script.js because of scope.\n\nfunction bindOpenBusinessDayFormListener() {\n  const form = isAdmin ? document.querySelector('.adminBusinessDayContainer') : document.querySelector('.staffBusinessDayContainer');\n  if (!form) return;\n  if (form) {\n    form.addEventListener('submit', async function (e) {\n      e.preventDefault();\n      const businessDayShopDropdown = document.querySelector('#businessDayShopDropdown');\n      const openingCashAmount = isAdmin ? document.querySelector('#adminOpenCashAmount') : document.querySelector('#openCashAmount');\n      const openingNotes = isAdmin ? document.querySelector('#adminOpeningNotes').value : document.querySelector('#openingNotes').value;\n      const openPosCapitalAmount = isAdmin ? document.querySelector('#adminOpenPosCapitalAmount') : document.querySelector('#openPosCapitalAmount');\n      const openBusinessDayDetails = {\n        shopId: isAdmin ? Number(businessDayShopDropdown.value) : Number(shopId),\n        openingCash: Number((0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.getAmountForSubmission)(openingCashAmount)),\n        notes: openingNotes\n      };\n      const posCapitalDetails = {\n        shopId: isAdmin ? Number(businessDayShopDropdown.value) : Number(shopId),\n        amount: Number((0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.getAmountForSubmission)(openPosCapitalAmount))\n      };\n\n      // console.log('Opening Business Day with:', openBusinessDayDetails);\n      // console.log('Depositing POS Capital with:', posCapitalDetails);\n      const submitPosCapital = document.querySelector('.submitPosCapital');\n      try {\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.showGlobalLoader)();\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.showBtnLoader)(submitPosCapital);\n        const openBusinessDayData = await (0,_apiServices_pos_posResources_js__WEBPACK_IMPORTED_MODULE_8__.openBusinessDay)(openBusinessDayDetails);\n\n        //   if (!openBusinessDayData) {\n        //     showToast('fail', openBusinessDayData.message);\n        //     return;\n        //   }\n\n        //   const shopId = Number(inventoryShopDropdown);\n\n        if (!openBusinessDayData) {\n          showToast('fail', openBusinessDayData.message);\n          //  hideGlobalLoader();\n          return;\n        }\n\n        //   console.log('Adding Products with:', addProductDetails);\n\n        try {\n          const posCapitalDepositData = await (0,_apiServices_pos_posResources_js__WEBPACK_IMPORTED_MODULE_8__.addPosCapital)(posCapitalDetails);\n          if (posCapitalDepositData) {\n            showToast('success', `✅ ${posCapitalDepositData.message}`);\n            closeModal();\n            (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.clearFormInputs)();\n            await (0,_apiServices_pos_posResources_js__WEBPACK_IMPORTED_MODULE_8__.getCurrentBusinessDay)(shopId);\n            await renderBusinessDayButtons();\n            (0,_apiServices_account_accountOverview_js__WEBPACK_IMPORTED_MODULE_9__.initAccountOverview)();\n            // hideGlobalLoader();\n          }\n        } catch (posCapitalDepositDataErr) {\n          showToast('fail', `❎ ${posCapitalDepositDataErr.message || 'Failed to Add posCapitalDeposit'}`);\n          console.error('Error During posCapitalDeposit Adding:', posCapitalDepositDataErr.message);\n          //  hideGlobalLoader();\n        }\n        showToast('success', `✅ ${openBusinessDayData.message}`);\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideBtnLoader)(submitPosCapital);\n        //   hideGlobalLoader();\n      } catch (err) {\n        console.error('Error Creating product:', err);\n        showToast('fail', `❎ ${err.message}`);\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideGlobalLoader)();\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideBtnLoader)(submitPosCapital);\n        return;\n      } finally {\n        // closeModal()\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideBtnLoader)(submitPosCapital);\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideGlobalLoader)();\n        //   initAccountOverview();\n        renderBusinessDayButtons();\n      }\n    });\n  }\n}\nfunction openBusinessDayForm() {\n  const form = isAdmin ? document.querySelector('.adminBusinessDayContainer') : document.querySelector('.staffBusinessDayContainer');\n  if (!form) return;\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n  bindOpenBusinessDayFormListener(); // Only once\n});\n\n// Function to deposit POS Capital - Added to script.js because of scope.\n\nfunction bindDepositPosCapitalFormListener() {\n  const form = isAdmin ? document.querySelector('.adminDepositPosCapitalModal') : document.querySelector('.staffDepositPosCapitalModal');\n  if (!form) return;\n  if (form) {\n    form.addEventListener('submit', async function (e) {\n      e.preventDefault();\n      const adminDepositposCapitalShopDropdown = document.querySelector('#adminDepositposCapitalShopDropdown').value;\n      const posDepositAmount = isAdmin ? document.querySelector('#adminPosCapitalAmount') : document.querySelector('#posCapitalAmount');\n      const posCapitalDetails = {\n        shopId: isAdmin ? adminDepositposCapitalShopDropdown : shopId,\n        amount: Number((0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.getAmountForSubmission)(posDepositAmount))\n      };\n\n      // console.log('Sending POS Capital with:', posCapitalDetails);\n      const submitPosCapital = document.querySelector('.submitPosCapital');\n      try {\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.showBtnLoader)(submitPosCapital);\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.showGlobalLoader)();\n        const addPosCapitalData = await (0,_apiServices_pos_posResources_js__WEBPACK_IMPORTED_MODULE_8__.addPosCapital)(posCapitalDetails);\n        if (addPosCapitalData) {\n          //  initAccountOverview();\n          showToast('success', `✅ ${addPosCapitalData.message}`);\n          closeModal();\n        }\n\n        // closeModal(); // close modal after success\n      } catch (err) {\n        console.error('Error adding POS Capital:', err.message);\n        showToast('fail', `❎ ${err.message}`);\n      } finally {\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideBtnLoader)(submitPosCapital);\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideGlobalLoader)();\n      }\n    });\n  }\n}\nfunction depositPosCapitalForm() {\n  const form = isAdmin ? document.querySelector('.adminDepositPosCapitalModal') : document.querySelector('.staffDepositPosCapitalModal');\n  if (!form) return;\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n  bindDepositPosCapitalFormListener(); // Only once\n});\n\n// Close Business Day\n\nfunction bindCloseBusinessDayFormListener() {\n  const form = isAdmin ? document.querySelector('.adminCloseBusinessDayContainer') : document.querySelector('.staffCloseBusinessDayContainer');\n  if (!form) return;\n  const cancelCloseBusinessDayBtn = isAdmin ? document.querySelector('.adminCancel-close') : document.querySelector('.cancel-close');\n  if (cancelCloseBusinessDayBtn) cancelCloseBusinessDayBtn.addEventListener('click', e => {\n    e.preventDefault();\n    closeModal();\n  });\n  if (form) {\n    form.addEventListener('submit', async function (e) {\n      e.preventDefault();\n      const closingCashAmount = document.getElementById(isAdmin ? 'adminClosingCashAmount' : 'closingCashAmount');\n      const closeBusinessDayShopDropdown = document.getElementById('closeBusinessDayShopDropdown').value;\n      const closeBusinessDayDetails = {\n        shopId: isAdmin ? closeBusinessDayShopDropdown : shopId,\n        closingCash: Number((0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.getAmountForSubmission)(closingCashAmount))\n      };\n\n      // console.log('Closing Business Day with:', closeBusinessDayDetails);\n      const closeBusinessDayBtn = document.querySelector('.closeBusinessDayBtn');\n\n      // console.log(closeBusinessDayBtn);\n\n      try {\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.showBtnLoader)(closeBusinessDayBtn);\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.showGlobalLoader)();\n        const closeBusinessDayData = await (0,_apiServices_pos_posResources_js__WEBPACK_IMPORTED_MODULE_8__.closeBusinessDay)(closeBusinessDayDetails);\n        if (closeBusinessDayData) {\n          //  initAccountOverview();\n          showToast('success', `✅ ${closeBusinessDayData.message}`);\n          closeModal();\n          (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideBtnLoader)(closeBusinessDayBtn);\n          (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideGlobalLoader)();\n          await renderBusinessDayButtons();\n        }\n        closeModal(); // close modal after success\n      } catch (err) {\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideBtnLoader)(closeBusinessDayBtn);\n        (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideGlobalLoader)();\n        console.error('Error Closing Business Day:', err.message);\n        showToast('fail', `❎ ${err.message}`);\n      }\n    });\n  }\n}\nfunction closeBusinessDayForm() {\n  const form = isAdmin ? document.querySelector('.adminCloseBusinessDayContainer') : document.querySelector('.staffCloseBusinessDayContainer');\n  if (!form) return;\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n  bindCloseBusinessDayFormListener(); // Only once\n});\n\n// JS For Modal\n\nconst main = document.querySelector('.main');\nconst sidebar = document.querySelector('.sidebar');\nconst closeModalButton = document.querySelectorAll('.closeModal');\ncloseModalButton.forEach(closeButton => {\n  closeButton.addEventListener('click', function () {\n    closeModal();\n  });\n});\nfunction closeModal() {\n  const depositPosCapitalContainer = document.querySelector('.depositPosCapital');\n  const createShop = document.querySelector('.createShop');\n  const addUser = document.querySelector('.addUser');\n  const adminUpdateUserData = document.querySelector('.adminUpdateUserData');\n  const adminUpdateShopData = document.querySelector('.adminUpdateShopData');\n  const staffManage = document.querySelector('.staffManage');\n  const addPosCharge = document.querySelector('.addPosCharge');\n  const addMachineFee = document.querySelector('.addMachineFees');\n  const addCategory = document.querySelector('.addCategory');\n  const addProduct = document.querySelector('.addProduct');\n  const updateProduct = document.querySelector('.updateProduct');\n  const openAdminBusinessDay = document.querySelector('.openAdminBusinessDay');\n  const openStaffBusinessDay = document.querySelector('.openStaffBusinessDay');\n  const closeBusinessDay = document.querySelector('.closeBusinessDay');\n  const adminCloseBusinessDay = document.querySelector('.adminCloseBusinessDay');\n  const adminDepositPosCapital = document.querySelector('.adminDepositPosCapital');\n  const adminUpdateBusinessData = document.querySelector('.adminUpdateBusinessData');\n  const updateCategory = document.querySelector('.updateCategory');\n  const saleDetails = document.querySelector('.saleDetails');\n  if (depositPosCapitalContainer) {\n    depositPosCapitalContainer.classList.remove('active');\n  }\n  if (createShop) {\n    createShop.classList.remove('active');\n  }\n  if (addUser) {\n    addUser.classList.remove('active');\n  }\n  if (adminUpdateUserData) {\n    adminUpdateUserData.classList.remove('active');\n    delete adminUpdateUserData.dataset.staffId;\n  }\n  if (adminUpdateShopData) {\n    adminUpdateShopData.classList.remove('active');\n    delete adminUpdateShopData.dataset.staffId;\n  }\n  if (staffManage) {\n    staffManage.classList.remove('active');\n    delete staffManage.dataset.staffId;\n  }\n  if (addPosCharge) {\n    addPosCharge.classList.remove('active');\n    //  delete addPosCharge.dataset.staffId;\n  }\n  if (addMachineFee) {\n    addMachineFee.classList.remove('active');\n    //  delete addMachineFee.dataset.staffId;\n  }\n  if (addCategory) {\n    addCategory.classList.remove('active');\n    //  delete addCategory.dataset.staffId;\n  }\n  if (addProduct) {\n    addProduct.classList.remove('active');\n    //  delete addProduct.dataset.staffId;\n  }\n  if (updateProduct) {\n    updateProduct.classList.remove('active');\n    //  delete updateProduct.dataset.staffId;\n  }\n  if (openStaffBusinessDay) {\n    openStaffBusinessDay.classList.remove('active');\n    //  delete openStaffBusinessDay.dataset.staffId;\n  }\n  if (openAdminBusinessDay) {\n    openAdminBusinessDay.classList.remove('active');\n    //  delete openAdminBusinessDay.dataset.staffId;\n  }\n  if (closeBusinessDay) {\n    closeBusinessDay.classList.remove('active');\n    //  delete closeBusinessDay.dataset.staffId;\n  }\n  if (adminCloseBusinessDay) {\n    adminCloseBusinessDay.classList.remove('active');\n    //  delete adminCloseBusinessDay.dataset.staffId;\n  }\n  if (adminDepositPosCapital) {\n    adminDepositPosCapital.classList.remove('active');\n    //  delete adminDepositPosCapital.dataset.staffId;\n  }\n  if (adminUpdateBusinessData) {\n    adminUpdateBusinessData.classList.remove('active');\n  }\n  if (updateCategory) {\n    updateCategory.classList.remove('active');\n  }\n  if (saleDetails) {\n    saleDetails.classList.remove('active');\n  }\n  (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.clearFormInputs)();\n  main.classList.remove('blur');\n  if (sidebar) sidebar.classList.remove('blur');\n  main.classList.remove('no-scroll');\n}\n\n// JS for Date of Birth Input\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (flatpickr__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n    (0,flatpickr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])('#dateOfBirth', {\n      dateFormat: 'Y-m-d',\n      allowInput: true,\n      // Enable input so validation works\n      onReady: function (selectedDates, dateStr, instance) {\n        const el = instance.element;\n\n        // Prevent user typing but keep field focusable & validatable\n        el.onkeydown = el.onkeypress = el.onkeyup = function (e) {\n          e.preventDefault();\n        };\n        el.onpaste = function (e) {\n          e.preventDefault();\n        };\n        el.style.caretColor = 'transparent'; // Hide text cursor\n        el.style.cursor = 'pointer'; // UI/UX feedback\n        el.style.backgroundColor = '#f7f7f7'; // Optional style\n      }\n    });\n  }\n});\n\n// // JS for Business ID Generation\n// export function generateBusinessId(length = 10) {\n//   const chars =\n//     'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n//   let id = '';\n//   for (let i = 0; i < length; i++) {\n//     id += chars.charAt(Math.floor(Math.random() * chars.length));\n//   }\n//   return id;\n// }\n\n// JS to generate numeric Business Owner ID (e.g., random number from 1000000000 to 9999999999)\nfunction generateBusinessOwnerId(length = 8) {\n  let id = '';\n  for (let i = 0; i < length; i++) {\n    id += Math.floor(Math.random() * 10); // Generates a digit (0-9)\n  }\n  return id;\n}\n\n// Redirect Helper function\nfunction redirectWithDelay(message, redirectedPage, delay) {\n  setTimeout(() => {\n    showToast('info', ` 👍Redirecting to ${message}...`);\n    setTimeout(() => {\n      window.location.href = `${redirectedPage}`;\n    }, delay); // delay = 0000\n  }, 3000); // 3 seconds delay before showing the toast message\n}\n\n// Functioin to check if user is logged in\nconst token = localStorage.getItem('accessToken');\n\n// Normalize current page name from pathname\n// const currentPage = window.location.pathname.toLowerCase();\n\n// Llist of all  public/auth pages & check if on auth page\nconst authPages = ['login', 'signup', 'createbusiness'];\nconst onAuthPage = authPages.some(page => currentPage.includes(page));\n\n// If token exists and user is on an auth page, redirect to index\nif (token && onAuthPage) {\n  window.location.href = 'index.html';\n  //   console.log('go to index.html because token exists and onAuthPage is true');\n}\nif (!token) {\n  if (!onAuthPage) {\n    window.location.href = 'login.html';\n    //  console.log('!onAuthPage');\n  } else {\n    // If you're already on an auth page, don't redirect again\n    //  console.log('On auth page, no token, staying put.');\n  }\n}\n\n// Logout Function\nconst logoutButton = document.querySelector('.logoutButton');\nif (logoutButton) {\n  logoutButton.addEventListener('click', async () => {\n    await handleLogout(); // manual logout\n  });\n}\nasync function handleLogout(auto = false) {\n  try {\n    await (0,_apiServices_login__WEBPACK_IMPORTED_MODULE_3__.logoutUser)(); // logs out via API\n\n    // Clear tokens and user data\n    localStorage.removeItem('accessToken');\n    localStorage.removeItem('userData');\n    localStorage.removeItem(shopKey);\n\n    // Optional feedback\n    if (auto) {\n      showToast('info', '⚠️ Your session has expired.');\n    } else {\n      showToast('success', '✅ Logging Out...');\n    }\n\n    // Redirect to login\n    setTimeout(() => {\n      window.location.href = 'login.html';\n    }, 1000);\n  } catch (error) {\n    showToast('fail', `❎ ${error.message}`);\n    console.error('Logout failed:', error.message);\n  }\n}\n// if (logoutButton) {\n//   logoutButton.addEventListener('click', function () {\n//     logoutUser()\n//       .then((data) => {\n//         localStorage.removeItem('accessToken');\n//         localStorage.removeItem('userData');\n\n//         showToast('success', '✅ Logging Out...!');\n//         setTimeout(() => {\n//           window.location.href = 'login.html'; // Redirect to login page\n//           //  console.log('Logout Button');\n//         }, 1000);\n//       })\n//       .catch((data) => {\n//         showToast('fail', `❎ ${data.message}`);\n//         console.error('❎ Failed to logout:', data.message);\n//       });\n//   });\n// }\n\nfunction checkIfTokenExpiredDaily() {\n  const savedDate = localStorage.getItem('loginDate');\n  const today = new Date().toISOString().split('T')[0];\n\n  //   console.log(today);\n\n  //   console.log('checkIfTokenExpiredDaily is reached');\n\n  if (savedDate && savedDate !== today) {\n    (0,_apiServices_login__WEBPACK_IMPORTED_MODULE_3__.logoutUser)().finally(() => {\n      localStorage.clear();\n      window.location.href = 'login.html';\n      console.log('savedDate && savedDate !== today');\n    });\n  }\n}\ncheckIfTokenExpiredDaily();\n\n//  JS for DOM Manioulation and Dynamic data e.g.\nconst userNameDisplay = document.querySelector('.user-name');\nconst businessNameDisplay = document.querySelector('.business-name');\nconst posDepositButton = document.querySelector('.depositPosCapitalBtn');\nconst sellIndexTab = document.getElementById('sellIndexTab');\nconst posIndexTab = document.getElementById('posIndexTab');\nconst reportIndexTab = document.getElementById('reportIndexTab');\nconst manageIndexTab = document.getElementById('manageIndexTab');\nconst sellNav = document.getElementById('sellNav');\nconst posNav = document.getElementById('posNav');\nconst reportsNav = document.getElementById('reportsNav');\nconst manageNav = document.getElementById('manageNav');\n\n// Stop everything if no user is logged in\nif (!userData) {\n  //   console.log('❎❎❎❎ No user data found in localStorage');\n} else {\n  //    User Name\n  if (userNameDisplay) {\n    if (userNameDisplay) userNameDisplay.textContent = parsedUserData.firstName;\n  }\n\n  // Business Name display\n  if (userNameDisplay) {\n    if (businessNameDisplay) businessNameDisplay.textContent = parsedUserData.businessName;\n  }\n\n  // Account Type - services display\n\n  // Extract only the current page name (without .html or parameters)\n  const currentPath = window.location.pathname;\n  const currentPageName = currentPath.substring(currentPath.lastIndexOf('/') + 1).replace('.html', '').split('?')[0];\n\n  //   if (parsedUserData.accountType === 'ADMIN') {\n  //     if (sellIndexTab) sellIndexTab.style.display = 'none';\n  //     if (posIndexTab) posIndexTab.style.display = 'none';\n  //     if (posNav) posNav.style.display = 'none';\n  //     if (sellNav) sellNav.style.display = 'none';\n\n  //     if (reportIndexTab) reportIndexTab.style.display = 'block';\n  //     if (manageIndexTab) manageIndexTab.style.display = 'block';\n  //     if (reportsNav) reportsNav.style.display = 'block';\n  //     if (manageNav) manageNav.style.display = 'block';\n\n  //     if (posDepositButton) posDepositButton.style.display = 'none';\n\n  //     //  List of pages not open to admin\n  //     const restrictedAdminPages = ['pos', 'sell'];\n\n  //     if (restrictedAdminPages.includes(currentPageName)) {\n  //       window.location.href = 'index.html';\n  //     }\n\n  //     //  const isOnRestrictedAdminPage = RestrictedAdminPage.some((page) =>\n  //     //    currentPage.includes(page)\n  //     //  );\n\n  //     //  // If admin is on a protected page, redirect to login\n  //     //  if (isOnRestrictedAdminPage) {\n  //     //    window.location.href = 'index.html';\n  //     //  }\n  //   }\n\n  if (parsedUserData.accountType === 'STAFF') {\n    if (sellIndexTab) sellIndexTab.style.display = 'block';\n    if (posIndexTab) posIndexTab.style.display = 'block';\n    if (reportIndexTab) reportIndexTab.style.display = 'block';\n    if (sellNav) sellNav.style.display = 'block';\n    if (posNav) posNav.style.display = 'block';\n    if (reportsNav) reportsNav.style.display = 'block';\n    if (manageIndexTab) manageIndexTab.style.display = 'none';\n    if (manageNav) manageNav.style.display = 'none';\n    if (posDepositButton) posDepositButton.style.display = 'block';\n\n    //  List of pages not open to Staff\n\n    const restrictedStaffPages = ['manage', 'staff-profile', 'pos-management', 'shop-management', 'inventory'];\n    if (restrictedStaffPages.includes(currentPageName)) {\n      window.location.href = 'index.html';\n    }\n\n    //  const isOnRestrictedStaffPage = restrictedStaffPage.some((page) =>\n    //    currentPage.includes(page)\n    //  );\n\n    //  // If Staff is on a protected page, redirect to login\n    //  if (isOnRestrictedStaffPage) {\n    //    window.location.href = 'index.html';\n    //  }\n  }\n}\nif (isAdmin) {\n  document.addEventListener('DOMContentLoaded', () => {\n    // Setup for Shops\n    (0,_apiServices_shop_shopResource_js__WEBPACK_IMPORTED_MODULE_4__.setupCreateShopForm)();\n    setupModalCloseButtons();\n    document.querySelector('#openShopModalBtn')?.addEventListener('click', _apiServices_shop_shopResource_js__WEBPACK_IMPORTED_MODULE_4__.openCreateShopModal);\n    if (userData) {\n      (0,_apiServices_shop_shopResource_js__WEBPACK_IMPORTED_MODULE_4__.checkAndPromptCreateShop)();\n    }\n\n    // Setup for Staff\n    (0,_staff_js__WEBPACK_IMPORTED_MODULE_10__.setupCreateStaffForm)();\n    document.querySelector('#openStaffModalBtn')?.addEventListener('click', _apiServices_user_userResource_js__WEBPACK_IMPORTED_MODULE_6__.openCreateStaffModal);\n    if (userData) {\n      (0,_apiServices_user_userResource_js__WEBPACK_IMPORTED_MODULE_6__.checkAndPromptCreateStaff)();\n    }\n\n    //Admin api calls\n    //  getPosChargeSettings();\n    //  getPosMachineFeesettings();\n    //  getProductCategories();\n    //  getProductInventory();\n  });\n}\nfunction setupModalCloseButtons() {\n  const closeModalButtons = document.querySelectorAll('.closeModal');\n  const createShopContainer = document.querySelector('.createShop');\n  const updateShopContainer = document.querySelector('.adminUpdateShopData');\n  const addPosChargeContainer = document.querySelector('.addPosCharge');\n  const addMachineFeesContainer = document.querySelector('.addMachineFees');\n  const addProductCategoryContainer = document.querySelector('.addCategory');\n  const addProductContainer = document.querySelector('.addProduct');\n  const updateProductContainer = document.querySelector('.updateProduct');\n  const createStaffContainer = document.querySelector('.addUser');\n  const updateStaffContainer = document.querySelector('.adminUpdateUserData');\n  const main = document.querySelector('.main');\n  const sidebar = document.querySelector('.sidebar');\n  closeModalButtons.forEach(btn => {\n    btn.addEventListener('click', () => {\n      if (createShopContainer) createShopContainer.classList.remove('active');\n      if (updateShopContainer) updateShopContainer.classList.remove('active');\n      if (addPosChargeContainer) addPosChargeContainer.classList.remove('active');\n      if (addMachineFeesContainer) addMachineFeesContainer.classList.remove('active');\n      if (addProductCategoryContainer) addProductCategoryContainer.classList.remove('active');\n      if (addProductContainer) addProductContainer.classList.remove('active');\n      if (updateProductContainer) updateProductContainer.classList.remove('active');\n      if (createStaffContainer) createStaffContainer.classList.remove('active');\n      if (updateStaffContainer) updateStaffContainer.classList.remove('active');\n      if (main) main.classList.remove('blur');\n      if (sidebar) sidebar.classList.remove('blur');\n    });\n  });\n}\n\n// function to Use business info to fill in the Create Shop Form\nconst useBusinessInfoCheckbox = document.querySelector('#useBusinessInfo');\nif (useBusinessInfoCheckbox) {\n  useBusinessInfoCheckbox.addEventListener('change', async function () {\n    const shopNameInput = document.querySelector('#shopName');\n    const shopAddressInput = document.querySelector('#shopAddress');\n    const serviceTypeCheckboxes = document.querySelectorAll('input[name=\"serviceType\"]');\n    if (useBusinessInfoCheckbox.checked) {\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.showGlobalLoader)();\n      const businessData = await (0,_apiServices_business_businessResource_js__WEBPACK_IMPORTED_MODULE_5__.fetchBusinessDetails)();\n      shopNameInput.value = businessData.data.business_name || '';\n      shopAddressInput.value = businessData.data.address || '';\n\n      // Clear all checkboxes first\n      serviceTypeCheckboxes.forEach(checkbox => checkbox.checked = false);\n\n      // Match and check the appropriate checkbox\n      const serviceType = businessData.data.business_type;\n      const matchedCheckbox = [...serviceTypeCheckboxes].find(checkbox => checkbox.value === serviceType);\n      if (matchedCheckbox) matchedCheckbox.checked = true;\n      (0,_helper_helper_js__WEBPACK_IMPORTED_MODULE_7__.hideGlobalLoader)();\n    } else {\n      // Clear inputs and checkboxes\n      shopNameInput.value = '';\n      shopAddressInput.value = '';\n      serviceTypeCheckboxes.forEach(checkbox => checkbox.checked = false);\n    }\n  });\n}\n\n//# sourceURL=webpack://posbok/./JS/script.js?");

/***/ }),

/***/ "./JS/shops.js":
/*!*********************!*\
  !*** ./JS/shops.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initUpdateShopFormListener: () => (/* binding */ initUpdateShopFormListener),\n/* harmony export */   populateShopsTable: () => (/* binding */ populateShopsTable),\n/* harmony export */   setupUpdateShopForm: () => (/* binding */ setupUpdateShopForm)\n/* harmony export */ });\n/* harmony import */ var _apiServices_shop_shopResource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./apiServices/shop/shopResource */ \"./JS/apiServices/shop/shopResource.js\");\n/* harmony import */ var _helper_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helper/helper */ \"./JS/helper/helper.js\");\n/* harmony import */ var _script__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./script */ \"./JS/script.js\");\n\n\n\nfunction populateShopsTable(shopData = []) {\n  const tbody = document.querySelector('.shops-table tbody');\n  const loadingRow = document.querySelector('.loading-row');\n  (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n\n  // Remove static rows and loading\n\n  //   console.log(shopData);\n\n  if (tbody) tbody.innerHTML = '';\n  if (!shopData.length) {\n    const emptyRow = document.createElement('tr');\n    emptyRow.innerHTML = `\n        <td colspan=\"6\" class=\"table-error-text\">No shops found.</td>\n      `;\n    if (tbody) tbody.appendChild(emptyRow);\n    return;\n  }\n\n  //   console.log(shopData);\n\n  shopData.forEach((shop, index) => {\n    const row = document.createElement('tr');\n    row.classList.add('table-body-row');\n\n    //  console.log('shop', shop);\n\n    let staffNames = '—';\n    if (Array.isArray(shop.staff)) {\n      staffNames = shop.staff.map((staff, i) => `${i + 1}. ${staff.first_name} ${staff.last_name}`).join('<br>');\n    } else if (shop.staff) {\n      staffNames = `${shop.staff.first_name} ${shop.staff.last_name}`;\n    }\n    if (row) row.innerHTML = `\n        <td class=\"py-1 shopSerialNumber\">${index + 1}</td>\n        <td class=\"py-1 shopName\">${shop.shop_name}</td>\n        <td class=\"py-1 shopLocation\">${shop.location}</td>\n        <td class=\"py-1 shopServiceType\">${shop.service_type}</td>\n        <td class=\"py-1 shopManager\">${staffNames || '—'}</td>\n        <td class=\"py-1 action-buttons\">\n          <button class=\"hero-btn-outline editShopButton\" data-shop-id=\"${shop.id}\">\n            <i class=\"fa-solid fa-pen-to-square\"></i>\n          </button>\n          <button class=\"hero-btn-outline deleteShopButton\" data-shop-id=\"${shop.id}\">\n            <i class=\"fa-solid fa-trash-can\"></i>\n          </button>\n        </td>\n      `;\n    if (tbody) tbody.appendChild(row);\n    const deleteBtn = row.querySelector('.deleteShopButton');\n    deleteBtn.addEventListener('click', async () => {\n      const shopId = deleteBtn.dataset.shopId;\n      await (0,_apiServices_shop_shopResource__WEBPACK_IMPORTED_MODULE_0__.deleteShop)(shopId);\n    });\n    const updateShopBtn = row.querySelector('.editShopButton');\n    updateShopBtn?.addEventListener('click', async () => {\n      (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.showGlobalLoader)();\n      const shopId = updateShopBtn.dataset.shopId;\n      const adminUpdateShopDataContainer = document.querySelector('.adminUpdateShopData');\n      if (adminUpdateShopDataContainer) {\n        // Store shopId in modal container for reference\n        adminUpdateShopDataContainer.dataset.shopId = shopId;\n\n        // Fetch Shop detail\n        const shopDetail = await (0,_apiServices_shop_shopResource__WEBPACK_IMPORTED_MODULE_0__.fetchShopDetail)(shopId);\n\n        //   console.log(shopDetail);\n\n        // Call function to prefill modal inputs\n        if (shopDetail?.data) {\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n          (0,_apiServices_shop_shopResource__WEBPACK_IMPORTED_MODULE_0__.openUpdateShopModal)(); // Show modal after data is ready\n          setupUpdateShopForm(shopDetail.data);\n        } else {\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideGlobalLoader)();\n          (0,_script__WEBPACK_IMPORTED_MODULE_2__.showToast)('fail', '❌ Failed to fetch shop details.');\n        }\n      }\n    });\n  });\n}\n\n// export function setupUpdateShopForm(shop) {\n//   const form = document.querySelector('.adminUpdateShopDataModal');\n\n//   if (!form || form.dataset.bound === 'true') return;\n\n//   form.dataset.bound = 'true';\n\n//   document.getElementById('updateShopName').value = shop.shop_name || '';\n//   document.getElementById('updateShopAddress').value = shop.location || '';\n\n//   const updateAccessTypeCheckboxes = document.querySelectorAll(\n//     'input[name=\"updateShopAccessType\"]'\n//   );\n\n//   updateAccessTypeCheckboxes.forEach((checkbox) => (checkbox.checked = false));\n\n//   // Match and check the appropriate checkbox\n//   const serviceType = shop.service_type;\n//   const matchedCheckbox = [...updateAccessTypeCheckboxes].find(\n//     (checkbox) => checkbox.value === serviceType\n//   );\n//   if (matchedCheckbox) matchedCheckbox.checked = true;\n\n//   if (form) {\n//     form.addEventListener('submit', async function (e) {\n//       e.preventDefault();\n\n//       const updateShopName = document.getElementById('updateShopName').value;\n\n//       const updateShopAddress =\n//         document.getElementById('updateShopAddress').value;\n\n//       //  Access type checkboxes\n//       // const updateAccessTypeCheckboxes = document.querySelectorAll(\n//       //   'input[name=\"updateShopAccessType\"]:checked'\n//       // );\n//       // const updateAccessType = Array.from(updateAccessTypeCheckboxes).map(\n//       //   (cb) => cb.value\n//       // );\n//       // const updateAccessTypeValue = updateAccessType[0] || null;\n\n//       const checkedRadio = document.querySelector(\n//         'input[name=\"updateShopAccessType\"]:checked'\n//       );\n//       const updateAccessTypeValue = checkedRadio ? checkedRadio.value : null;\n\n//       const shopUpdatedDetails = {\n//         shopName: updateShopName,\n//         location: updateShopAddress,\n//         serviceType: updateAccessTypeValue,\n//       };\n\n//       // console.log('📦 shop New Details:', shopUpdatedDetails);\n\n//       try {\n//         const data = await updateShop(shop.id, shopUpdatedDetails);\n\n//         if (data) {\n//           closeModal();\n//         }\n//       } catch (err) {\n//         // err.message will contain the \"Email already in use\"\n//         showToast('fail', `❎ ${err.message}`);\n//       }\n//     });\n//   }\n// }\n\nfunction setupUpdateShopForm(shop) {\n  const form = document.querySelector('.adminUpdateShopDataModal');\n  if (!form) return;\n  form.dataset.shopId = shop.id; // Store the ID to use during submission\n\n  document.getElementById('updateShopName').value = shop.shop_name || '';\n  document.getElementById('updateShopAddress').value = shop.location || '';\n  const updateAccessTypeCheckboxes = document.querySelectorAll('input[name=\"updateShopAccessType\"]');\n  updateAccessTypeCheckboxes.forEach(checkbox => {\n    checkbox.checked = checkbox.value === shop.service_type;\n  });\n}\nfunction initUpdateShopFormListener() {\n  const form = document.querySelector('.adminUpdateShopDataModal');\n  if (!form || form.dataset.listenerBound === 'true') return;\n  form.dataset.listenerBound = 'true'; // Prevent re-binding\n\n  form.addEventListener('submit', async function (e) {\n    e.preventDefault();\n    const updateShopName = document.getElementById('updateShopName').value;\n    const updateShopAddress = document.getElementById('updateShopAddress').value;\n    const checkedRadio = document.querySelector('input[name=\"updateShopAccessType\"]:checked');\n    const updateAccessTypeValue = checkedRadio ? checkedRadio.value : null;\n    const shopUpdatedDetails = {\n      shopName: updateShopName,\n      location: updateShopAddress,\n      serviceType: updateAccessTypeValue\n    };\n    const shopId = form.dataset.shopId;\n    const updateShopSubmitBtn = document.querySelector('.updateShopBtn');\n    try {\n      (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.showBtnLoader)(updateShopSubmitBtn);\n      const data = await (0,_apiServices_shop_shopResource__WEBPACK_IMPORTED_MODULE_0__.updateShop)(shopId, shopUpdatedDetails);\n      if (data) {\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideBtnLoader)(updateShopSubmitBtn);\n        (0,_script__WEBPACK_IMPORTED_MODULE_2__.closeModal)();\n        form.reset();\n      }\n    } catch (err) {\n      (0,_script__WEBPACK_IMPORTED_MODULE_2__.showToast)('fail', `❎ ${err.message}`);\n      (0,_helper_helper__WEBPACK_IMPORTED_MODULE_1__.hideBtnLoader)(updateShopSubmitBtn);\n    }\n  });\n}\n\n// import { initUpdateShopFormListener } from './path/to/your/module.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initUpdateShopFormListener();\n});\n\n// export function populateShopDropdown(shopList = [], preselectedShopId = '') {\n//   const dropdown = document.getElementById('shopDropdown');\n//   if (!dropdown) return;\n\n//   dropdown.addEventListener('change', function () {\n//     const selectedShopId = dropdown.value;\n//     //  console.log('Selected shop ID:', selectedShopId);\n//     // Perform any action you want with the selected shop ID\n//     // already using another method already but i am still keeping this here.\n//   });\n\n//   // Clear existing options except the default\n//   dropdown.innerHTML = `<option value=\"\">Select a shop</option>`;\n\n//   shopList.forEach((shop) => {\n//     const option = document.createElement('option');\n//     option.value = shop.id;\n//     option.textContent = `${shop.shop_name} - ${shop.location}`; // or `${shop.shop_name} - ${shop.location}` if you want more details\n\n//     if (shop.id === preselectedShopId) {\n//       option.selected = true;\n//     }\n\n//     dropdown.appendChild(option);\n//   });\n// }\n\n//# sourceURL=webpack://posbok/./JS/shops.js?");

/***/ }),

/***/ "./JS/staff.js":
/*!*********************!*\
  !*** ./JS/staff.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bindUpdateStaffFormListener: () => (/* binding */ bindUpdateStaffFormListener),\n/* harmony export */   populateShopDropdown: () => (/* binding */ populateShopDropdown),\n/* harmony export */   populateStaffTable: () => (/* binding */ populateStaffTable),\n/* harmony export */   setupCreateStaffForm: () => (/* binding */ setupCreateStaffForm),\n/* harmony export */   setupManageStaffForm: () => (/* binding */ setupManageStaffForm),\n/* harmony export */   setupUpdateStaffForm: () => (/* binding */ setupUpdateStaffForm)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ \"./config.js\");\n/* harmony import */ var _apiServices_business_businessResource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./apiServices/business/businessResource */ \"./JS/apiServices/business/businessResource.js\");\n/* harmony import */ var _apiServices_shop_shopResource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./apiServices/shop/shopResource */ \"./JS/apiServices/shop/shopResource.js\");\n/* harmony import */ var _apiServices_user_userResource__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./apiServices/user/userResource */ \"./JS/apiServices/user/userResource.js\");\n/* harmony import */ var _apiServices_utility_safeFetch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./apiServices/utility/safeFetch */ \"./JS/apiServices/utility/safeFetch.js\");\n/* harmony import */ var _helper_helper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./helper/helper */ \"./JS/helper/helper.js\");\n/* harmony import */ var _script__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./script */ \"./JS/script.js\");\n\n\n\n\n\n\n\nconst userData = _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].userData;\nconst baseUrl = _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].baseUrl;\nlet userShops = [];\nlet enrichedShopData = [];\nlet businessId = null;\nif (userData) {\n  window.addEventListener('DOMContentLoaded', async () => {\n    try {\n      const data = await (0,_apiServices_shop_shopResource__WEBPACK_IMPORTED_MODULE_2__.checkAndPromptCreateShop)();\n\n      // Assign to outer variables\n      userShops = data?.userShops;\n      enrichedShopData = data?.enrichedShopData;\n      businessId = data?.businessId;\n      if (!userShops) {\n        console.warn('⚠️ No businessId found — skipping fetchBusinessDetails.');\n        return;\n      }\n\n      //  console.log('Shops loaded:', userShops);\n      //  console.log('enrichedShopData loaded:', enrichedShopData);\n\n      // ✅ Now that data is available, call populateStaffTable here\n      //  populateStaffTable();\n\n      // Now you can safely call functions below that depend on them\n    } catch (err) {\n      if (!userShops) {\n        console.warn('⚠️ No businessId found — skipping fetchBusinessDetails.');\n        return;\n      }\n      console.warn('Failed to load shop data:', err.message);\n    }\n  });\n}\nfunction setupCreateStaffForm() {\n  const form = document.querySelector('.createStaffModal');\n  if (!form || form.dataset.bound === 'true') return;\n  form.dataset.bound = 'true';\n\n  // Password Validation start\n  // Wait for input in the password and confirm password fields\n  document.getElementById('staffPassword').addEventListener('input', () => {\n    const passwordInput = document.getElementById('staffPassword');\n    const pass = passwordInput.value;\n    const lengthErrorText = document.getElementById('password-length');\n\n    // Check if password is at least 6 characters long\n    if (pass.length < 6) {\n      passwordInput.classList.add('input-mismatch');\n      lengthErrorText.textContent = 'Password must be at least 6 characters long.';\n      lengthErrorText.style.display = 'block';\n      lengthErrorText.style.textAlign = 'left';\n    } else {\n      // Hide the length error message when password length is valid\n      passwordInput.classList.remove('input-mismatch');\n      lengthErrorText.style.display = 'none';\n    }\n  });\n  document.getElementById('staffConfirmPassword').addEventListener('input', () => {\n    const passwordInput = document.getElementById('staffPassword');\n    const confirmPasswordInput = document.getElementById('staffConfirmPassword');\n    const pass = passwordInput.value;\n    const confirmVal = confirmPasswordInput.value;\n    const mismatchErrorText = document.getElementById('password-mismatch');\n\n    // Reset mismatch error text and input styling\n    confirmPasswordInput.classList.remove('input-match', 'input-mismatch');\n    mismatchErrorText.style.display = 'none';\n\n    // If password length is sufficient, check if the passwords match\n    if (confirmVal && pass !== confirmVal) {\n      confirmPasswordInput.classList.add('input-mismatch');\n      mismatchErrorText.textContent = 'Passwords do not match.';\n      mismatchErrorText.style.display = 'block';\n      mismatchErrorText.style.textAlign = 'left';\n    } else if (confirmVal && pass === confirmVal) {\n      // If passwords match, remove the mismatch class and add the match class\n      confirmPasswordInput.classList.add('input-match');\n    }\n  });\n  if (form) {\n    form.addEventListener('submit', async function (e) {\n      (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.showGlobalLoader)();\n      e.preventDefault();\n      const businessData = await (0,_apiServices_business_businessResource__WEBPACK_IMPORTED_MODULE_1__.fetchBusinessDetails)();\n      const businessId = businessData.data.id;\n      const businessType = businessData.data.business_type;\n\n      // Password Validation Ctnd\n      const pass = document.getElementById('staffPassword').value;\n      const confirmPassword = document.getElementById('staffConfirmPassword').value;\n      if (pass !== confirmPassword) {\n        (0,_script__WEBPACK_IMPORTED_MODULE_6__.showToast)('fail', '❎ Passwords do not match.');\n        return;\n      }\n      // Password Validation end\n\n      const shopDropdown = document.getElementById('shopDropdown').value;\n      const staffLastName = document.getElementById('staffLastName').value;\n      const staffFirstName = document.getElementById('staffFirstName').value;\n      const staffAddress = document.getElementById('staffAddress').value;\n      const dateOfBirth = document.getElementById('dateOfBirth').value;\n      const staffStateOfOrigin = document.getElementById('staffStateOfOrigin').value;\n      const staffLga = document.getElementById('staffLga').value;\n      const staffEmail = document.getElementById('staffEmail').value;\n      const staffPhoneNumber = document.getElementById('staffPhoneNumber').value;\n      const staffPassword = document.getElementById('staffPassword').value;\n      const staffGuarantorName = document.getElementById('staffGuarantorName').value;\n      const staffGuarantorPhoneNumber = document.getElementById('staffGuarantorPhoneNumber').value;\n      const staffGuarantorAddress = document.getElementById('staffGuarantorAddress').value;\n\n      //  Access type checkboxes\n      const accessTypeCheckboxes = document.querySelectorAll('input[name=\"accessType\"]:checked');\n      const accessType = Array.from(accessTypeCheckboxes).map(cb => cb.value);\n      const accessTypeValue = accessType[0] || null;\n      const accessTimeStart = document.getElementById('start-time').value;\n      const accessTimeEnd = document.getElementById('end-time').value;\n      const staffDetails = {\n        businessId: Number(businessId),\n        firstName: staffFirstName,\n        lastName: staffLastName,\n        address: staffAddress,\n        dateOfBirth,\n        stateOfOrigin: staffStateOfOrigin,\n        lga: staffLga,\n        email: staffEmail,\n        phoneNumber: staffPhoneNumber,\n        password: staffPassword,\n        guarantor: {\n          name: staffGuarantorName,\n          phoneNumber: staffGuarantorPhoneNumber,\n          address: staffGuarantorAddress\n        },\n        accountType: 'STAFF',\n        accessTimeStart,\n        accessTimeEnd,\n        servicePermission: accessTypeValue\n      };\n      const staffAssigningDetails = {\n        shopId: Number(shopDropdown)\n      };\n\n      // console.log('📦 Staff Details:', staffDetails);\n      // console.log('📦 Shop Details:', staffAssigningDetails);\n\n      if (!dateOfBirth) {\n        alert('Date of Birth is required.');\n        return; // Prevent form submission\n      }\n      try {\n        const data = await (0,_apiServices_user_userResource__WEBPACK_IMPORTED_MODULE_3__.createStaff)(staffDetails);\n        //   if (!data || !data.data || !data.data.user) {\n        //     //  showToast('fail', `❎ Failed to register staff.`);\n        //     return;\n        //   }\n        const userId = data.data.user.id;\n        try {\n          const assigned = await (0,_apiServices_user_userResource__WEBPACK_IMPORTED_MODULE_3__.assignUserToShop)(userId, staffAssigningDetails);\n          (0,_script__WEBPACK_IMPORTED_MODULE_6__.showToast)('success', `✅ ${assigned.message}`);\n          (0,_script__WEBPACK_IMPORTED_MODULE_6__.closeModal)();\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.clearFormInputs)();\n          const newUrl = new URL(window.location.href);\n          newUrl.searchParams.delete('from');\n          setTimeout(() => {\n            location.reload();\n          }, 1000);\n        } catch (assignErr) {\n          (0,_script__WEBPACK_IMPORTED_MODULE_6__.showToast)('fail', `❎ ${assignErr.message || 'Failed to assign user'}`);\n        }\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.hideGlobalLoader)();\n      } catch (err) {\n        // err.message will contain the \"Email already in use\"\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.hideGlobalLoader)();\n        (0,_script__WEBPACK_IMPORTED_MODULE_6__.showToast)('fail', `❎ ${err.message}`);\n      }\n    });\n  }\n}\nfunction populateStaffTable(staffData = [], enrichedShopData = []) {\n  const tbody = document.querySelector('.staff-table tbody');\n  const loadingRow = document.querySelector('.loading-row');\n\n  //   console.log('staffData loaded:', staffData);\n  //   console.log('enrichedShopData loaded:', enrichedShopData);\n\n  // Remove static rows and loading\n\n  let staffShopName = 'Unassigned';\n  enrichedShopData.forEach(shop => {\n    staffData.forEach(staffData => {\n      if (shop.staff) {\n        const staff = shop.staff.find(staffMember => staffMember.id === staffData.id);\n        if (staff) {\n          staffShopName = `${shop.shop_name}`;\n          staffData.shop_name = staffShopName; // Add shop name to staff data\n        }\n      } else {\n        staffData.shop_name = 'No Shop Assigned'; // Default value if no shop found\n      }\n    });\n  });\n  if (tbody) tbody.innerHTML = '';\n  if (!staffData.length) {\n    const emptyRow = document.createElement('tr');\n    emptyRow.innerHTML = `\n        <td colspan=\"6\" class=\"table-error-text\">No Staff found.</td>\n      `;\n    if (tbody) tbody.appendChild(emptyRow);\n    return;\n  }\n  staffData.forEach((staff, index) => {\n    //  console.log(staff);\n    const row = document.createElement('tr');\n    row.classList.add('table-body-row');\n    if (row && staff.accountType === 'STAFF') {\n      row.innerHTML = `\n        <td class=\"py-1 staffSerialNumber\">${index + 1}</td>\n        <td class=\"py-1 staffName\">${staff.firstName} ${staff.lastName}</td>\n        <td class=\"py-1 staffPhoneNumber\">${staff.phoneNumber}</td>\n        <td class=\"py-1 staffEmail\">${staff.email}\n          </td>\n        <td class=\"py-1 staffAccountType\">${staff.accountType}</td>\n        <td class=\"py-1 staffServicePermission\">${staff.servicePermission}</td>\n        <td class=\"py-1 staffshop\">${staff.shop_name || 'No Shop Assigned'}</td>\n        <td class=\"py-1 action-buttons\">\n          <button class=\"hero-btn-outline editStaffButton\" data-staff-id=\"${staff.id}\">\n            <i class=\"fa-solid fa-pen-to-square\"></i>\n          </button>\n          <button class=\"hero-btn-outline deleteStaffButton\" data-staff-id=\"${staff.id}\">\n            <i class=\"fa-solid fa-trash-can\"></i>\n          </button>\n            <button class=\"hero-btn-outline manageShopButton\" data-staff-id=\"${staff.id}\">\n          <i class=\"fa-solid fa-shop\"></i> <!-- Shop manage icon -->\n        </button>\n        </td>\n      `;\n    } else {\n      row.innerHTML = `\n    <td class=\"py-1 staffSerialNumber\">${index + 1}</td>\n    <td class=\"py-1 staffName\">${staff.firstName} ${staff.lastName}</td>\n    <td class=\"py-1 staffPhoneNumber\">${staff.phoneNumber}</td>\n    <td class=\"py-1 staffEmail\">${staff.email}\n      </td>\n    <td class=\"py-1 staffAccountType\">${staff.accountType}</td>\n    <td class=\"py-1 staffServicePermission\">${staff.servicePermission}</td>\n       <td class=\"py-1 staffshop\">ADMIN</td>\n    <td class=\"py-1 action-buttons\">\n      <button class=\"hero-btn-outline editStaffButton\" disabled data-staff-id=\"${staff.id}\">\n        <i class=\"fa-solid fa-pen-to-square\"></i>\n      </button>\n      <button class=\"hero-btn-outline deleteStaffButton\" disabled data-staff-id=\"${staff.id}\">\n        <i class=\"fa-solid fa-trash-can\"></i>\n      </button>\n        <button class=\"hero-btn-outline manageShopButton\" disabled data-staff-id=\"${staff.id}\">\n          <i class=\"fa-solid fa-shop\"></i> <!-- Shop manage icon -->\n        </button>\n    </td>\n  `;\n    }\n    if (tbody) tbody.appendChild(row);\n    const deleteBtn = row.querySelector('.deleteStaffButton');\n    deleteBtn.addEventListener('click', async () => {\n      const staffId = deleteBtn.dataset.staffId;\n      await (0,_apiServices_user_userResource__WEBPACK_IMPORTED_MODULE_3__.deleteUser)(staffId);\n    });\n    const updateStaffBtn = row.querySelector('.editStaffButton');\n    updateStaffBtn?.addEventListener('click', async () => {\n      (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.showGlobalLoader)();\n      const staffId = updateStaffBtn.dataset.staffId;\n      const adminUpdateUserDataContainer = document.querySelector('.adminUpdateUserData');\n      if (adminUpdateUserDataContainer) {\n        // Store staffId in modal container for reference\n        adminUpdateUserDataContainer.dataset.staffId = staffId;\n\n        // Fetch staff detail\n        const staffDetail = await (0,_apiServices_user_userResource__WEBPACK_IMPORTED_MODULE_3__.fetchStaffDetail)(staffId);\n\n        // Call function to prefill modal inputs\n        if (staffDetail?.data?.user) {\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.hideGlobalLoader)();\n          (0,_apiServices_user_userResource__WEBPACK_IMPORTED_MODULE_3__.openUpdateStaffModal)(); // Show modal after data is ready\n          setupUpdateStaffForm(staffDetail.data.user);\n        } else {\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.hideGlobalLoader)();\n          (0,_script__WEBPACK_IMPORTED_MODULE_6__.showToast)('fail', '❌ Failed to fetch staff details.');\n        }\n      }\n    });\n    const manageStaffBtn = row.querySelector('.manageShopButton');\n    manageStaffBtn?.addEventListener('click', async () => {\n      (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.showGlobalLoader)();\n      const staffId = manageStaffBtn.dataset.staffId;\n      const staffManageContainer = document.querySelector('.staffManage');\n      if (staffManageContainer) {\n        // Store staffId in modal container for reference\n        staffManageContainer.dataset.staffId = staffId;\n\n        // Fetch staff detail\n        const staffDetail = await (0,_apiServices_user_userResource__WEBPACK_IMPORTED_MODULE_3__.fetchStaffDetail)(staffId);\n\n        //   console.log(staffDetail.data.user);\n\n        // Call function to prefill modal inputs\n        if (staffDetail?.data?.user) {\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.hideGlobalLoader)();\n          (0,_apiServices_user_userResource__WEBPACK_IMPORTED_MODULE_3__.openManageStaffModal)(); // Show modal after data is ready\n          setupManageStaffForm(staffDetail.data.user);\n        } else {\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.hideGlobalLoader)();\n          (0,_script__WEBPACK_IMPORTED_MODULE_6__.showToast)('fail', '❌ Failed to fetch staff details.');\n        }\n      }\n    });\n  });\n}\nfunction populateShopDropdown(shopList = [], preselectedShopId = '') {\n  //   console.log('shopList', shopList);\n\n  const dropdown = document.getElementById('shopDropdown');\n  const staffManageShopDropdown = document.getElementById('staffManageShopDropdown');\n\n  //   console.log('Trying direct test append');\n  //   const testOption = document.createElement('option');\n  //   testOption.value = 'test';\n  //   testOption.textContent = 'Test Shop';\n  //   inventoryShopDropdown.appendChild(testOption);\n\n  if (!dropdown || !staffManageShopDropdown) return;\n\n  //   console.log(dropdown);\n\n  dropdown.addEventListener('change', function () {\n    const selectedShopId = dropdown.value;\n    //  console.log('Selected shop ID:', selectedShopId);\n    // Perform any action you want with the selected shop ID\n    // already using another method already but i am still keeping this here.\n  });\n\n  // Clear existing options except the default\n  dropdown.innerHTML = `<option value=\"\">Select a shop</option>`;\n  staffManageShopDropdown.innerHTML = `<option value=\"\">Select a shop</option>`;\n\n  //   console.log(dropdown);\n\n  shopList.forEach(shop => {\n    const option1 = document.createElement('option');\n    option1.value = shop.id;\n    option1.textContent = `${shop.shop_name} - ${shop.location}`;\n    if (shop.id === preselectedShopId) option1.selected = true;\n    if (dropdown) dropdown.appendChild(option1);\n    const option2 = document.createElement('option');\n    option2.value = shop.id;\n    option2.textContent = `${shop.shop_name} - ${shop.location}`;\n    if (shop.id === preselectedShopId) option2.selected = true;\n    if (staffManageShopDropdown) staffManageShopDropdown.appendChild(option2);\n  });\n\n  //   shopList.forEach((shop) => {\n  //     const option = document.createElement('option');\n  //     option.value = shop.id;\n  //     option.textContent = `${shop.shop_name} - ${shop.location}`; // or `${shop.shop_name} - ${shop.location}` if you want more details\n\n  //     if (shop.id === preselectedShopId) {\n  //       option.selected = true;\n  //     }\n\n  //     if (dropdown) dropdown.appendChild(option);\n  //     if (inventoryShopDropdown) inventoryShopDropdown.appendChild(option);\n  //   });\n}\n\n// NEW VERSION OF UPDATING STAFF INFO - OLD VERSION UNDER THIS TWO FUNCTIONS.\n\nfunction bindUpdateStaffFormListener() {\n  const form = document.querySelector('.adminUpdateUserDataModal');\n  if (!form) return;\n  form.addEventListener('submit', async function (e) {\n    e.preventDefault();\n    const userId = form.dataset.userId; // ✅ Get user ID\n    if (!userId) {\n      (0,_script__WEBPACK_IMPORTED_MODULE_6__.showToast)('fail', '❎ No user selected for update.');\n      return;\n    }\n    const updateStaffLastName = document.getElementById('updateStaffLastName').value;\n    const updateStaffFirstName = document.getElementById('updateStaffFirstName').value;\n    const updateStaffAddress = document.getElementById('updateStaffAddress').value;\n    const updateStaffPhoneNumber = document.getElementById('updateStaffPhoneNumber').value;\n    const updateAccessTypeCheckboxes = document.querySelectorAll('input[name=\"updateStaffAccessType\"]:checked');\n    const updateAccessType = Array.from(updateAccessTypeCheckboxes).map(cb => cb.value);\n    const updateAccessTypeValue = updateAccessType[0] || null;\n    const updateAccessTimeStart = document.getElementById('update-start-time').value;\n    const updateAccessTimeEnd = document.getElementById('update-end-time').value;\n    const staffUpdatedDetails = {\n      firstName: updateStaffFirstName,\n      lastName: updateStaffLastName,\n      address: updateStaffAddress,\n      phoneNumber: updateStaffPhoneNumber,\n      accountType: 'STAFF',\n      accessTimeStart: updateAccessTimeStart,\n      accessTimeEnd: updateAccessTimeEnd,\n      servicePermission: updateAccessTypeValue\n    };\n\n    //  console.log('📦 Staff Update:', { userId, ...staffUpdatedDetails });\n\n    const updateUserDetailSubmitBtn = document.querySelector('.updateUserDetailSubmitBtn');\n    try {\n      (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.showBtnLoader)(updateUserDetailSubmitBtn);\n      const data = await (0,_apiServices_user_userResource__WEBPACK_IMPORTED_MODULE_3__.updateUser)(userId, staffUpdatedDetails);\n      if (data) {\n        (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.hideBtnLoader)(updateUserDetailSubmitBtn);\n        (0,_script__WEBPACK_IMPORTED_MODULE_6__.closeModal)();\n      }\n    } catch (err) {\n      (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.hideBtnLoader)(updateUserDetailSubmitBtn);\n      (0,_script__WEBPACK_IMPORTED_MODULE_6__.showToast)('fail', `❎ ${err.message}`);\n    }\n  });\n}\nfunction setupUpdateStaffForm(user) {\n  const form = document.querySelector('.adminUpdateUserDataModal');\n  if (!form) return;\n\n  // Save user.id in the form for later use\n  form.dataset.userId = user.id;\n\n  // Fill form inputs\n  document.getElementById('updateStaffFirstName').value = user.firstName || '';\n  document.getElementById('updateStaffLastName').value = user.lastName || '';\n  document.getElementById('updateStaffPhoneNumber').value = user.phoneNumber || '';\n  document.getElementById('updateStaffAddress').value = user.address || '';\n  const updateAccessTypeCheckboxes = document.querySelectorAll('input[name=\"updateStaffAccessType\"]');\n  updateAccessTypeCheckboxes.forEach(checkbox => {\n    checkbox.checked = checkbox.value === user.servicePermission;\n  });\n  document.getElementById('update-start-time').value = user.accessTimeStart || '';\n  document.getElementById('update-end-time').value = user.accessTimeEnd || '';\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n  bindUpdateStaffFormListener(); // Only once\n});\n\n// ⚠️ Old version retained for comparison and reuse across other modals\n// Was causing multiple event triggers on repeated use\n\n// export function setupUpdateStaffForm(user) {\n//   const form = document.querySelector('.adminUpdateUserDataModal');\n\n//   //   console.log('Clicked user data passed to this function', user);\n\n//   if (!form || form.dataset.bound === 'true') return;\n\n//   form.dataset.bound = 'true';\n\n//   document.getElementById('updateStaffFirstName').value = user.firstName || '';\n//   document.getElementById('updateStaffLastName').value = user.lastName || '';\n//   document.getElementById('updateStaffPhoneNumber').value =\n//     user.phoneNumber || '';\n//   document.getElementById('updateStaffAddress').value = user.address || '';\n\n//   const updateAccessTypeCheckboxes = document.querySelectorAll(\n//     'input[name=\"updateStaffAccessType\"]'\n//   );\n\n//   if (updateAccessTypeCheckboxes)\n//     updateAccessTypeCheckboxes.forEach(\n//       (checkbox) => (checkbox.checked = false)\n//     );\n\n//   // Match and check the appropriate checkbox\n//   const serviceType = user.servicePermission;\n//   const matchedCheckbox = [...updateAccessTypeCheckboxes].find(\n//     (checkbox) => checkbox.value === serviceType\n//   );\n//   if (matchedCheckbox) matchedCheckbox.checked = true;\n\n//   if (form) {\n//     form.addEventListener('submit', async function (e) {\n//       e.preventDefault();\n\n//       const updateStaffLastName = document.getElementById(\n//         'updateStaffLastName'\n//       ).value;\n//       const updateStaffFirstName = document.getElementById(\n//         'updateStaffFirstName'\n//       ).value;\n//       const updateStaffAddress =\n//         document.getElementById('updateStaffAddress').value;\n//       const updateStaffPhoneNumber = document.getElementById(\n//         'updateStaffPhoneNumber'\n//       ).value;\n\n//       //  Access type checkboxes\n//       const updateAccessTypeCheckboxes = document.querySelectorAll(\n//         'input[name=\"updateStaffAccessType\"]:checked'\n//       );\n//       const updateAccessType = Array.from(updateAccessTypeCheckboxes).map(\n//         (cb) => cb.value\n//       );\n//       const updateAccessTypeValue = updateAccessType[0] || null;\n\n//       const updateAccessTimeStart =\n//         document.getElementById('update-start-time').value;\n//       const updateAccessTimeEnd =\n//         document.getElementById('update-end-time').value;\n\n//       const staffUpdatedDetails = {\n//         firstName: updateStaffFirstName,\n//         lastName: updateStaffLastName,\n//         address: updateStaffAddress,\n//         phoneNumber: updateStaffPhoneNumber,\n//         accountType: 'STAFF',\n//         accessTimeStart: updateAccessTimeStart,\n//         accessTimeEnd: updateAccessTimeEnd,\n//         servicePermission: updateAccessTypeValue,\n//       };\n\n//       console.log('📦 Staff New Details:', staffUpdatedDetails);\n\n//       try {\n//         const data = await updateUser(user.id, staffUpdatedDetails);\n//         if (data) {\n//           closeModal();\n//         }\n//         closeModal();\n\n//         //   if (!data || !data.data || !data.data.user) {\n//         //     //  showToast('fail', `❎ Failed to register staff.`);\n//         //     return;\n//         //   }\n//       } catch (err) {\n//         // err.message will contain the \"Email already in use\"\n//         showToast('fail', `❎ ${err.message}`);\n//       }\n//     });\n//   }\n// }\n\nasync function setupManageStaffForm(user) {\n  const form = document.querySelector('.staffManage');\n  if (!form) return;\n  (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.showGlobalLoader)();\n  const nameElem = document.getElementById('staffManage-name');\n  const currentAssignedShop = document.getElementById('currentAssignedShop');\n  if (nameElem) nameElem.innerText = 'Loading...';\n  if (currentAssignedShop) currentAssignedShop.innerText = 'Loading shop...';\n\n  // ✅ Refetch latest data\n  try {\n    const data = await (0,_apiServices_shop_shopResource__WEBPACK_IMPORTED_MODULE_2__.checkAndPromptCreateShop)();\n    enrichedShopData = data.enrichedShopData;\n    userShops = data.userShops;\n    businessId = data.businessId;\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.hideGlobalLoader)();\n  } catch (err) {\n    (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.hideGlobalLoader)();\n    console.error('Failed to refresh data in modal:', err.message);\n    (0,_script__WEBPACK_IMPORTED_MODULE_6__.showToast)('fail', '❎ Failed to refresh staff-shop data.');\n    return;\n  }\n\n  // Always set staff ID and update name\n  form.dataset.staffId = user.id;\n  document.getElementById('staffManage-name').innerText = ` ${user.firstName} ${user.lastName}` || '';\n\n  //   const currentShop = enrichedShopData.find(\n  //     (shop) => shop.id === shop.staff.shopId && user.id === shop.staff.id\n  //   );\n\n  // Find current assigned shop\n  const currentShop = enrichedShopData.find(shop => shop.staff.some(staffMember => staffMember.id === user.id && staffMember.shopId === shop.id));\n  if (currentAssignedShop) {\n    currentAssignedShop.innerText = currentShop ? `${currentShop.shop_name} - ${currentShop.location}` : 'No Shop Assigned';\n  }\n\n  // Populate the shop dropdown (for reassignment)\n  //   populateShopDropdown(enrichedShopData, user.shop_id);\n\n  // Only bind event listener once\n  if (form.dataset.listenerBound !== 'true') {\n    form.dataset.listenerBound = 'true';\n    const removeShopButton = document.getElementById('removeShopButton');\n    const assignShopButton = document.getElementById('assignShopButton');\n    if (removeShopButton) {\n      removeShopButton.addEventListener('click', async function (e) {\n        e.preventDefault();\n        const staffId = form.dataset.staffId;\n        const userId = parseInt(staffId);\n        const currentShop = enrichedShopData.find(shop => shop.staff.some(staffMember => staffMember.id === userId && staffMember.shopId === shop.id));\n\n        //   console.log('userId =', userId, 'shopId =', currentShop?.id);\n\n        try {\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.showBtnLoader)(removeShopButton);\n          assignShopButton.disabled = true;\n          const data = await (0,_apiServices_user_userResource__WEBPACK_IMPORTED_MODULE_3__.removeStaffFromShop)(userId, currentShop?.id);\n          if (data) {\n            (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.hideBtnLoader)(removeShopButton);\n            (0,_script__WEBPACK_IMPORTED_MODULE_6__.closeModal)();\n          }\n        } catch (err) {\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.hideBtnLoader)(removeShopButton);\n          assignShopButton.disabled = false;\n          // err.message will contain the \"Email already in use\"\n          (0,_script__WEBPACK_IMPORTED_MODULE_6__.showToast)('fail', `❎ ${err.message}`);\n        }\n        return;\n      });\n    }\n    if (assignShopButton) {\n      assignShopButton.addEventListener('click', async function (e) {\n        e.preventDefault();\n        const staffId = form.dataset.staffId;\n        const userId = parseInt(staffId);\n        const selectedShopId = document.querySelector('#staffManageShopDropdown').value;\n        const staffDetailsForAssigningShop = {\n          shopId: selectedShopId\n        };\n\n        //   console.log(\n        //     '📦 Staff Store Details:',\n        //     staffDetailsForAssigningShop,\n        //     'userId',\n        //     userId\n        //   );\n\n        // Find the user's current shop (if any)\n        const currentShop = enrichedShopData.find(shop => shop.staff.some(staffMember => staffMember.id === userId && staffMember.shopId === shop.id));\n\n        // 💡 1. If user is already in the selected shop\n        if (currentShop && currentShop.id == selectedShopId) {\n          (0,_script__WEBPACK_IMPORTED_MODULE_6__.showToast)('info', 'ℹ️ User is already assigned to this shop.');\n          return;\n        }\n\n        //   console.log('userId =', userId, 'shopId =', selectedShopId);\n\n        try {\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.showBtnLoader)(assignShopButton);\n          removeShopButton.disabled = true;\n          if (currentShop) {\n            await (0,_apiServices_user_userResource__WEBPACK_IMPORTED_MODULE_3__.removeStaffFromShop)(staffId, currentShop.id);\n          }\n          const data = await (0,_apiServices_user_userResource__WEBPACK_IMPORTED_MODULE_3__.assignUserToShop)(userId, staffDetailsForAssigningShop);\n          if (data) {\n            (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.hideBtnLoader)(assignShopButton);\n            removeShopButton.disabled = false;\n            (0,_script__WEBPACK_IMPORTED_MODULE_6__.closeModal)();\n          }\n\n          //  const data = await assignStaffToShop(userId, shopId);\n          //  if (data) {\n          //    closeModal();\n          //  }\n          //   if (!data || !data.data || !data.data.user) {\n          //     //  showToast('fail', `❎ Failed to register staff.`);\n          //     return;\n          //   }\n        } catch (err) {\n          // err.message will contain the \"Email already in use\"\n          (0,_helper_helper__WEBPACK_IMPORTED_MODULE_5__.hideBtnLoader)(assignShopButton);\n          (0,_script__WEBPACK_IMPORTED_MODULE_6__.showToast)('fail', `❎ ${err.message}`);\n        }\n        return;\n      });\n    }\n  }\n}\n\n// JS to Check and prompt cretae Staff\n// document.addEventListener('DOMContentLoaded', () => {\n//   setupCreateStaffForm();\n//   setupModalCloseButtons();\n//   document\n//     .querySelector('#openStaffModalBtn')\n//     ?.addEventListener('click', openCreateStaffModal);\n\n//   if (userData) {\n//     checkAndPromptCreateStaff();\n//   }\n// });\n\n// // Create Staff Registration Form\n// const createStaffModal = document.getElementById('createStaffModal');\n\n// if (createStaffModal) {\n//   console.log('Form triggered');\n//   // Password Validation\n//   // Wait for input in the password and confirm password fields\n//   document.getElementById('staffPassword').addEventListener('input', () => {\n//     const passwordInput = document.getElementById('staffPassword');\n//     const pass = passwordInput.value;\n//     const lengthErrorText = document.getElementById('password-length');\n\n//     // Check if password is at least 6 characters long\n//     if (pass.length < 6) {\n//       passwordInput.classList.add('input-mismatch');\n//       lengthErrorText.textContent =\n//         'Password must be at least 6 characters long.';\n//       lengthErrorText.style.display = 'block';\n//       lengthErrorText.style.textAlign = 'left';\n//     } else {\n//       // Hide the length error message when password length is valid\n//       passwordInput.classList.remove('input-mismatch');\n//       lengthErrorText.style.display = 'none';\n//     }\n//   });\n\n//   document\n//     .getElementById('staffConfirmPassword')\n//     .addEventListener('input', () => {\n//       const passwordInput = document.getElementById('staffPassword');\n//       const confirmPasswordInput = document.getElementById(\n//         'staffConfirmPassword'\n//       );\n//       const pass = passwordInput.value;\n//       const confirmVal = confirmPasswordInput.value;\n\n//       const mismatchErrorText = document.getElementById('password-mismatch');\n\n//       // Reset mismatch error text and input styling\n//       confirmPasswordInput.classList.remove('input-match', 'input-mismatch');\n//       mismatchErrorText.style.display = 'none';\n\n//       // If password length is sufficient, check if the passwords match\n//       if (confirmVal && pass !== confirmVal) {\n//         confirmPasswordInput.classList.add('input-mismatch');\n//         mismatchErrorText.textContent = 'Passwords do not match.';\n//         mismatchErrorText.style.display = 'block';\n//         mismatchErrorText.style.textAlign = 'left';\n//       } else if (confirmVal && pass === confirmVal) {\n//         // If passwords match, remove the mismatch class and add the match class\n//         confirmPasswordInput.classList.add('input-match');\n//       }\n//     });\n\n//   const businessData = await fetchBusinessDetails();\n//   const businessId = businessData.data.id;\n//   const businessType = businessData.data.business_type;\n\n//   createStaffModal.addEventListener('submit', function (e) {\n//     e.preventDefault();\n\n//     // Password Validation Ctnd\n//     const pass = document.getElementById('staffPassword').value;\n//     const confirmPassword = document.getElementById(\n//       'staffConfirmPassword'\n//     ).value;\n\n//     if (pass !== confirmPassword) {\n//       showToast('fail', '❎ Passwords do not match.');\n//       return;\n//     }\n\n//     const staffLastName = document.getElementById('staffLastName').value;\n//     const staffFirstName = document.getElementById('staffFirstName').value;\n//     const staffAddress = document.getElementById('staffAddress').value;\n//     const dateOfBirth = document.getElementById('dateOfBirth').value;\n//     const staffStateOfOrigin =\n//       document.getElementById('staffStateOfOrigin').value;\n//     const staffLga = document.getElementById('staffLga').value;\n//     const staffEmail = document.getElementById('staffEmail').value;\n//     const staffPhoneNumber = document.getElementById('staffPhoneNumber').value;\n//     const staffPassword = document.getElementById('staffPassword').value;\n//     const staffGuarantorName =\n//       document.getElementById('staffGuarantorName').value;\n//     const staffGuarantorPhoneNumber = document.getElementById(\n//       'staffGuarantorPhoneNumber'\n//     ).value;\n//     const staffGuarantorAddress = document.getElementById(\n//       'staffGuarantorAddress'\n//     ).value;\n\n//     //  Access type checkboxes\n//     const accessTypeCheckboxes = document.querySelectorAll(\n//       'input[name=\"accessType\"]:checked'\n//     );\n//     const accessType = Array.from(accessTypeCheckboxes).map((cb) => cb.value);\n//     const accessTypeValue = accessType[0] || null;\n\n//     const accessTimeStart = document.getElementById('start-time').value;\n//     const accessTimeEnd = document.getElementById('end-time').value;\n\n//     console.log(staffFirstName);\n//     const staffDetails = {\n//       businessId: Number(businessId),\n//       firstName: staffFirstName,\n//       lastName: staffLastName,\n//       address: staffAddress,\n//       dateOfBirth,\n//       stateOfOrigin: staffStateOfOrigin,\n//       lga: staffLga,\n//       email: staffEmail,\n//       phoneNumber: staffPhoneNumber,\n//       password: staffPassword,\n//       guarantor: {\n//         name: staffGuarantorName,\n//         phoneNumber: staffGuarantorPhoneNumber,\n//         address: staffGuarantorAddress,\n//       },\n//       accountType: 'STAFF',\n//       accessTimeStart,\n//       accessTimeEnd,\n//       servicePermission: accessTypeValue,\n//     };\n\n//     console.log('📦 Staff Details:', staffDetails);\n\n//     if (!dateOfBirth) {\n//       alert('Date of Birth is required.');\n//       return; // Prevent form submission\n//     }\n\n//     createStaff(staffDetails)\n//       .then((data) => {\n//         console.log('✅ Registered Staff successfully:', data);\n//         showToast('success', `✅ ${data.message}`);\n//         closeModal();\n//       })\n//       .catch((data) => {\n//         console.error('❎ Failed to register:', data.message);\n//         showToast('fail', `❎ ${data.message}`);\n//       });\n//   });\n// }\n\n// JS for modal\nconst main = document.querySelector('.main');\nconst sidebar = document.querySelector('.sidebar');\nconst closeModalButton = document.querySelectorAll('.closeModal');\nconst closeImageModalBtn = document.querySelectorAll('.closeImageModal');\ncloseModalButton.forEach(closeButton => {\n  closeButton.addEventListener('click', function () {\n    (0,_script__WEBPACK_IMPORTED_MODULE_6__.closeModal)();\n  });\n});\n\n// JS for Modal\n// document.addEventListener('DOMContentLoaded', function () {\n//   const addButton = document.querySelector('.add-user');\n//   const addUserContainer = document.querySelector('.addUser');\n\n//   if (addButton) {\n//     addButton.addEventListener('click', function () {\n//       addUserContainer.classList.add('active');\n//       main.classList.add('blur');\n//       sidebar.classList.add('blur');\n//       main.classList.add('no-scroll');\n//     });\n//   }\n// });\n\n//# sourceURL=webpack://posbok/./JS/staff.js?");

/***/ }),

/***/ "./config.js":
/*!*******************!*\
  !*** ./config.js ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst config = {\n  baseUrl: 'https://api.posbok.com',\n  token: localStorage.getItem('accessToken') || null,\n  userData: localStorage.getItem('userData') || null\n  //   dummyShopId: 88, // john8709@yahoo.com\n  //   dummyShopId: 91, //blessing7430@yahoo.com\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (config);\n\n//# sourceURL=webpack://posbok/./config.js?");

/***/ }),

/***/ "./node_modules/flatpickr/dist/esm/index.js":
/*!**************************************************!*\
  !*** ./node_modules/flatpickr/dist/esm/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _types_options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types/options */ \"./node_modules/flatpickr/dist/esm/types/options.js\");\n/* harmony import */ var _l10n_default__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./l10n/default */ \"./node_modules/flatpickr/dist/esm/l10n/default.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ \"./node_modules/flatpickr/dist/esm/utils/index.js\");\n/* harmony import */ var _utils_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/dom */ \"./node_modules/flatpickr/dist/esm/utils/dom.js\");\n/* harmony import */ var _utils_dates__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/dates */ \"./node_modules/flatpickr/dist/esm/utils/dates.js\");\n/* harmony import */ var _utils_formatting__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/formatting */ \"./node_modules/flatpickr/dist/esm/utils/formatting.js\");\n/* harmony import */ var _utils_polyfills__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/polyfills */ \"./node_modules/flatpickr/dist/esm/utils/polyfills.js\");\n/* harmony import */ var _utils_polyfills__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_utils_polyfills__WEBPACK_IMPORTED_MODULE_6__);\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArrays = (undefined && undefined.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\n\n\n\n\n\n\n\nvar DEBOUNCED_CHANGE_MS = 300;\nfunction FlatpickrInstance(element, instanceConfig) {\n    var self = {\n        config: __assign(__assign({}, _types_options__WEBPACK_IMPORTED_MODULE_0__.defaults), flatpickr.defaultConfig),\n        l10n: _l10n_default__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n    };\n    self.parseDate = (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.createDateParser)({ config: self.config, l10n: self.l10n });\n    self._handlers = [];\n    self.pluginElements = [];\n    self.loadedPlugins = [];\n    self._bind = bind;\n    self._setHoursFromDate = setHoursFromDate;\n    self._positionCalendar = positionCalendar;\n    self.changeMonth = changeMonth;\n    self.changeYear = changeYear;\n    self.clear = clear;\n    self.close = close;\n    self.onMouseOver = onMouseOver;\n    self._createElement = _utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement;\n    self.createDay = createDay;\n    self.destroy = destroy;\n    self.isEnabled = isEnabled;\n    self.jumpToDate = jumpToDate;\n    self.updateValue = updateValue;\n    self.open = open;\n    self.redraw = redraw;\n    self.set = set;\n    self.setDate = setDate;\n    self.toggle = toggle;\n    function setupHelperFunctions() {\n        self.utils = {\n            getDaysInMonth: function (month, yr) {\n                if (month === void 0) { month = self.currentMonth; }\n                if (yr === void 0) { yr = self.currentYear; }\n                if (month === 1 && ((yr % 4 === 0 && yr % 100 !== 0) || yr % 400 === 0))\n                    return 29;\n                return self.l10n.daysInMonth[month];\n            },\n        };\n    }\n    function init() {\n        self.element = self.input = element;\n        self.isOpen = false;\n        parseConfig();\n        setupLocale();\n        setupInputs();\n        setupDates();\n        setupHelperFunctions();\n        if (!self.isMobile)\n            build();\n        bindEvents();\n        if (self.selectedDates.length || self.config.noCalendar) {\n            if (self.config.enableTime) {\n                setHoursFromDate(self.config.noCalendar ? self.latestSelectedDateObj : undefined);\n            }\n            updateValue(false);\n        }\n        setCalendarWidth();\n        var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n        if (!self.isMobile && isSafari) {\n            positionCalendar();\n        }\n        triggerEvent(\"onReady\");\n    }\n    function getClosestActiveElement() {\n        var _a;\n        return (((_a = self.calendarContainer) === null || _a === void 0 ? void 0 : _a.getRootNode())\n            .activeElement || document.activeElement);\n    }\n    function bindToInstance(fn) {\n        return fn.bind(self);\n    }\n    function setCalendarWidth() {\n        var config = self.config;\n        if (config.weekNumbers === false && config.showMonths === 1) {\n            return;\n        }\n        else if (config.noCalendar !== true) {\n            window.requestAnimationFrame(function () {\n                if (self.calendarContainer !== undefined) {\n                    self.calendarContainer.style.visibility = \"hidden\";\n                    self.calendarContainer.style.display = \"block\";\n                }\n                if (self.daysContainer !== undefined) {\n                    var daysWidth = (self.days.offsetWidth + 1) * config.showMonths;\n                    self.daysContainer.style.width = daysWidth + \"px\";\n                    self.calendarContainer.style.width =\n                        daysWidth +\n                            (self.weekWrapper !== undefined\n                                ? self.weekWrapper.offsetWidth\n                                : 0) +\n                            \"px\";\n                    self.calendarContainer.style.removeProperty(\"visibility\");\n                    self.calendarContainer.style.removeProperty(\"display\");\n                }\n            });\n        }\n    }\n    function updateTime(e) {\n        if (self.selectedDates.length === 0) {\n            var defaultDate = self.config.minDate === undefined ||\n                (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.compareDates)(new Date(), self.config.minDate) >= 0\n                ? new Date()\n                : new Date(self.config.minDate.getTime());\n            var defaults = (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.getDefaultHours)(self.config);\n            defaultDate.setHours(defaults.hours, defaults.minutes, defaults.seconds, defaultDate.getMilliseconds());\n            self.selectedDates = [defaultDate];\n            self.latestSelectedDateObj = defaultDate;\n        }\n        if (e !== undefined && e.type !== \"blur\") {\n            timeWrapper(e);\n        }\n        var prevValue = self._input.value;\n        setHoursFromInputs();\n        updateValue();\n        if (self._input.value !== prevValue) {\n            self._debouncedChange();\n        }\n    }\n    function ampm2military(hour, amPM) {\n        return (hour % 12) + 12 * (0,_utils__WEBPACK_IMPORTED_MODULE_2__.int)(amPM === self.l10n.amPM[1]);\n    }\n    function military2ampm(hour) {\n        switch (hour % 24) {\n            case 0:\n            case 12:\n                return 12;\n            default:\n                return hour % 12;\n        }\n    }\n    function setHoursFromInputs() {\n        if (self.hourElement === undefined || self.minuteElement === undefined)\n            return;\n        var hours = (parseInt(self.hourElement.value.slice(-2), 10) || 0) % 24, minutes = (parseInt(self.minuteElement.value, 10) || 0) % 60, seconds = self.secondElement !== undefined\n            ? (parseInt(self.secondElement.value, 10) || 0) % 60\n            : 0;\n        if (self.amPM !== undefined) {\n            hours = ampm2military(hours, self.amPM.textContent);\n        }\n        var limitMinHours = self.config.minTime !== undefined ||\n            (self.config.minDate &&\n                self.minDateHasTime &&\n                self.latestSelectedDateObj &&\n                (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.compareDates)(self.latestSelectedDateObj, self.config.minDate, true) ===\n                    0);\n        var limitMaxHours = self.config.maxTime !== undefined ||\n            (self.config.maxDate &&\n                self.maxDateHasTime &&\n                self.latestSelectedDateObj &&\n                (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.compareDates)(self.latestSelectedDateObj, self.config.maxDate, true) ===\n                    0);\n        if (self.config.maxTime !== undefined &&\n            self.config.minTime !== undefined &&\n            self.config.minTime > self.config.maxTime) {\n            var minBound = (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.calculateSecondsSinceMidnight)(self.config.minTime.getHours(), self.config.minTime.getMinutes(), self.config.minTime.getSeconds());\n            var maxBound = (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.calculateSecondsSinceMidnight)(self.config.maxTime.getHours(), self.config.maxTime.getMinutes(), self.config.maxTime.getSeconds());\n            var currentTime = (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.calculateSecondsSinceMidnight)(hours, minutes, seconds);\n            if (currentTime > maxBound && currentTime < minBound) {\n                var result = (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.parseSeconds)(minBound);\n                hours = result[0];\n                minutes = result[1];\n                seconds = result[2];\n            }\n        }\n        else {\n            if (limitMaxHours) {\n                var maxTime = self.config.maxTime !== undefined\n                    ? self.config.maxTime\n                    : self.config.maxDate;\n                hours = Math.min(hours, maxTime.getHours());\n                if (hours === maxTime.getHours())\n                    minutes = Math.min(minutes, maxTime.getMinutes());\n                if (minutes === maxTime.getMinutes())\n                    seconds = Math.min(seconds, maxTime.getSeconds());\n            }\n            if (limitMinHours) {\n                var minTime = self.config.minTime !== undefined\n                    ? self.config.minTime\n                    : self.config.minDate;\n                hours = Math.max(hours, minTime.getHours());\n                if (hours === minTime.getHours() && minutes < minTime.getMinutes())\n                    minutes = minTime.getMinutes();\n                if (minutes === minTime.getMinutes())\n                    seconds = Math.max(seconds, minTime.getSeconds());\n            }\n        }\n        setHours(hours, minutes, seconds);\n    }\n    function setHoursFromDate(dateObj) {\n        var date = dateObj || self.latestSelectedDateObj;\n        if (date && date instanceof Date) {\n            setHours(date.getHours(), date.getMinutes(), date.getSeconds());\n        }\n    }\n    function setHours(hours, minutes, seconds) {\n        if (self.latestSelectedDateObj !== undefined) {\n            self.latestSelectedDateObj.setHours(hours % 24, minutes, seconds || 0, 0);\n        }\n        if (!self.hourElement || !self.minuteElement || self.isMobile)\n            return;\n        self.hourElement.value = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.pad)(!self.config.time_24hr\n            ? ((12 + hours) % 12) + 12 * (0,_utils__WEBPACK_IMPORTED_MODULE_2__.int)(hours % 12 === 0)\n            : hours);\n        self.minuteElement.value = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.pad)(minutes);\n        if (self.amPM !== undefined)\n            self.amPM.textContent = self.l10n.amPM[(0,_utils__WEBPACK_IMPORTED_MODULE_2__.int)(hours >= 12)];\n        if (self.secondElement !== undefined)\n            self.secondElement.value = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.pad)(seconds);\n    }\n    function onYearInput(event) {\n        var eventTarget = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.getEventTarget)(event);\n        var year = parseInt(eventTarget.value) + (event.delta || 0);\n        if (year / 1000 > 1 ||\n            (event.key === \"Enter\" && !/[^\\d]/.test(year.toString()))) {\n            changeYear(year);\n        }\n    }\n    function bind(element, event, handler, options) {\n        if (event instanceof Array)\n            return event.forEach(function (ev) { return bind(element, ev, handler, options); });\n        if (element instanceof Array)\n            return element.forEach(function (el) { return bind(el, event, handler, options); });\n        element.addEventListener(event, handler, options);\n        self._handlers.push({\n            remove: function () { return element.removeEventListener(event, handler, options); },\n        });\n    }\n    function triggerChange() {\n        triggerEvent(\"onChange\");\n    }\n    function bindEvents() {\n        if (self.config.wrap) {\n            [\"open\", \"close\", \"toggle\", \"clear\"].forEach(function (evt) {\n                Array.prototype.forEach.call(self.element.querySelectorAll(\"[data-\" + evt + \"]\"), function (el) {\n                    return bind(el, \"click\", self[evt]);\n                });\n            });\n        }\n        if (self.isMobile) {\n            setupMobile();\n            return;\n        }\n        var debouncedResize = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.debounce)(onResize, 50);\n        self._debouncedChange = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.debounce)(triggerChange, DEBOUNCED_CHANGE_MS);\n        if (self.daysContainer && !/iPhone|iPad|iPod/i.test(navigator.userAgent))\n            bind(self.daysContainer, \"mouseover\", function (e) {\n                if (self.config.mode === \"range\")\n                    onMouseOver((0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.getEventTarget)(e));\n            });\n        bind(self._input, \"keydown\", onKeyDown);\n        if (self.calendarContainer !== undefined) {\n            bind(self.calendarContainer, \"keydown\", onKeyDown);\n        }\n        if (!self.config.inline && !self.config.static)\n            bind(window, \"resize\", debouncedResize);\n        if (window.ontouchstart !== undefined)\n            bind(window.document, \"touchstart\", documentClick);\n        else\n            bind(window.document, \"mousedown\", documentClick);\n        bind(window.document, \"focus\", documentClick, { capture: true });\n        if (self.config.clickOpens === true) {\n            bind(self._input, \"focus\", self.open);\n            bind(self._input, \"click\", self.open);\n        }\n        if (self.daysContainer !== undefined) {\n            bind(self.monthNav, \"click\", onMonthNavClick);\n            bind(self.monthNav, [\"keyup\", \"increment\"], onYearInput);\n            bind(self.daysContainer, \"click\", selectDate);\n        }\n        if (self.timeContainer !== undefined &&\n            self.minuteElement !== undefined &&\n            self.hourElement !== undefined) {\n            var selText = function (e) {\n                return (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.getEventTarget)(e).select();\n            };\n            bind(self.timeContainer, [\"increment\"], updateTime);\n            bind(self.timeContainer, \"blur\", updateTime, { capture: true });\n            bind(self.timeContainer, \"click\", timeIncrement);\n            bind([self.hourElement, self.minuteElement], [\"focus\", \"click\"], selText);\n            if (self.secondElement !== undefined)\n                bind(self.secondElement, \"focus\", function () { return self.secondElement && self.secondElement.select(); });\n            if (self.amPM !== undefined) {\n                bind(self.amPM, \"click\", function (e) {\n                    updateTime(e);\n                });\n            }\n        }\n        if (self.config.allowInput) {\n            bind(self._input, \"blur\", onBlur);\n        }\n    }\n    function jumpToDate(jumpDate, triggerChange) {\n        var jumpTo = jumpDate !== undefined\n            ? self.parseDate(jumpDate)\n            : self.latestSelectedDateObj ||\n                (self.config.minDate && self.config.minDate > self.now\n                    ? self.config.minDate\n                    : self.config.maxDate && self.config.maxDate < self.now\n                        ? self.config.maxDate\n                        : self.now);\n        var oldYear = self.currentYear;\n        var oldMonth = self.currentMonth;\n        try {\n            if (jumpTo !== undefined) {\n                self.currentYear = jumpTo.getFullYear();\n                self.currentMonth = jumpTo.getMonth();\n            }\n        }\n        catch (e) {\n            e.message = \"Invalid date supplied: \" + jumpTo;\n            self.config.errorHandler(e);\n        }\n        if (triggerChange && self.currentYear !== oldYear) {\n            triggerEvent(\"onYearChange\");\n            buildMonthSwitch();\n        }\n        if (triggerChange &&\n            (self.currentYear !== oldYear || self.currentMonth !== oldMonth)) {\n            triggerEvent(\"onMonthChange\");\n        }\n        self.redraw();\n    }\n    function timeIncrement(e) {\n        var eventTarget = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.getEventTarget)(e);\n        if (~eventTarget.className.indexOf(\"arrow\"))\n            incrementNumInput(e, eventTarget.classList.contains(\"arrowUp\") ? 1 : -1);\n    }\n    function incrementNumInput(e, delta, inputElem) {\n        var target = e && (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.getEventTarget)(e);\n        var input = inputElem ||\n            (target && target.parentNode && target.parentNode.firstChild);\n        var event = createEvent(\"increment\");\n        event.delta = delta;\n        input && input.dispatchEvent(event);\n    }\n    function build() {\n        var fragment = window.document.createDocumentFragment();\n        self.calendarContainer = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"div\", \"flatpickr-calendar\");\n        self.calendarContainer.tabIndex = -1;\n        if (!self.config.noCalendar) {\n            fragment.appendChild(buildMonthNav());\n            self.innerContainer = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"div\", \"flatpickr-innerContainer\");\n            if (self.config.weekNumbers) {\n                var _a = buildWeeks(), weekWrapper = _a.weekWrapper, weekNumbers = _a.weekNumbers;\n                self.innerContainer.appendChild(weekWrapper);\n                self.weekNumbers = weekNumbers;\n                self.weekWrapper = weekWrapper;\n            }\n            self.rContainer = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"div\", \"flatpickr-rContainer\");\n            self.rContainer.appendChild(buildWeekdays());\n            if (!self.daysContainer) {\n                self.daysContainer = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"div\", \"flatpickr-days\");\n                self.daysContainer.tabIndex = -1;\n            }\n            buildDays();\n            self.rContainer.appendChild(self.daysContainer);\n            self.innerContainer.appendChild(self.rContainer);\n            fragment.appendChild(self.innerContainer);\n        }\n        if (self.config.enableTime) {\n            fragment.appendChild(buildTime());\n        }\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(self.calendarContainer, \"rangeMode\", self.config.mode === \"range\");\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(self.calendarContainer, \"animate\", self.config.animate === true);\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(self.calendarContainer, \"multiMonth\", self.config.showMonths > 1);\n        self.calendarContainer.appendChild(fragment);\n        var customAppend = self.config.appendTo !== undefined &&\n            self.config.appendTo.nodeType !== undefined;\n        if (self.config.inline || self.config.static) {\n            self.calendarContainer.classList.add(self.config.inline ? \"inline\" : \"static\");\n            if (self.config.inline) {\n                if (!customAppend && self.element.parentNode)\n                    self.element.parentNode.insertBefore(self.calendarContainer, self._input.nextSibling);\n                else if (self.config.appendTo !== undefined)\n                    self.config.appendTo.appendChild(self.calendarContainer);\n            }\n            if (self.config.static) {\n                var wrapper = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"div\", \"flatpickr-wrapper\");\n                if (self.element.parentNode)\n                    self.element.parentNode.insertBefore(wrapper, self.element);\n                wrapper.appendChild(self.element);\n                if (self.altInput)\n                    wrapper.appendChild(self.altInput);\n                wrapper.appendChild(self.calendarContainer);\n            }\n        }\n        if (!self.config.static && !self.config.inline)\n            (self.config.appendTo !== undefined\n                ? self.config.appendTo\n                : window.document.body).appendChild(self.calendarContainer);\n    }\n    function createDay(className, date, _dayNumber, i) {\n        var dateIsEnabled = isEnabled(date, true), dayElement = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"span\", className, date.getDate().toString());\n        dayElement.dateObj = date;\n        dayElement.$i = i;\n        dayElement.setAttribute(\"aria-label\", self.formatDate(date, self.config.ariaDateFormat));\n        if (className.indexOf(\"hidden\") === -1 &&\n            (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.compareDates)(date, self.now) === 0) {\n            self.todayDateElem = dayElement;\n            dayElement.classList.add(\"today\");\n            dayElement.setAttribute(\"aria-current\", \"date\");\n        }\n        if (dateIsEnabled) {\n            dayElement.tabIndex = -1;\n            if (isDateSelected(date)) {\n                dayElement.classList.add(\"selected\");\n                self.selectedDateElem = dayElement;\n                if (self.config.mode === \"range\") {\n                    (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(dayElement, \"startRange\", self.selectedDates[0] &&\n                        (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.compareDates)(date, self.selectedDates[0], true) === 0);\n                    (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(dayElement, \"endRange\", self.selectedDates[1] &&\n                        (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.compareDates)(date, self.selectedDates[1], true) === 0);\n                    if (className === \"nextMonthDay\")\n                        dayElement.classList.add(\"inRange\");\n                }\n            }\n        }\n        else {\n            dayElement.classList.add(\"flatpickr-disabled\");\n        }\n        if (self.config.mode === \"range\") {\n            if (isDateInRange(date) && !isDateSelected(date))\n                dayElement.classList.add(\"inRange\");\n        }\n        if (self.weekNumbers &&\n            self.config.showMonths === 1 &&\n            className !== \"prevMonthDay\" &&\n            i % 7 === 6) {\n            self.weekNumbers.insertAdjacentHTML(\"beforeend\", \"<span class='flatpickr-day'>\" + self.config.getWeek(date) + \"</span>\");\n        }\n        triggerEvent(\"onDayCreate\", dayElement);\n        return dayElement;\n    }\n    function focusOnDayElem(targetNode) {\n        targetNode.focus();\n        if (self.config.mode === \"range\")\n            onMouseOver(targetNode);\n    }\n    function getFirstAvailableDay(delta) {\n        var startMonth = delta > 0 ? 0 : self.config.showMonths - 1;\n        var endMonth = delta > 0 ? self.config.showMonths : -1;\n        for (var m = startMonth; m != endMonth; m += delta) {\n            var month = self.daysContainer.children[m];\n            var startIndex = delta > 0 ? 0 : month.children.length - 1;\n            var endIndex = delta > 0 ? month.children.length : -1;\n            for (var i = startIndex; i != endIndex; i += delta) {\n                var c = month.children[i];\n                if (c.className.indexOf(\"hidden\") === -1 && isEnabled(c.dateObj))\n                    return c;\n            }\n        }\n        return undefined;\n    }\n    function getNextAvailableDay(current, delta) {\n        var givenMonth = current.className.indexOf(\"Month\") === -1\n            ? current.dateObj.getMonth()\n            : self.currentMonth;\n        var endMonth = delta > 0 ? self.config.showMonths : -1;\n        var loopDelta = delta > 0 ? 1 : -1;\n        for (var m = givenMonth - self.currentMonth; m != endMonth; m += loopDelta) {\n            var month = self.daysContainer.children[m];\n            var startIndex = givenMonth - self.currentMonth === m\n                ? current.$i + delta\n                : delta < 0\n                    ? month.children.length - 1\n                    : 0;\n            var numMonthDays = month.children.length;\n            for (var i = startIndex; i >= 0 && i < numMonthDays && i != (delta > 0 ? numMonthDays : -1); i += loopDelta) {\n                var c = month.children[i];\n                if (c.className.indexOf(\"hidden\") === -1 &&\n                    isEnabled(c.dateObj) &&\n                    Math.abs(current.$i - i) >= Math.abs(delta))\n                    return focusOnDayElem(c);\n            }\n        }\n        self.changeMonth(loopDelta);\n        focusOnDay(getFirstAvailableDay(loopDelta), 0);\n        return undefined;\n    }\n    function focusOnDay(current, offset) {\n        var activeElement = getClosestActiveElement();\n        var dayFocused = isInView(activeElement || document.body);\n        var startElem = current !== undefined\n            ? current\n            : dayFocused\n                ? activeElement\n                : self.selectedDateElem !== undefined && isInView(self.selectedDateElem)\n                    ? self.selectedDateElem\n                    : self.todayDateElem !== undefined && isInView(self.todayDateElem)\n                        ? self.todayDateElem\n                        : getFirstAvailableDay(offset > 0 ? 1 : -1);\n        if (startElem === undefined) {\n            self._input.focus();\n        }\n        else if (!dayFocused) {\n            focusOnDayElem(startElem);\n        }\n        else {\n            getNextAvailableDay(startElem, offset);\n        }\n    }\n    function buildMonthDays(year, month) {\n        var firstOfMonth = (new Date(year, month, 1).getDay() - self.l10n.firstDayOfWeek + 7) % 7;\n        var prevMonthDays = self.utils.getDaysInMonth((month - 1 + 12) % 12, year);\n        var daysInMonth = self.utils.getDaysInMonth(month, year), days = window.document.createDocumentFragment(), isMultiMonth = self.config.showMonths > 1, prevMonthDayClass = isMultiMonth ? \"prevMonthDay hidden\" : \"prevMonthDay\", nextMonthDayClass = isMultiMonth ? \"nextMonthDay hidden\" : \"nextMonthDay\";\n        var dayNumber = prevMonthDays + 1 - firstOfMonth, dayIndex = 0;\n        for (; dayNumber <= prevMonthDays; dayNumber++, dayIndex++) {\n            days.appendChild(createDay(\"flatpickr-day \" + prevMonthDayClass, new Date(year, month - 1, dayNumber), dayNumber, dayIndex));\n        }\n        for (dayNumber = 1; dayNumber <= daysInMonth; dayNumber++, dayIndex++) {\n            days.appendChild(createDay(\"flatpickr-day\", new Date(year, month, dayNumber), dayNumber, dayIndex));\n        }\n        for (var dayNum = daysInMonth + 1; dayNum <= 42 - firstOfMonth &&\n            (self.config.showMonths === 1 || dayIndex % 7 !== 0); dayNum++, dayIndex++) {\n            days.appendChild(createDay(\"flatpickr-day \" + nextMonthDayClass, new Date(year, month + 1, dayNum % daysInMonth), dayNum, dayIndex));\n        }\n        var dayContainer = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"div\", \"dayContainer\");\n        dayContainer.appendChild(days);\n        return dayContainer;\n    }\n    function buildDays() {\n        if (self.daysContainer === undefined) {\n            return;\n        }\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.clearNode)(self.daysContainer);\n        if (self.weekNumbers)\n            (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.clearNode)(self.weekNumbers);\n        var frag = document.createDocumentFragment();\n        for (var i = 0; i < self.config.showMonths; i++) {\n            var d = new Date(self.currentYear, self.currentMonth, 1);\n            d.setMonth(self.currentMonth + i);\n            frag.appendChild(buildMonthDays(d.getFullYear(), d.getMonth()));\n        }\n        self.daysContainer.appendChild(frag);\n        self.days = self.daysContainer.firstChild;\n        if (self.config.mode === \"range\" && self.selectedDates.length === 1) {\n            onMouseOver();\n        }\n    }\n    function buildMonthSwitch() {\n        if (self.config.showMonths > 1 ||\n            self.config.monthSelectorType !== \"dropdown\")\n            return;\n        var shouldBuildMonth = function (month) {\n            if (self.config.minDate !== undefined &&\n                self.currentYear === self.config.minDate.getFullYear() &&\n                month < self.config.minDate.getMonth()) {\n                return false;\n            }\n            return !(self.config.maxDate !== undefined &&\n                self.currentYear === self.config.maxDate.getFullYear() &&\n                month > self.config.maxDate.getMonth());\n        };\n        self.monthsDropdownContainer.tabIndex = -1;\n        self.monthsDropdownContainer.innerHTML = \"\";\n        for (var i = 0; i < 12; i++) {\n            if (!shouldBuildMonth(i))\n                continue;\n            var month = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"option\", \"flatpickr-monthDropdown-month\");\n            month.value = new Date(self.currentYear, i).getMonth().toString();\n            month.textContent = (0,_utils_formatting__WEBPACK_IMPORTED_MODULE_5__.monthToStr)(i, self.config.shorthandCurrentMonth, self.l10n);\n            month.tabIndex = -1;\n            if (self.currentMonth === i) {\n                month.selected = true;\n            }\n            self.monthsDropdownContainer.appendChild(month);\n        }\n    }\n    function buildMonth() {\n        var container = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"div\", \"flatpickr-month\");\n        var monthNavFragment = window.document.createDocumentFragment();\n        var monthElement;\n        if (self.config.showMonths > 1 ||\n            self.config.monthSelectorType === \"static\") {\n            monthElement = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"span\", \"cur-month\");\n        }\n        else {\n            self.monthsDropdownContainer = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"select\", \"flatpickr-monthDropdown-months\");\n            self.monthsDropdownContainer.setAttribute(\"aria-label\", self.l10n.monthAriaLabel);\n            bind(self.monthsDropdownContainer, \"change\", function (e) {\n                var target = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.getEventTarget)(e);\n                var selectedMonth = parseInt(target.value, 10);\n                self.changeMonth(selectedMonth - self.currentMonth);\n                triggerEvent(\"onMonthChange\");\n            });\n            buildMonthSwitch();\n            monthElement = self.monthsDropdownContainer;\n        }\n        var yearInput = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createNumberInput)(\"cur-year\", { tabindex: \"-1\" });\n        var yearElement = yearInput.getElementsByTagName(\"input\")[0];\n        yearElement.setAttribute(\"aria-label\", self.l10n.yearAriaLabel);\n        if (self.config.minDate) {\n            yearElement.setAttribute(\"min\", self.config.minDate.getFullYear().toString());\n        }\n        if (self.config.maxDate) {\n            yearElement.setAttribute(\"max\", self.config.maxDate.getFullYear().toString());\n            yearElement.disabled =\n                !!self.config.minDate &&\n                    self.config.minDate.getFullYear() === self.config.maxDate.getFullYear();\n        }\n        var currentMonth = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"div\", \"flatpickr-current-month\");\n        currentMonth.appendChild(monthElement);\n        currentMonth.appendChild(yearInput);\n        monthNavFragment.appendChild(currentMonth);\n        container.appendChild(monthNavFragment);\n        return {\n            container: container,\n            yearElement: yearElement,\n            monthElement: monthElement,\n        };\n    }\n    function buildMonths() {\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.clearNode)(self.monthNav);\n        self.monthNav.appendChild(self.prevMonthNav);\n        if (self.config.showMonths) {\n            self.yearElements = [];\n            self.monthElements = [];\n        }\n        for (var m = self.config.showMonths; m--;) {\n            var month = buildMonth();\n            self.yearElements.push(month.yearElement);\n            self.monthElements.push(month.monthElement);\n            self.monthNav.appendChild(month.container);\n        }\n        self.monthNav.appendChild(self.nextMonthNav);\n    }\n    function buildMonthNav() {\n        self.monthNav = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"div\", \"flatpickr-months\");\n        self.yearElements = [];\n        self.monthElements = [];\n        self.prevMonthNav = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"span\", \"flatpickr-prev-month\");\n        self.prevMonthNav.innerHTML = self.config.prevArrow;\n        self.nextMonthNav = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"span\", \"flatpickr-next-month\");\n        self.nextMonthNav.innerHTML = self.config.nextArrow;\n        buildMonths();\n        Object.defineProperty(self, \"_hidePrevMonthArrow\", {\n            get: function () { return self.__hidePrevMonthArrow; },\n            set: function (bool) {\n                if (self.__hidePrevMonthArrow !== bool) {\n                    (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(self.prevMonthNav, \"flatpickr-disabled\", bool);\n                    self.__hidePrevMonthArrow = bool;\n                }\n            },\n        });\n        Object.defineProperty(self, \"_hideNextMonthArrow\", {\n            get: function () { return self.__hideNextMonthArrow; },\n            set: function (bool) {\n                if (self.__hideNextMonthArrow !== bool) {\n                    (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(self.nextMonthNav, \"flatpickr-disabled\", bool);\n                    self.__hideNextMonthArrow = bool;\n                }\n            },\n        });\n        self.currentYearElement = self.yearElements[0];\n        updateNavigationCurrentMonth();\n        return self.monthNav;\n    }\n    function buildTime() {\n        self.calendarContainer.classList.add(\"hasTime\");\n        if (self.config.noCalendar)\n            self.calendarContainer.classList.add(\"noCalendar\");\n        var defaults = (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.getDefaultHours)(self.config);\n        self.timeContainer = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"div\", \"flatpickr-time\");\n        self.timeContainer.tabIndex = -1;\n        var separator = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"span\", \"flatpickr-time-separator\", \":\");\n        var hourInput = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createNumberInput)(\"flatpickr-hour\", {\n            \"aria-label\": self.l10n.hourAriaLabel,\n        });\n        self.hourElement = hourInput.getElementsByTagName(\"input\")[0];\n        var minuteInput = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createNumberInput)(\"flatpickr-minute\", {\n            \"aria-label\": self.l10n.minuteAriaLabel,\n        });\n        self.minuteElement = minuteInput.getElementsByTagName(\"input\")[0];\n        self.hourElement.tabIndex = self.minuteElement.tabIndex = -1;\n        self.hourElement.value = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.pad)(self.latestSelectedDateObj\n            ? self.latestSelectedDateObj.getHours()\n            : self.config.time_24hr\n                ? defaults.hours\n                : military2ampm(defaults.hours));\n        self.minuteElement.value = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.pad)(self.latestSelectedDateObj\n            ? self.latestSelectedDateObj.getMinutes()\n            : defaults.minutes);\n        self.hourElement.setAttribute(\"step\", self.config.hourIncrement.toString());\n        self.minuteElement.setAttribute(\"step\", self.config.minuteIncrement.toString());\n        self.hourElement.setAttribute(\"min\", self.config.time_24hr ? \"0\" : \"1\");\n        self.hourElement.setAttribute(\"max\", self.config.time_24hr ? \"23\" : \"12\");\n        self.hourElement.setAttribute(\"maxlength\", \"2\");\n        self.minuteElement.setAttribute(\"min\", \"0\");\n        self.minuteElement.setAttribute(\"max\", \"59\");\n        self.minuteElement.setAttribute(\"maxlength\", \"2\");\n        self.timeContainer.appendChild(hourInput);\n        self.timeContainer.appendChild(separator);\n        self.timeContainer.appendChild(minuteInput);\n        if (self.config.time_24hr)\n            self.timeContainer.classList.add(\"time24hr\");\n        if (self.config.enableSeconds) {\n            self.timeContainer.classList.add(\"hasSeconds\");\n            var secondInput = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createNumberInput)(\"flatpickr-second\");\n            self.secondElement = secondInput.getElementsByTagName(\"input\")[0];\n            self.secondElement.value = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.pad)(self.latestSelectedDateObj\n                ? self.latestSelectedDateObj.getSeconds()\n                : defaults.seconds);\n            self.secondElement.setAttribute(\"step\", self.minuteElement.getAttribute(\"step\"));\n            self.secondElement.setAttribute(\"min\", \"0\");\n            self.secondElement.setAttribute(\"max\", \"59\");\n            self.secondElement.setAttribute(\"maxlength\", \"2\");\n            self.timeContainer.appendChild((0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"span\", \"flatpickr-time-separator\", \":\"));\n            self.timeContainer.appendChild(secondInput);\n        }\n        if (!self.config.time_24hr) {\n            self.amPM = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"span\", \"flatpickr-am-pm\", self.l10n.amPM[(0,_utils__WEBPACK_IMPORTED_MODULE_2__.int)((self.latestSelectedDateObj\n                ? self.hourElement.value\n                : self.config.defaultHour) > 11)]);\n            self.amPM.title = self.l10n.toggleTitle;\n            self.amPM.tabIndex = -1;\n            self.timeContainer.appendChild(self.amPM);\n        }\n        return self.timeContainer;\n    }\n    function buildWeekdays() {\n        if (!self.weekdayContainer)\n            self.weekdayContainer = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"div\", \"flatpickr-weekdays\");\n        else\n            (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.clearNode)(self.weekdayContainer);\n        for (var i = self.config.showMonths; i--;) {\n            var container = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"div\", \"flatpickr-weekdaycontainer\");\n            self.weekdayContainer.appendChild(container);\n        }\n        updateWeekdays();\n        return self.weekdayContainer;\n    }\n    function updateWeekdays() {\n        if (!self.weekdayContainer) {\n            return;\n        }\n        var firstDayOfWeek = self.l10n.firstDayOfWeek;\n        var weekdays = __spreadArrays(self.l10n.weekdays.shorthand);\n        if (firstDayOfWeek > 0 && firstDayOfWeek < weekdays.length) {\n            weekdays = __spreadArrays(weekdays.splice(firstDayOfWeek, weekdays.length), weekdays.splice(0, firstDayOfWeek));\n        }\n        for (var i = self.config.showMonths; i--;) {\n            self.weekdayContainer.children[i].innerHTML = \"\\n      <span class='flatpickr-weekday'>\\n        \" + weekdays.join(\"</span><span class='flatpickr-weekday'>\") + \"\\n      </span>\\n      \";\n        }\n    }\n    function buildWeeks() {\n        self.calendarContainer.classList.add(\"hasWeeks\");\n        var weekWrapper = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"div\", \"flatpickr-weekwrapper\");\n        weekWrapper.appendChild((0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"span\", \"flatpickr-weekday\", self.l10n.weekAbbreviation));\n        var weekNumbers = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"div\", \"flatpickr-weeks\");\n        weekWrapper.appendChild(weekNumbers);\n        return {\n            weekWrapper: weekWrapper,\n            weekNumbers: weekNumbers,\n        };\n    }\n    function changeMonth(value, isOffset) {\n        if (isOffset === void 0) { isOffset = true; }\n        var delta = isOffset ? value : value - self.currentMonth;\n        if ((delta < 0 && self._hidePrevMonthArrow === true) ||\n            (delta > 0 && self._hideNextMonthArrow === true))\n            return;\n        self.currentMonth += delta;\n        if (self.currentMonth < 0 || self.currentMonth > 11) {\n            self.currentYear += self.currentMonth > 11 ? 1 : -1;\n            self.currentMonth = (self.currentMonth + 12) % 12;\n            triggerEvent(\"onYearChange\");\n            buildMonthSwitch();\n        }\n        buildDays();\n        triggerEvent(\"onMonthChange\");\n        updateNavigationCurrentMonth();\n    }\n    function clear(triggerChangeEvent, toInitial) {\n        if (triggerChangeEvent === void 0) { triggerChangeEvent = true; }\n        if (toInitial === void 0) { toInitial = true; }\n        self.input.value = \"\";\n        if (self.altInput !== undefined)\n            self.altInput.value = \"\";\n        if (self.mobileInput !== undefined)\n            self.mobileInput.value = \"\";\n        self.selectedDates = [];\n        self.latestSelectedDateObj = undefined;\n        if (toInitial === true) {\n            self.currentYear = self._initialDate.getFullYear();\n            self.currentMonth = self._initialDate.getMonth();\n        }\n        if (self.config.enableTime === true) {\n            var _a = (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.getDefaultHours)(self.config), hours = _a.hours, minutes = _a.minutes, seconds = _a.seconds;\n            setHours(hours, minutes, seconds);\n        }\n        self.redraw();\n        if (triggerChangeEvent)\n            triggerEvent(\"onChange\");\n    }\n    function close() {\n        self.isOpen = false;\n        if (!self.isMobile) {\n            if (self.calendarContainer !== undefined) {\n                self.calendarContainer.classList.remove(\"open\");\n            }\n            if (self._input !== undefined) {\n                self._input.classList.remove(\"active\");\n            }\n        }\n        triggerEvent(\"onClose\");\n    }\n    function destroy() {\n        if (self.config !== undefined)\n            triggerEvent(\"onDestroy\");\n        for (var i = self._handlers.length; i--;) {\n            self._handlers[i].remove();\n        }\n        self._handlers = [];\n        if (self.mobileInput) {\n            if (self.mobileInput.parentNode)\n                self.mobileInput.parentNode.removeChild(self.mobileInput);\n            self.mobileInput = undefined;\n        }\n        else if (self.calendarContainer && self.calendarContainer.parentNode) {\n            if (self.config.static && self.calendarContainer.parentNode) {\n                var wrapper = self.calendarContainer.parentNode;\n                wrapper.lastChild && wrapper.removeChild(wrapper.lastChild);\n                if (wrapper.parentNode) {\n                    while (wrapper.firstChild)\n                        wrapper.parentNode.insertBefore(wrapper.firstChild, wrapper);\n                    wrapper.parentNode.removeChild(wrapper);\n                }\n            }\n            else\n                self.calendarContainer.parentNode.removeChild(self.calendarContainer);\n        }\n        if (self.altInput) {\n            self.input.type = \"text\";\n            if (self.altInput.parentNode)\n                self.altInput.parentNode.removeChild(self.altInput);\n            delete self.altInput;\n        }\n        if (self.input) {\n            self.input.type = self.input._type;\n            self.input.classList.remove(\"flatpickr-input\");\n            self.input.removeAttribute(\"readonly\");\n        }\n        [\n            \"_showTimeInput\",\n            \"latestSelectedDateObj\",\n            \"_hideNextMonthArrow\",\n            \"_hidePrevMonthArrow\",\n            \"__hideNextMonthArrow\",\n            \"__hidePrevMonthArrow\",\n            \"isMobile\",\n            \"isOpen\",\n            \"selectedDateElem\",\n            \"minDateHasTime\",\n            \"maxDateHasTime\",\n            \"days\",\n            \"daysContainer\",\n            \"_input\",\n            \"_positionElement\",\n            \"innerContainer\",\n            \"rContainer\",\n            \"monthNav\",\n            \"todayDateElem\",\n            \"calendarContainer\",\n            \"weekdayContainer\",\n            \"prevMonthNav\",\n            \"nextMonthNav\",\n            \"monthsDropdownContainer\",\n            \"currentMonthElement\",\n            \"currentYearElement\",\n            \"navigationCurrentMonth\",\n            \"selectedDateElem\",\n            \"config\",\n        ].forEach(function (k) {\n            try {\n                delete self[k];\n            }\n            catch (_) { }\n        });\n    }\n    function isCalendarElem(elem) {\n        return self.calendarContainer.contains(elem);\n    }\n    function documentClick(e) {\n        if (self.isOpen && !self.config.inline) {\n            var eventTarget_1 = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.getEventTarget)(e);\n            var isCalendarElement = isCalendarElem(eventTarget_1);\n            var isInput = eventTarget_1 === self.input ||\n                eventTarget_1 === self.altInput ||\n                self.element.contains(eventTarget_1) ||\n                (e.path &&\n                    e.path.indexOf &&\n                    (~e.path.indexOf(self.input) ||\n                        ~e.path.indexOf(self.altInput)));\n            var lostFocus = !isInput &&\n                !isCalendarElement &&\n                !isCalendarElem(e.relatedTarget);\n            var isIgnored = !self.config.ignoredFocusElements.some(function (elem) {\n                return elem.contains(eventTarget_1);\n            });\n            if (lostFocus && isIgnored) {\n                if (self.config.allowInput) {\n                    self.setDate(self._input.value, false, self.config.altInput\n                        ? self.config.altFormat\n                        : self.config.dateFormat);\n                }\n                if (self.timeContainer !== undefined &&\n                    self.minuteElement !== undefined &&\n                    self.hourElement !== undefined &&\n                    self.input.value !== \"\" &&\n                    self.input.value !== undefined) {\n                    updateTime();\n                }\n                self.close();\n                if (self.config &&\n                    self.config.mode === \"range\" &&\n                    self.selectedDates.length === 1)\n                    self.clear(false);\n            }\n        }\n    }\n    function changeYear(newYear) {\n        if (!newYear ||\n            (self.config.minDate && newYear < self.config.minDate.getFullYear()) ||\n            (self.config.maxDate && newYear > self.config.maxDate.getFullYear()))\n            return;\n        var newYearNum = newYear, isNewYear = self.currentYear !== newYearNum;\n        self.currentYear = newYearNum || self.currentYear;\n        if (self.config.maxDate &&\n            self.currentYear === self.config.maxDate.getFullYear()) {\n            self.currentMonth = Math.min(self.config.maxDate.getMonth(), self.currentMonth);\n        }\n        else if (self.config.minDate &&\n            self.currentYear === self.config.minDate.getFullYear()) {\n            self.currentMonth = Math.max(self.config.minDate.getMonth(), self.currentMonth);\n        }\n        if (isNewYear) {\n            self.redraw();\n            triggerEvent(\"onYearChange\");\n            buildMonthSwitch();\n        }\n    }\n    function isEnabled(date, timeless) {\n        var _a;\n        if (timeless === void 0) { timeless = true; }\n        var dateToCheck = self.parseDate(date, undefined, timeless);\n        if ((self.config.minDate &&\n            dateToCheck &&\n            (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.compareDates)(dateToCheck, self.config.minDate, timeless !== undefined ? timeless : !self.minDateHasTime) < 0) ||\n            (self.config.maxDate &&\n                dateToCheck &&\n                (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.compareDates)(dateToCheck, self.config.maxDate, timeless !== undefined ? timeless : !self.maxDateHasTime) > 0))\n            return false;\n        if (!self.config.enable && self.config.disable.length === 0)\n            return true;\n        if (dateToCheck === undefined)\n            return false;\n        var bool = !!self.config.enable, array = (_a = self.config.enable) !== null && _a !== void 0 ? _a : self.config.disable;\n        for (var i = 0, d = void 0; i < array.length; i++) {\n            d = array[i];\n            if (typeof d === \"function\" &&\n                d(dateToCheck))\n                return bool;\n            else if (d instanceof Date &&\n                dateToCheck !== undefined &&\n                d.getTime() === dateToCheck.getTime())\n                return bool;\n            else if (typeof d === \"string\") {\n                var parsed = self.parseDate(d, undefined, true);\n                return parsed && parsed.getTime() === dateToCheck.getTime()\n                    ? bool\n                    : !bool;\n            }\n            else if (typeof d === \"object\" &&\n                dateToCheck !== undefined &&\n                d.from &&\n                d.to &&\n                dateToCheck.getTime() >= d.from.getTime() &&\n                dateToCheck.getTime() <= d.to.getTime())\n                return bool;\n        }\n        return !bool;\n    }\n    function isInView(elem) {\n        if (self.daysContainer !== undefined)\n            return (elem.className.indexOf(\"hidden\") === -1 &&\n                elem.className.indexOf(\"flatpickr-disabled\") === -1 &&\n                self.daysContainer.contains(elem));\n        return false;\n    }\n    function onBlur(e) {\n        var isInput = e.target === self._input;\n        var valueChanged = self._input.value.trimEnd() !== getDateStr();\n        if (isInput &&\n            valueChanged &&\n            !(e.relatedTarget && isCalendarElem(e.relatedTarget))) {\n            self.setDate(self._input.value, true, e.target === self.altInput\n                ? self.config.altFormat\n                : self.config.dateFormat);\n        }\n    }\n    function onKeyDown(e) {\n        var eventTarget = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.getEventTarget)(e);\n        var isInput = self.config.wrap\n            ? element.contains(eventTarget)\n            : eventTarget === self._input;\n        var allowInput = self.config.allowInput;\n        var allowKeydown = self.isOpen && (!allowInput || !isInput);\n        var allowInlineKeydown = self.config.inline && isInput && !allowInput;\n        if (e.keyCode === 13 && isInput) {\n            if (allowInput) {\n                self.setDate(self._input.value, true, eventTarget === self.altInput\n                    ? self.config.altFormat\n                    : self.config.dateFormat);\n                self.close();\n                return eventTarget.blur();\n            }\n            else {\n                self.open();\n            }\n        }\n        else if (isCalendarElem(eventTarget) ||\n            allowKeydown ||\n            allowInlineKeydown) {\n            var isTimeObj = !!self.timeContainer &&\n                self.timeContainer.contains(eventTarget);\n            switch (e.keyCode) {\n                case 13:\n                    if (isTimeObj) {\n                        e.preventDefault();\n                        updateTime();\n                        focusAndClose();\n                    }\n                    else\n                        selectDate(e);\n                    break;\n                case 27:\n                    e.preventDefault();\n                    focusAndClose();\n                    break;\n                case 8:\n                case 46:\n                    if (isInput && !self.config.allowInput) {\n                        e.preventDefault();\n                        self.clear();\n                    }\n                    break;\n                case 37:\n                case 39:\n                    if (!isTimeObj && !isInput) {\n                        e.preventDefault();\n                        var activeElement = getClosestActiveElement();\n                        if (self.daysContainer !== undefined &&\n                            (allowInput === false ||\n                                (activeElement && isInView(activeElement)))) {\n                            var delta_1 = e.keyCode === 39 ? 1 : -1;\n                            if (!e.ctrlKey)\n                                focusOnDay(undefined, delta_1);\n                            else {\n                                e.stopPropagation();\n                                changeMonth(delta_1);\n                                focusOnDay(getFirstAvailableDay(1), 0);\n                            }\n                        }\n                    }\n                    else if (self.hourElement)\n                        self.hourElement.focus();\n                    break;\n                case 38:\n                case 40:\n                    e.preventDefault();\n                    var delta = e.keyCode === 40 ? 1 : -1;\n                    if ((self.daysContainer &&\n                        eventTarget.$i !== undefined) ||\n                        eventTarget === self.input ||\n                        eventTarget === self.altInput) {\n                        if (e.ctrlKey) {\n                            e.stopPropagation();\n                            changeYear(self.currentYear - delta);\n                            focusOnDay(getFirstAvailableDay(1), 0);\n                        }\n                        else if (!isTimeObj)\n                            focusOnDay(undefined, delta * 7);\n                    }\n                    else if (eventTarget === self.currentYearElement) {\n                        changeYear(self.currentYear - delta);\n                    }\n                    else if (self.config.enableTime) {\n                        if (!isTimeObj && self.hourElement)\n                            self.hourElement.focus();\n                        updateTime(e);\n                        self._debouncedChange();\n                    }\n                    break;\n                case 9:\n                    if (isTimeObj) {\n                        var elems = [\n                            self.hourElement,\n                            self.minuteElement,\n                            self.secondElement,\n                            self.amPM,\n                        ]\n                            .concat(self.pluginElements)\n                            .filter(function (x) { return x; });\n                        var i = elems.indexOf(eventTarget);\n                        if (i !== -1) {\n                            var target = elems[i + (e.shiftKey ? -1 : 1)];\n                            e.preventDefault();\n                            (target || self._input).focus();\n                        }\n                    }\n                    else if (!self.config.noCalendar &&\n                        self.daysContainer &&\n                        self.daysContainer.contains(eventTarget) &&\n                        e.shiftKey) {\n                        e.preventDefault();\n                        self._input.focus();\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n        if (self.amPM !== undefined && eventTarget === self.amPM) {\n            switch (e.key) {\n                case self.l10n.amPM[0].charAt(0):\n                case self.l10n.amPM[0].charAt(0).toLowerCase():\n                    self.amPM.textContent = self.l10n.amPM[0];\n                    setHoursFromInputs();\n                    updateValue();\n                    break;\n                case self.l10n.amPM[1].charAt(0):\n                case self.l10n.amPM[1].charAt(0).toLowerCase():\n                    self.amPM.textContent = self.l10n.amPM[1];\n                    setHoursFromInputs();\n                    updateValue();\n                    break;\n            }\n        }\n        if (isInput || isCalendarElem(eventTarget)) {\n            triggerEvent(\"onKeyDown\", e);\n        }\n    }\n    function onMouseOver(elem, cellClass) {\n        if (cellClass === void 0) { cellClass = \"flatpickr-day\"; }\n        if (self.selectedDates.length !== 1 ||\n            (elem &&\n                (!elem.classList.contains(cellClass) ||\n                    elem.classList.contains(\"flatpickr-disabled\"))))\n            return;\n        var hoverDate = elem\n            ? elem.dateObj.getTime()\n            : self.days.firstElementChild.dateObj.getTime(), initialDate = self.parseDate(self.selectedDates[0], undefined, true).getTime(), rangeStartDate = Math.min(hoverDate, self.selectedDates[0].getTime()), rangeEndDate = Math.max(hoverDate, self.selectedDates[0].getTime());\n        var containsDisabled = false;\n        var minRange = 0, maxRange = 0;\n        for (var t = rangeStartDate; t < rangeEndDate; t += _utils_dates__WEBPACK_IMPORTED_MODULE_4__.duration.DAY) {\n            if (!isEnabled(new Date(t), true)) {\n                containsDisabled =\n                    containsDisabled || (t > rangeStartDate && t < rangeEndDate);\n                if (t < initialDate && (!minRange || t > minRange))\n                    minRange = t;\n                else if (t > initialDate && (!maxRange || t < maxRange))\n                    maxRange = t;\n            }\n        }\n        var hoverableCells = Array.from(self.rContainer.querySelectorAll(\"*:nth-child(-n+\" + self.config.showMonths + \") > .\" + cellClass));\n        hoverableCells.forEach(function (dayElem) {\n            var date = dayElem.dateObj;\n            var timestamp = date.getTime();\n            var outOfRange = (minRange > 0 && timestamp < minRange) ||\n                (maxRange > 0 && timestamp > maxRange);\n            if (outOfRange) {\n                dayElem.classList.add(\"notAllowed\");\n                [\"inRange\", \"startRange\", \"endRange\"].forEach(function (c) {\n                    dayElem.classList.remove(c);\n                });\n                return;\n            }\n            else if (containsDisabled && !outOfRange)\n                return;\n            [\"startRange\", \"inRange\", \"endRange\", \"notAllowed\"].forEach(function (c) {\n                dayElem.classList.remove(c);\n            });\n            if (elem !== undefined) {\n                elem.classList.add(hoverDate <= self.selectedDates[0].getTime()\n                    ? \"startRange\"\n                    : \"endRange\");\n                if (initialDate < hoverDate && timestamp === initialDate)\n                    dayElem.classList.add(\"startRange\");\n                else if (initialDate > hoverDate && timestamp === initialDate)\n                    dayElem.classList.add(\"endRange\");\n                if (timestamp >= minRange &&\n                    (maxRange === 0 || timestamp <= maxRange) &&\n                    (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.isBetween)(timestamp, initialDate, hoverDate))\n                    dayElem.classList.add(\"inRange\");\n            }\n        });\n    }\n    function onResize() {\n        if (self.isOpen && !self.config.static && !self.config.inline)\n            positionCalendar();\n    }\n    function open(e, positionElement) {\n        if (positionElement === void 0) { positionElement = self._positionElement; }\n        if (self.isMobile === true) {\n            if (e) {\n                e.preventDefault();\n                var eventTarget = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.getEventTarget)(e);\n                if (eventTarget) {\n                    eventTarget.blur();\n                }\n            }\n            if (self.mobileInput !== undefined) {\n                self.mobileInput.focus();\n                self.mobileInput.click();\n            }\n            triggerEvent(\"onOpen\");\n            return;\n        }\n        else if (self._input.disabled || self.config.inline) {\n            return;\n        }\n        var wasOpen = self.isOpen;\n        self.isOpen = true;\n        if (!wasOpen) {\n            self.calendarContainer.classList.add(\"open\");\n            self._input.classList.add(\"active\");\n            triggerEvent(\"onOpen\");\n            positionCalendar(positionElement);\n        }\n        if (self.config.enableTime === true && self.config.noCalendar === true) {\n            if (self.config.allowInput === false &&\n                (e === undefined ||\n                    !self.timeContainer.contains(e.relatedTarget))) {\n                setTimeout(function () { return self.hourElement.select(); }, 50);\n            }\n        }\n    }\n    function minMaxDateSetter(type) {\n        return function (date) {\n            var dateObj = (self.config[\"_\" + type + \"Date\"] = self.parseDate(date, self.config.dateFormat));\n            var inverseDateObj = self.config[\"_\" + (type === \"min\" ? \"max\" : \"min\") + \"Date\"];\n            if (dateObj !== undefined) {\n                self[type === \"min\" ? \"minDateHasTime\" : \"maxDateHasTime\"] =\n                    dateObj.getHours() > 0 ||\n                        dateObj.getMinutes() > 0 ||\n                        dateObj.getSeconds() > 0;\n            }\n            if (self.selectedDates) {\n                self.selectedDates = self.selectedDates.filter(function (d) { return isEnabled(d); });\n                if (!self.selectedDates.length && type === \"min\")\n                    setHoursFromDate(dateObj);\n                updateValue();\n            }\n            if (self.daysContainer) {\n                redraw();\n                if (dateObj !== undefined)\n                    self.currentYearElement[type] = dateObj.getFullYear().toString();\n                else\n                    self.currentYearElement.removeAttribute(type);\n                self.currentYearElement.disabled =\n                    !!inverseDateObj &&\n                        dateObj !== undefined &&\n                        inverseDateObj.getFullYear() === dateObj.getFullYear();\n            }\n        };\n    }\n    function parseConfig() {\n        var boolOpts = [\n            \"wrap\",\n            \"weekNumbers\",\n            \"allowInput\",\n            \"allowInvalidPreload\",\n            \"clickOpens\",\n            \"time_24hr\",\n            \"enableTime\",\n            \"noCalendar\",\n            \"altInput\",\n            \"shorthandCurrentMonth\",\n            \"inline\",\n            \"static\",\n            \"enableSeconds\",\n            \"disableMobile\",\n        ];\n        var userConfig = __assign(__assign({}, JSON.parse(JSON.stringify(element.dataset || {}))), instanceConfig);\n        var formats = {};\n        self.config.parseDate = userConfig.parseDate;\n        self.config.formatDate = userConfig.formatDate;\n        Object.defineProperty(self.config, \"enable\", {\n            get: function () { return self.config._enable; },\n            set: function (dates) {\n                self.config._enable = parseDateRules(dates);\n            },\n        });\n        Object.defineProperty(self.config, \"disable\", {\n            get: function () { return self.config._disable; },\n            set: function (dates) {\n                self.config._disable = parseDateRules(dates);\n            },\n        });\n        var timeMode = userConfig.mode === \"time\";\n        if (!userConfig.dateFormat && (userConfig.enableTime || timeMode)) {\n            var defaultDateFormat = flatpickr.defaultConfig.dateFormat || _types_options__WEBPACK_IMPORTED_MODULE_0__.defaults.dateFormat;\n            formats.dateFormat =\n                userConfig.noCalendar || timeMode\n                    ? \"H:i\" + (userConfig.enableSeconds ? \":S\" : \"\")\n                    : defaultDateFormat + \" H:i\" + (userConfig.enableSeconds ? \":S\" : \"\");\n        }\n        if (userConfig.altInput &&\n            (userConfig.enableTime || timeMode) &&\n            !userConfig.altFormat) {\n            var defaultAltFormat = flatpickr.defaultConfig.altFormat || _types_options__WEBPACK_IMPORTED_MODULE_0__.defaults.altFormat;\n            formats.altFormat =\n                userConfig.noCalendar || timeMode\n                    ? \"h:i\" + (userConfig.enableSeconds ? \":S K\" : \" K\")\n                    : defaultAltFormat + (\" h:i\" + (userConfig.enableSeconds ? \":S\" : \"\") + \" K\");\n        }\n        Object.defineProperty(self.config, \"minDate\", {\n            get: function () { return self.config._minDate; },\n            set: minMaxDateSetter(\"min\"),\n        });\n        Object.defineProperty(self.config, \"maxDate\", {\n            get: function () { return self.config._maxDate; },\n            set: minMaxDateSetter(\"max\"),\n        });\n        var minMaxTimeSetter = function (type) { return function (val) {\n            self.config[type === \"min\" ? \"_minTime\" : \"_maxTime\"] = self.parseDate(val, \"H:i:S\");\n        }; };\n        Object.defineProperty(self.config, \"minTime\", {\n            get: function () { return self.config._minTime; },\n            set: minMaxTimeSetter(\"min\"),\n        });\n        Object.defineProperty(self.config, \"maxTime\", {\n            get: function () { return self.config._maxTime; },\n            set: minMaxTimeSetter(\"max\"),\n        });\n        if (userConfig.mode === \"time\") {\n            self.config.noCalendar = true;\n            self.config.enableTime = true;\n        }\n        Object.assign(self.config, formats, userConfig);\n        for (var i = 0; i < boolOpts.length; i++)\n            self.config[boolOpts[i]] =\n                self.config[boolOpts[i]] === true ||\n                    self.config[boolOpts[i]] === \"true\";\n        _types_options__WEBPACK_IMPORTED_MODULE_0__.HOOKS.filter(function (hook) { return self.config[hook] !== undefined; }).forEach(function (hook) {\n            self.config[hook] = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.arrayify)(self.config[hook] || []).map(bindToInstance);\n        });\n        self.isMobile =\n            !self.config.disableMobile &&\n                !self.config.inline &&\n                self.config.mode === \"single\" &&\n                !self.config.disable.length &&\n                !self.config.enable &&\n                !self.config.weekNumbers &&\n                /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n        for (var i = 0; i < self.config.plugins.length; i++) {\n            var pluginConf = self.config.plugins[i](self) || {};\n            for (var key in pluginConf) {\n                if (_types_options__WEBPACK_IMPORTED_MODULE_0__.HOOKS.indexOf(key) > -1) {\n                    self.config[key] = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.arrayify)(pluginConf[key])\n                        .map(bindToInstance)\n                        .concat(self.config[key]);\n                }\n                else if (typeof userConfig[key] === \"undefined\")\n                    self.config[key] = pluginConf[key];\n            }\n        }\n        if (!userConfig.altInputClass) {\n            self.config.altInputClass =\n                getInputElem().className + \" \" + self.config.altInputClass;\n        }\n        triggerEvent(\"onParseConfig\");\n    }\n    function getInputElem() {\n        return self.config.wrap\n            ? element.querySelector(\"[data-input]\")\n            : element;\n    }\n    function setupLocale() {\n        if (typeof self.config.locale !== \"object\" &&\n            typeof flatpickr.l10ns[self.config.locale] === \"undefined\")\n            self.config.errorHandler(new Error(\"flatpickr: invalid locale \" + self.config.locale));\n        self.l10n = __assign(__assign({}, flatpickr.l10ns.default), (typeof self.config.locale === \"object\"\n            ? self.config.locale\n            : self.config.locale !== \"default\"\n                ? flatpickr.l10ns[self.config.locale]\n                : undefined));\n        _utils_formatting__WEBPACK_IMPORTED_MODULE_5__.tokenRegex.D = \"(\" + self.l10n.weekdays.shorthand.join(\"|\") + \")\";\n        _utils_formatting__WEBPACK_IMPORTED_MODULE_5__.tokenRegex.l = \"(\" + self.l10n.weekdays.longhand.join(\"|\") + \")\";\n        _utils_formatting__WEBPACK_IMPORTED_MODULE_5__.tokenRegex.M = \"(\" + self.l10n.months.shorthand.join(\"|\") + \")\";\n        _utils_formatting__WEBPACK_IMPORTED_MODULE_5__.tokenRegex.F = \"(\" + self.l10n.months.longhand.join(\"|\") + \")\";\n        _utils_formatting__WEBPACK_IMPORTED_MODULE_5__.tokenRegex.K = \"(\" + self.l10n.amPM[0] + \"|\" + self.l10n.amPM[1] + \"|\" + self.l10n.amPM[0].toLowerCase() + \"|\" + self.l10n.amPM[1].toLowerCase() + \")\";\n        var userConfig = __assign(__assign({}, instanceConfig), JSON.parse(JSON.stringify(element.dataset || {})));\n        if (userConfig.time_24hr === undefined &&\n            flatpickr.defaultConfig.time_24hr === undefined) {\n            self.config.time_24hr = self.l10n.time_24hr;\n        }\n        self.formatDate = (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.createDateFormatter)(self);\n        self.parseDate = (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.createDateParser)({ config: self.config, l10n: self.l10n });\n    }\n    function positionCalendar(customPositionElement) {\n        if (typeof self.config.position === \"function\") {\n            return void self.config.position(self, customPositionElement);\n        }\n        if (self.calendarContainer === undefined)\n            return;\n        triggerEvent(\"onPreCalendarPosition\");\n        var positionElement = customPositionElement || self._positionElement;\n        var calendarHeight = Array.prototype.reduce.call(self.calendarContainer.children, (function (acc, child) { return acc + child.offsetHeight; }), 0), calendarWidth = self.calendarContainer.offsetWidth, configPos = self.config.position.split(\" \"), configPosVertical = configPos[0], configPosHorizontal = configPos.length > 1 ? configPos[1] : null, inputBounds = positionElement.getBoundingClientRect(), distanceFromBottom = window.innerHeight - inputBounds.bottom, showOnTop = configPosVertical === \"above\" ||\n            (configPosVertical !== \"below\" &&\n                distanceFromBottom < calendarHeight &&\n                inputBounds.top > calendarHeight);\n        var top = window.pageYOffset +\n            inputBounds.top +\n            (!showOnTop ? positionElement.offsetHeight + 2 : -calendarHeight - 2);\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(self.calendarContainer, \"arrowTop\", !showOnTop);\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(self.calendarContainer, \"arrowBottom\", showOnTop);\n        if (self.config.inline)\n            return;\n        var left = window.pageXOffset + inputBounds.left;\n        var isCenter = false;\n        var isRight = false;\n        if (configPosHorizontal === \"center\") {\n            left -= (calendarWidth - inputBounds.width) / 2;\n            isCenter = true;\n        }\n        else if (configPosHorizontal === \"right\") {\n            left -= calendarWidth - inputBounds.width;\n            isRight = true;\n        }\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(self.calendarContainer, \"arrowLeft\", !isCenter && !isRight);\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(self.calendarContainer, \"arrowCenter\", isCenter);\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(self.calendarContainer, \"arrowRight\", isRight);\n        var right = window.document.body.offsetWidth -\n            (window.pageXOffset + inputBounds.right);\n        var rightMost = left + calendarWidth > window.document.body.offsetWidth;\n        var centerMost = right + calendarWidth > window.document.body.offsetWidth;\n        (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(self.calendarContainer, \"rightMost\", rightMost);\n        if (self.config.static)\n            return;\n        self.calendarContainer.style.top = top + \"px\";\n        if (!rightMost) {\n            self.calendarContainer.style.left = left + \"px\";\n            self.calendarContainer.style.right = \"auto\";\n        }\n        else if (!centerMost) {\n            self.calendarContainer.style.left = \"auto\";\n            self.calendarContainer.style.right = right + \"px\";\n        }\n        else {\n            var doc = getDocumentStyleSheet();\n            if (doc === undefined)\n                return;\n            var bodyWidth = window.document.body.offsetWidth;\n            var centerLeft = Math.max(0, bodyWidth / 2 - calendarWidth / 2);\n            var centerBefore = \".flatpickr-calendar.centerMost:before\";\n            var centerAfter = \".flatpickr-calendar.centerMost:after\";\n            var centerIndex = doc.cssRules.length;\n            var centerStyle = \"{left:\" + inputBounds.left + \"px;right:auto;}\";\n            (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(self.calendarContainer, \"rightMost\", false);\n            (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.toggleClass)(self.calendarContainer, \"centerMost\", true);\n            doc.insertRule(centerBefore + \",\" + centerAfter + centerStyle, centerIndex);\n            self.calendarContainer.style.left = centerLeft + \"px\";\n            self.calendarContainer.style.right = \"auto\";\n        }\n    }\n    function getDocumentStyleSheet() {\n        var editableSheet = null;\n        for (var i = 0; i < document.styleSheets.length; i++) {\n            var sheet = document.styleSheets[i];\n            if (!sheet.cssRules)\n                continue;\n            try {\n                sheet.cssRules;\n            }\n            catch (err) {\n                continue;\n            }\n            editableSheet = sheet;\n            break;\n        }\n        return editableSheet != null ? editableSheet : createStyleSheet();\n    }\n    function createStyleSheet() {\n        var style = document.createElement(\"style\");\n        document.head.appendChild(style);\n        return style.sheet;\n    }\n    function redraw() {\n        if (self.config.noCalendar || self.isMobile)\n            return;\n        buildMonthSwitch();\n        updateNavigationCurrentMonth();\n        buildDays();\n    }\n    function focusAndClose() {\n        self._input.focus();\n        if (window.navigator.userAgent.indexOf(\"MSIE\") !== -1 ||\n            navigator.msMaxTouchPoints !== undefined) {\n            setTimeout(self.close, 0);\n        }\n        else {\n            self.close();\n        }\n    }\n    function selectDate(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        var isSelectable = function (day) {\n            return day.classList &&\n                day.classList.contains(\"flatpickr-day\") &&\n                !day.classList.contains(\"flatpickr-disabled\") &&\n                !day.classList.contains(\"notAllowed\");\n        };\n        var t = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.findParent)((0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.getEventTarget)(e), isSelectable);\n        if (t === undefined)\n            return;\n        var target = t;\n        var selectedDate = (self.latestSelectedDateObj = new Date(target.dateObj.getTime()));\n        var shouldChangeMonth = (selectedDate.getMonth() < self.currentMonth ||\n            selectedDate.getMonth() >\n                self.currentMonth + self.config.showMonths - 1) &&\n            self.config.mode !== \"range\";\n        self.selectedDateElem = target;\n        if (self.config.mode === \"single\")\n            self.selectedDates = [selectedDate];\n        else if (self.config.mode === \"multiple\") {\n            var selectedIndex = isDateSelected(selectedDate);\n            if (selectedIndex)\n                self.selectedDates.splice(parseInt(selectedIndex), 1);\n            else\n                self.selectedDates.push(selectedDate);\n        }\n        else if (self.config.mode === \"range\") {\n            if (self.selectedDates.length === 2) {\n                self.clear(false, false);\n            }\n            self.latestSelectedDateObj = selectedDate;\n            self.selectedDates.push(selectedDate);\n            if ((0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.compareDates)(selectedDate, self.selectedDates[0], true) !== 0)\n                self.selectedDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n        }\n        setHoursFromInputs();\n        if (shouldChangeMonth) {\n            var isNewYear = self.currentYear !== selectedDate.getFullYear();\n            self.currentYear = selectedDate.getFullYear();\n            self.currentMonth = selectedDate.getMonth();\n            if (isNewYear) {\n                triggerEvent(\"onYearChange\");\n                buildMonthSwitch();\n            }\n            triggerEvent(\"onMonthChange\");\n        }\n        updateNavigationCurrentMonth();\n        buildDays();\n        updateValue();\n        if (!shouldChangeMonth &&\n            self.config.mode !== \"range\" &&\n            self.config.showMonths === 1)\n            focusOnDayElem(target);\n        else if (self.selectedDateElem !== undefined &&\n            self.hourElement === undefined) {\n            self.selectedDateElem && self.selectedDateElem.focus();\n        }\n        if (self.hourElement !== undefined)\n            self.hourElement !== undefined && self.hourElement.focus();\n        if (self.config.closeOnSelect) {\n            var single = self.config.mode === \"single\" && !self.config.enableTime;\n            var range = self.config.mode === \"range\" &&\n                self.selectedDates.length === 2 &&\n                !self.config.enableTime;\n            if (single || range) {\n                focusAndClose();\n            }\n        }\n        triggerChange();\n    }\n    var CALLBACKS = {\n        locale: [setupLocale, updateWeekdays],\n        showMonths: [buildMonths, setCalendarWidth, buildWeekdays],\n        minDate: [jumpToDate],\n        maxDate: [jumpToDate],\n        positionElement: [updatePositionElement],\n        clickOpens: [\n            function () {\n                if (self.config.clickOpens === true) {\n                    bind(self._input, \"focus\", self.open);\n                    bind(self._input, \"click\", self.open);\n                }\n                else {\n                    self._input.removeEventListener(\"focus\", self.open);\n                    self._input.removeEventListener(\"click\", self.open);\n                }\n            },\n        ],\n    };\n    function set(option, value) {\n        if (option !== null && typeof option === \"object\") {\n            Object.assign(self.config, option);\n            for (var key in option) {\n                if (CALLBACKS[key] !== undefined)\n                    CALLBACKS[key].forEach(function (x) { return x(); });\n            }\n        }\n        else {\n            self.config[option] = value;\n            if (CALLBACKS[option] !== undefined)\n                CALLBACKS[option].forEach(function (x) { return x(); });\n            else if (_types_options__WEBPACK_IMPORTED_MODULE_0__.HOOKS.indexOf(option) > -1)\n                self.config[option] = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.arrayify)(value);\n        }\n        self.redraw();\n        updateValue(true);\n    }\n    function setSelectedDate(inputDate, format) {\n        var dates = [];\n        if (inputDate instanceof Array)\n            dates = inputDate.map(function (d) { return self.parseDate(d, format); });\n        else if (inputDate instanceof Date || typeof inputDate === \"number\")\n            dates = [self.parseDate(inputDate, format)];\n        else if (typeof inputDate === \"string\") {\n            switch (self.config.mode) {\n                case \"single\":\n                case \"time\":\n                    dates = [self.parseDate(inputDate, format)];\n                    break;\n                case \"multiple\":\n                    dates = inputDate\n                        .split(self.config.conjunction)\n                        .map(function (date) { return self.parseDate(date, format); });\n                    break;\n                case \"range\":\n                    dates = inputDate\n                        .split(self.l10n.rangeSeparator)\n                        .map(function (date) { return self.parseDate(date, format); });\n                    break;\n                default:\n                    break;\n            }\n        }\n        else\n            self.config.errorHandler(new Error(\"Invalid date supplied: \" + JSON.stringify(inputDate)));\n        self.selectedDates = (self.config.allowInvalidPreload\n            ? dates\n            : dates.filter(function (d) { return d instanceof Date && isEnabled(d, false); }));\n        if (self.config.mode === \"range\")\n            self.selectedDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n    }\n    function setDate(date, triggerChange, format) {\n        if (triggerChange === void 0) { triggerChange = false; }\n        if (format === void 0) { format = self.config.dateFormat; }\n        if ((date !== 0 && !date) || (date instanceof Array && date.length === 0))\n            return self.clear(triggerChange);\n        setSelectedDate(date, format);\n        self.latestSelectedDateObj =\n            self.selectedDates[self.selectedDates.length - 1];\n        self.redraw();\n        jumpToDate(undefined, triggerChange);\n        setHoursFromDate();\n        if (self.selectedDates.length === 0) {\n            self.clear(false);\n        }\n        updateValue(triggerChange);\n        if (triggerChange)\n            triggerEvent(\"onChange\");\n    }\n    function parseDateRules(arr) {\n        return arr\n            .slice()\n            .map(function (rule) {\n            if (typeof rule === \"string\" ||\n                typeof rule === \"number\" ||\n                rule instanceof Date) {\n                return self.parseDate(rule, undefined, true);\n            }\n            else if (rule &&\n                typeof rule === \"object\" &&\n                rule.from &&\n                rule.to)\n                return {\n                    from: self.parseDate(rule.from, undefined),\n                    to: self.parseDate(rule.to, undefined),\n                };\n            return rule;\n        })\n            .filter(function (x) { return x; });\n    }\n    function setupDates() {\n        self.selectedDates = [];\n        self.now = self.parseDate(self.config.now) || new Date();\n        var preloadedDate = self.config.defaultDate ||\n            ((self.input.nodeName === \"INPUT\" ||\n                self.input.nodeName === \"TEXTAREA\") &&\n                self.input.placeholder &&\n                self.input.value === self.input.placeholder\n                ? null\n                : self.input.value);\n        if (preloadedDate)\n            setSelectedDate(preloadedDate, self.config.dateFormat);\n        self._initialDate =\n            self.selectedDates.length > 0\n                ? self.selectedDates[0]\n                : self.config.minDate &&\n                    self.config.minDate.getTime() > self.now.getTime()\n                    ? self.config.minDate\n                    : self.config.maxDate &&\n                        self.config.maxDate.getTime() < self.now.getTime()\n                        ? self.config.maxDate\n                        : self.now;\n        self.currentYear = self._initialDate.getFullYear();\n        self.currentMonth = self._initialDate.getMonth();\n        if (self.selectedDates.length > 0)\n            self.latestSelectedDateObj = self.selectedDates[0];\n        if (self.config.minTime !== undefined)\n            self.config.minTime = self.parseDate(self.config.minTime, \"H:i\");\n        if (self.config.maxTime !== undefined)\n            self.config.maxTime = self.parseDate(self.config.maxTime, \"H:i\");\n        self.minDateHasTime =\n            !!self.config.minDate &&\n                (self.config.minDate.getHours() > 0 ||\n                    self.config.minDate.getMinutes() > 0 ||\n                    self.config.minDate.getSeconds() > 0);\n        self.maxDateHasTime =\n            !!self.config.maxDate &&\n                (self.config.maxDate.getHours() > 0 ||\n                    self.config.maxDate.getMinutes() > 0 ||\n                    self.config.maxDate.getSeconds() > 0);\n    }\n    function setupInputs() {\n        self.input = getInputElem();\n        if (!self.input) {\n            self.config.errorHandler(new Error(\"Invalid input element specified\"));\n            return;\n        }\n        self.input._type = self.input.type;\n        self.input.type = \"text\";\n        self.input.classList.add(\"flatpickr-input\");\n        self._input = self.input;\n        if (self.config.altInput) {\n            self.altInput = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(self.input.nodeName, self.config.altInputClass);\n            self._input = self.altInput;\n            self.altInput.placeholder = self.input.placeholder;\n            self.altInput.disabled = self.input.disabled;\n            self.altInput.required = self.input.required;\n            self.altInput.tabIndex = self.input.tabIndex;\n            self.altInput.type = \"text\";\n            self.input.setAttribute(\"type\", \"hidden\");\n            if (!self.config.static && self.input.parentNode)\n                self.input.parentNode.insertBefore(self.altInput, self.input.nextSibling);\n        }\n        if (!self.config.allowInput)\n            self._input.setAttribute(\"readonly\", \"readonly\");\n        updatePositionElement();\n    }\n    function updatePositionElement() {\n        self._positionElement = self.config.positionElement || self._input;\n    }\n    function setupMobile() {\n        var inputType = self.config.enableTime\n            ? self.config.noCalendar\n                ? \"time\"\n                : \"datetime-local\"\n            : \"date\";\n        self.mobileInput = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.createElement)(\"input\", self.input.className + \" flatpickr-mobile\");\n        self.mobileInput.tabIndex = 1;\n        self.mobileInput.type = inputType;\n        self.mobileInput.disabled = self.input.disabled;\n        self.mobileInput.required = self.input.required;\n        self.mobileInput.placeholder = self.input.placeholder;\n        self.mobileFormatStr =\n            inputType === \"datetime-local\"\n                ? \"Y-m-d\\\\TH:i:S\"\n                : inputType === \"date\"\n                    ? \"Y-m-d\"\n                    : \"H:i:S\";\n        if (self.selectedDates.length > 0) {\n            self.mobileInput.defaultValue = self.mobileInput.value = self.formatDate(self.selectedDates[0], self.mobileFormatStr);\n        }\n        if (self.config.minDate)\n            self.mobileInput.min = self.formatDate(self.config.minDate, \"Y-m-d\");\n        if (self.config.maxDate)\n            self.mobileInput.max = self.formatDate(self.config.maxDate, \"Y-m-d\");\n        if (self.input.getAttribute(\"step\"))\n            self.mobileInput.step = String(self.input.getAttribute(\"step\"));\n        self.input.type = \"hidden\";\n        if (self.altInput !== undefined)\n            self.altInput.type = \"hidden\";\n        try {\n            if (self.input.parentNode)\n                self.input.parentNode.insertBefore(self.mobileInput, self.input.nextSibling);\n        }\n        catch (_a) { }\n        bind(self.mobileInput, \"change\", function (e) {\n            self.setDate((0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.getEventTarget)(e).value, false, self.mobileFormatStr);\n            triggerEvent(\"onChange\");\n            triggerEvent(\"onClose\");\n        });\n    }\n    function toggle(e) {\n        if (self.isOpen === true)\n            return self.close();\n        self.open(e);\n    }\n    function triggerEvent(event, data) {\n        if (self.config === undefined)\n            return;\n        var hooks = self.config[event];\n        if (hooks !== undefined && hooks.length > 0) {\n            for (var i = 0; hooks[i] && i < hooks.length; i++)\n                hooks[i](self.selectedDates, self.input.value, self, data);\n        }\n        if (event === \"onChange\") {\n            self.input.dispatchEvent(createEvent(\"change\"));\n            self.input.dispatchEvent(createEvent(\"input\"));\n        }\n    }\n    function createEvent(name) {\n        var e = document.createEvent(\"Event\");\n        e.initEvent(name, true, true);\n        return e;\n    }\n    function isDateSelected(date) {\n        for (var i = 0; i < self.selectedDates.length; i++) {\n            var selectedDate = self.selectedDates[i];\n            if (selectedDate instanceof Date &&\n                (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.compareDates)(selectedDate, date) === 0)\n                return \"\" + i;\n        }\n        return false;\n    }\n    function isDateInRange(date) {\n        if (self.config.mode !== \"range\" || self.selectedDates.length < 2)\n            return false;\n        return ((0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.compareDates)(date, self.selectedDates[0]) >= 0 &&\n            (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.compareDates)(date, self.selectedDates[1]) <= 0);\n    }\n    function updateNavigationCurrentMonth() {\n        if (self.config.noCalendar || self.isMobile || !self.monthNav)\n            return;\n        self.yearElements.forEach(function (yearElement, i) {\n            var d = new Date(self.currentYear, self.currentMonth, 1);\n            d.setMonth(self.currentMonth + i);\n            if (self.config.showMonths > 1 ||\n                self.config.monthSelectorType === \"static\") {\n                self.monthElements[i].textContent =\n                    (0,_utils_formatting__WEBPACK_IMPORTED_MODULE_5__.monthToStr)(d.getMonth(), self.config.shorthandCurrentMonth, self.l10n) + \" \";\n            }\n            else {\n                self.monthsDropdownContainer.value = d.getMonth().toString();\n            }\n            yearElement.value = d.getFullYear().toString();\n        });\n        self._hidePrevMonthArrow =\n            self.config.minDate !== undefined &&\n                (self.currentYear === self.config.minDate.getFullYear()\n                    ? self.currentMonth <= self.config.minDate.getMonth()\n                    : self.currentYear < self.config.minDate.getFullYear());\n        self._hideNextMonthArrow =\n            self.config.maxDate !== undefined &&\n                (self.currentYear === self.config.maxDate.getFullYear()\n                    ? self.currentMonth + 1 > self.config.maxDate.getMonth()\n                    : self.currentYear > self.config.maxDate.getFullYear());\n    }\n    function getDateStr(specificFormat) {\n        var format = specificFormat ||\n            (self.config.altInput ? self.config.altFormat : self.config.dateFormat);\n        return self.selectedDates\n            .map(function (dObj) { return self.formatDate(dObj, format); })\n            .filter(function (d, i, arr) {\n            return self.config.mode !== \"range\" ||\n                self.config.enableTime ||\n                arr.indexOf(d) === i;\n        })\n            .join(self.config.mode !== \"range\"\n            ? self.config.conjunction\n            : self.l10n.rangeSeparator);\n    }\n    function updateValue(triggerChange) {\n        if (triggerChange === void 0) { triggerChange = true; }\n        if (self.mobileInput !== undefined && self.mobileFormatStr) {\n            self.mobileInput.value =\n                self.latestSelectedDateObj !== undefined\n                    ? self.formatDate(self.latestSelectedDateObj, self.mobileFormatStr)\n                    : \"\";\n        }\n        self.input.value = getDateStr(self.config.dateFormat);\n        if (self.altInput !== undefined) {\n            self.altInput.value = getDateStr(self.config.altFormat);\n        }\n        if (triggerChange !== false)\n            triggerEvent(\"onValueUpdate\");\n    }\n    function onMonthNavClick(e) {\n        var eventTarget = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.getEventTarget)(e);\n        var isPrevMonth = self.prevMonthNav.contains(eventTarget);\n        var isNextMonth = self.nextMonthNav.contains(eventTarget);\n        if (isPrevMonth || isNextMonth) {\n            changeMonth(isPrevMonth ? -1 : 1);\n        }\n        else if (self.yearElements.indexOf(eventTarget) >= 0) {\n            eventTarget.select();\n        }\n        else if (eventTarget.classList.contains(\"arrowUp\")) {\n            self.changeYear(self.currentYear + 1);\n        }\n        else if (eventTarget.classList.contains(\"arrowDown\")) {\n            self.changeYear(self.currentYear - 1);\n        }\n    }\n    function timeWrapper(e) {\n        e.preventDefault();\n        var isKeyDown = e.type === \"keydown\", eventTarget = (0,_utils_dom__WEBPACK_IMPORTED_MODULE_3__.getEventTarget)(e), input = eventTarget;\n        if (self.amPM !== undefined && eventTarget === self.amPM) {\n            self.amPM.textContent =\n                self.l10n.amPM[(0,_utils__WEBPACK_IMPORTED_MODULE_2__.int)(self.amPM.textContent === self.l10n.amPM[0])];\n        }\n        var min = parseFloat(input.getAttribute(\"min\")), max = parseFloat(input.getAttribute(\"max\")), step = parseFloat(input.getAttribute(\"step\")), curValue = parseInt(input.value, 10), delta = e.delta ||\n            (isKeyDown ? (e.which === 38 ? 1 : -1) : 0);\n        var newValue = curValue + step * delta;\n        if (typeof input.value !== \"undefined\" && input.value.length === 2) {\n            var isHourElem = input === self.hourElement, isMinuteElem = input === self.minuteElement;\n            if (newValue < min) {\n                newValue =\n                    max +\n                        newValue +\n                        (0,_utils__WEBPACK_IMPORTED_MODULE_2__.int)(!isHourElem) +\n                        ((0,_utils__WEBPACK_IMPORTED_MODULE_2__.int)(isHourElem) && (0,_utils__WEBPACK_IMPORTED_MODULE_2__.int)(!self.amPM));\n                if (isMinuteElem)\n                    incrementNumInput(undefined, -1, self.hourElement);\n            }\n            else if (newValue > max) {\n                newValue =\n                    input === self.hourElement ? newValue - max - (0,_utils__WEBPACK_IMPORTED_MODULE_2__.int)(!self.amPM) : min;\n                if (isMinuteElem)\n                    incrementNumInput(undefined, 1, self.hourElement);\n            }\n            if (self.amPM &&\n                isHourElem &&\n                (step === 1\n                    ? newValue + curValue === 23\n                    : Math.abs(newValue - curValue) > step)) {\n                self.amPM.textContent =\n                    self.l10n.amPM[(0,_utils__WEBPACK_IMPORTED_MODULE_2__.int)(self.amPM.textContent === self.l10n.amPM[0])];\n            }\n            input.value = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.pad)(newValue);\n        }\n    }\n    init();\n    return self;\n}\nfunction _flatpickr(nodeList, config) {\n    var nodes = Array.prototype.slice\n        .call(nodeList)\n        .filter(function (x) { return x instanceof HTMLElement; });\n    var instances = [];\n    for (var i = 0; i < nodes.length; i++) {\n        var node = nodes[i];\n        try {\n            if (node.getAttribute(\"data-fp-omit\") !== null)\n                continue;\n            if (node._flatpickr !== undefined) {\n                node._flatpickr.destroy();\n                node._flatpickr = undefined;\n            }\n            node._flatpickr = FlatpickrInstance(node, config || {});\n            instances.push(node._flatpickr);\n        }\n        catch (e) {\n            console.error(e);\n        }\n    }\n    return instances.length === 1 ? instances[0] : instances;\n}\nif (typeof HTMLElement !== \"undefined\" &&\n    typeof HTMLCollection !== \"undefined\" &&\n    typeof NodeList !== \"undefined\") {\n    HTMLCollection.prototype.flatpickr = NodeList.prototype.flatpickr = function (config) {\n        return _flatpickr(this, config);\n    };\n    HTMLElement.prototype.flatpickr = function (config) {\n        return _flatpickr([this], config);\n    };\n}\nvar flatpickr = function (selector, config) {\n    if (typeof selector === \"string\") {\n        return _flatpickr(window.document.querySelectorAll(selector), config);\n    }\n    else if (selector instanceof Node) {\n        return _flatpickr([selector], config);\n    }\n    else {\n        return _flatpickr(selector, config);\n    }\n};\nflatpickr.defaultConfig = {};\nflatpickr.l10ns = {\n    en: __assign({}, _l10n_default__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n    default: __assign({}, _l10n_default__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n};\nflatpickr.localize = function (l10n) {\n    flatpickr.l10ns.default = __assign(__assign({}, flatpickr.l10ns.default), l10n);\n};\nflatpickr.setDefaults = function (config) {\n    flatpickr.defaultConfig = __assign(__assign({}, flatpickr.defaultConfig), config);\n};\nflatpickr.parseDate = (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.createDateParser)({});\nflatpickr.formatDate = (0,_utils_dates__WEBPACK_IMPORTED_MODULE_4__.createDateFormatter)({});\nflatpickr.compareDates = _utils_dates__WEBPACK_IMPORTED_MODULE_4__.compareDates;\nif (typeof jQuery !== \"undefined\" && typeof jQuery.fn !== \"undefined\") {\n    jQuery.fn.flatpickr = function (config) {\n        return _flatpickr(this, config);\n    };\n}\nDate.prototype.fp_incr = function (days) {\n    return new Date(this.getFullYear(), this.getMonth(), this.getDate() + (typeof days === \"string\" ? parseInt(days, 10) : days));\n};\nif (typeof window !== \"undefined\") {\n    window.flatpickr = flatpickr;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (flatpickr);\n\n\n//# sourceURL=webpack://posbok/./node_modules/flatpickr/dist/esm/index.js?");

/***/ }),

/***/ "./node_modules/flatpickr/dist/esm/l10n/default.js":
/*!*********************************************************!*\
  !*** ./node_modules/flatpickr/dist/esm/l10n/default.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   english: () => (/* binding */ english)\n/* harmony export */ });\nvar english = {\n    weekdays: {\n        shorthand: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n        longhand: [\n            \"Sunday\",\n            \"Monday\",\n            \"Tuesday\",\n            \"Wednesday\",\n            \"Thursday\",\n            \"Friday\",\n            \"Saturday\",\n        ],\n    },\n    months: {\n        shorthand: [\n            \"Jan\",\n            \"Feb\",\n            \"Mar\",\n            \"Apr\",\n            \"May\",\n            \"Jun\",\n            \"Jul\",\n            \"Aug\",\n            \"Sep\",\n            \"Oct\",\n            \"Nov\",\n            \"Dec\",\n        ],\n        longhand: [\n            \"January\",\n            \"February\",\n            \"March\",\n            \"April\",\n            \"May\",\n            \"June\",\n            \"July\",\n            \"August\",\n            \"September\",\n            \"October\",\n            \"November\",\n            \"December\",\n        ],\n    },\n    daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n    firstDayOfWeek: 0,\n    ordinal: function (nth) {\n        var s = nth % 100;\n        if (s > 3 && s < 21)\n            return \"th\";\n        switch (s % 10) {\n            case 1:\n                return \"st\";\n            case 2:\n                return \"nd\";\n            case 3:\n                return \"rd\";\n            default:\n                return \"th\";\n        }\n    },\n    rangeSeparator: \" to \",\n    weekAbbreviation: \"Wk\",\n    scrollTitle: \"Scroll to increment\",\n    toggleTitle: \"Click to toggle\",\n    amPM: [\"AM\", \"PM\"],\n    yearAriaLabel: \"Year\",\n    monthAriaLabel: \"Month\",\n    hourAriaLabel: \"Hour\",\n    minuteAriaLabel: \"Minute\",\n    time_24hr: false,\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (english);\n\n\n//# sourceURL=webpack://posbok/./node_modules/flatpickr/dist/esm/l10n/default.js?");

/***/ }),

/***/ "./node_modules/flatpickr/dist/esm/types/options.js":
/*!**********************************************************!*\
  !*** ./node_modules/flatpickr/dist/esm/types/options.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HOOKS: () => (/* binding */ HOOKS),\n/* harmony export */   defaults: () => (/* binding */ defaults)\n/* harmony export */ });\nvar HOOKS = [\n    \"onChange\",\n    \"onClose\",\n    \"onDayCreate\",\n    \"onDestroy\",\n    \"onKeyDown\",\n    \"onMonthChange\",\n    \"onOpen\",\n    \"onParseConfig\",\n    \"onReady\",\n    \"onValueUpdate\",\n    \"onYearChange\",\n    \"onPreCalendarPosition\",\n];\nvar defaults = {\n    _disable: [],\n    allowInput: false,\n    allowInvalidPreload: false,\n    altFormat: \"F j, Y\",\n    altInput: false,\n    altInputClass: \"form-control input\",\n    animate: typeof window === \"object\" &&\n        window.navigator.userAgent.indexOf(\"MSIE\") === -1,\n    ariaDateFormat: \"F j, Y\",\n    autoFillDefaultTime: true,\n    clickOpens: true,\n    closeOnSelect: true,\n    conjunction: \", \",\n    dateFormat: \"Y-m-d\",\n    defaultHour: 12,\n    defaultMinute: 0,\n    defaultSeconds: 0,\n    disable: [],\n    disableMobile: false,\n    enableSeconds: false,\n    enableTime: false,\n    errorHandler: function (err) {\n        return typeof console !== \"undefined\" && console.warn(err);\n    },\n    getWeek: function (givenDate) {\n        var date = new Date(givenDate.getTime());\n        date.setHours(0, 0, 0, 0);\n        date.setDate(date.getDate() + 3 - ((date.getDay() + 6) % 7));\n        var week1 = new Date(date.getFullYear(), 0, 4);\n        return (1 +\n            Math.round(((date.getTime() - week1.getTime()) / 86400000 -\n                3 +\n                ((week1.getDay() + 6) % 7)) /\n                7));\n    },\n    hourIncrement: 1,\n    ignoredFocusElements: [],\n    inline: false,\n    locale: \"default\",\n    minuteIncrement: 5,\n    mode: \"single\",\n    monthSelectorType: \"dropdown\",\n    nextArrow: \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>\",\n    noCalendar: false,\n    now: new Date(),\n    onChange: [],\n    onClose: [],\n    onDayCreate: [],\n    onDestroy: [],\n    onKeyDown: [],\n    onMonthChange: [],\n    onOpen: [],\n    onParseConfig: [],\n    onReady: [],\n    onValueUpdate: [],\n    onYearChange: [],\n    onPreCalendarPosition: [],\n    plugins: [],\n    position: \"auto\",\n    positionElement: undefined,\n    prevArrow: \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>\",\n    shorthandCurrentMonth: false,\n    showMonths: 1,\n    static: false,\n    time_24hr: false,\n    weekNumbers: false,\n    wrap: false,\n};\n\n\n//# sourceURL=webpack://posbok/./node_modules/flatpickr/dist/esm/types/options.js?");

/***/ }),

/***/ "./node_modules/flatpickr/dist/esm/utils/dates.js":
/*!********************************************************!*\
  !*** ./node_modules/flatpickr/dist/esm/utils/dates.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateSecondsSinceMidnight: () => (/* binding */ calculateSecondsSinceMidnight),\n/* harmony export */   compareDates: () => (/* binding */ compareDates),\n/* harmony export */   compareTimes: () => (/* binding */ compareTimes),\n/* harmony export */   createDateFormatter: () => (/* binding */ createDateFormatter),\n/* harmony export */   createDateParser: () => (/* binding */ createDateParser),\n/* harmony export */   duration: () => (/* binding */ duration),\n/* harmony export */   getDefaultHours: () => (/* binding */ getDefaultHours),\n/* harmony export */   isBetween: () => (/* binding */ isBetween),\n/* harmony export */   parseSeconds: () => (/* binding */ parseSeconds)\n/* harmony export */ });\n/* harmony import */ var _formatting__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./formatting */ \"./node_modules/flatpickr/dist/esm/utils/formatting.js\");\n/* harmony import */ var _types_options__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types/options */ \"./node_modules/flatpickr/dist/esm/types/options.js\");\n/* harmony import */ var _l10n_default__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../l10n/default */ \"./node_modules/flatpickr/dist/esm/l10n/default.js\");\n\n\n\nvar createDateFormatter = function (_a) {\n    var _b = _a.config, config = _b === void 0 ? _types_options__WEBPACK_IMPORTED_MODULE_1__.defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? _l10n_default__WEBPACK_IMPORTED_MODULE_2__.english : _c, _d = _a.isMobile, isMobile = _d === void 0 ? false : _d;\n    return function (dateObj, frmt, overrideLocale) {\n        var locale = overrideLocale || l10n;\n        if (config.formatDate !== undefined && !isMobile) {\n            return config.formatDate(dateObj, frmt, locale);\n        }\n        return frmt\n            .split(\"\")\n            .map(function (c, i, arr) {\n            return _formatting__WEBPACK_IMPORTED_MODULE_0__.formats[c] && arr[i - 1] !== \"\\\\\"\n                ? _formatting__WEBPACK_IMPORTED_MODULE_0__.formats[c](dateObj, locale, config)\n                : c !== \"\\\\\"\n                    ? c\n                    : \"\";\n        })\n            .join(\"\");\n    };\n};\nvar createDateParser = function (_a) {\n    var _b = _a.config, config = _b === void 0 ? _types_options__WEBPACK_IMPORTED_MODULE_1__.defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? _l10n_default__WEBPACK_IMPORTED_MODULE_2__.english : _c;\n    return function (date, givenFormat, timeless, customLocale) {\n        if (date !== 0 && !date)\n            return undefined;\n        var locale = customLocale || l10n;\n        var parsedDate;\n        var dateOrig = date;\n        if (date instanceof Date)\n            parsedDate = new Date(date.getTime());\n        else if (typeof date !== \"string\" &&\n            date.toFixed !== undefined)\n            parsedDate = new Date(date);\n        else if (typeof date === \"string\") {\n            var format = givenFormat || (config || _types_options__WEBPACK_IMPORTED_MODULE_1__.defaults).dateFormat;\n            var datestr = String(date).trim();\n            if (datestr === \"today\") {\n                parsedDate = new Date();\n                timeless = true;\n            }\n            else if (config && config.parseDate) {\n                parsedDate = config.parseDate(date, format);\n            }\n            else if (/Z$/.test(datestr) ||\n                /GMT$/.test(datestr)) {\n                parsedDate = new Date(date);\n            }\n            else {\n                var matched = void 0, ops = [];\n                for (var i = 0, matchIndex = 0, regexStr = \"\"; i < format.length; i++) {\n                    var token = format[i];\n                    var isBackSlash = token === \"\\\\\";\n                    var escaped = format[i - 1] === \"\\\\\" || isBackSlash;\n                    if (_formatting__WEBPACK_IMPORTED_MODULE_0__.tokenRegex[token] && !escaped) {\n                        regexStr += _formatting__WEBPACK_IMPORTED_MODULE_0__.tokenRegex[token];\n                        var match = new RegExp(regexStr).exec(date);\n                        if (match && (matched = true)) {\n                            ops[token !== \"Y\" ? \"push\" : \"unshift\"]({\n                                fn: _formatting__WEBPACK_IMPORTED_MODULE_0__.revFormat[token],\n                                val: match[++matchIndex],\n                            });\n                        }\n                    }\n                    else if (!isBackSlash)\n                        regexStr += \".\";\n                }\n                parsedDate =\n                    !config || !config.noCalendar\n                        ? new Date(new Date().getFullYear(), 0, 1, 0, 0, 0, 0)\n                        : new Date(new Date().setHours(0, 0, 0, 0));\n                ops.forEach(function (_a) {\n                    var fn = _a.fn, val = _a.val;\n                    return (parsedDate = fn(parsedDate, val, locale) || parsedDate);\n                });\n                parsedDate = matched ? parsedDate : undefined;\n            }\n        }\n        if (!(parsedDate instanceof Date && !isNaN(parsedDate.getTime()))) {\n            config.errorHandler(new Error(\"Invalid date provided: \" + dateOrig));\n            return undefined;\n        }\n        if (timeless === true)\n            parsedDate.setHours(0, 0, 0, 0);\n        return parsedDate;\n    };\n};\nfunction compareDates(date1, date2, timeless) {\n    if (timeless === void 0) { timeless = true; }\n    if (timeless !== false) {\n        return (new Date(date1.getTime()).setHours(0, 0, 0, 0) -\n            new Date(date2.getTime()).setHours(0, 0, 0, 0));\n    }\n    return date1.getTime() - date2.getTime();\n}\nfunction compareTimes(date1, date2) {\n    return (3600 * (date1.getHours() - date2.getHours()) +\n        60 * (date1.getMinutes() - date2.getMinutes()) +\n        date1.getSeconds() -\n        date2.getSeconds());\n}\nvar isBetween = function (ts, ts1, ts2) {\n    return ts > Math.min(ts1, ts2) && ts < Math.max(ts1, ts2);\n};\nvar calculateSecondsSinceMidnight = function (hours, minutes, seconds) {\n    return hours * 3600 + minutes * 60 + seconds;\n};\nvar parseSeconds = function (secondsSinceMidnight) {\n    var hours = Math.floor(secondsSinceMidnight / 3600), minutes = (secondsSinceMidnight - hours * 3600) / 60;\n    return [hours, minutes, secondsSinceMidnight - hours * 3600 - minutes * 60];\n};\nvar duration = {\n    DAY: 86400000,\n};\nfunction getDefaultHours(config) {\n    var hours = config.defaultHour;\n    var minutes = config.defaultMinute;\n    var seconds = config.defaultSeconds;\n    if (config.minDate !== undefined) {\n        var minHour = config.minDate.getHours();\n        var minMinutes = config.minDate.getMinutes();\n        var minSeconds = config.minDate.getSeconds();\n        if (hours < minHour) {\n            hours = minHour;\n        }\n        if (hours === minHour && minutes < minMinutes) {\n            minutes = minMinutes;\n        }\n        if (hours === minHour && minutes === minMinutes && seconds < minSeconds)\n            seconds = config.minDate.getSeconds();\n    }\n    if (config.maxDate !== undefined) {\n        var maxHr = config.maxDate.getHours();\n        var maxMinutes = config.maxDate.getMinutes();\n        hours = Math.min(hours, maxHr);\n        if (hours === maxHr)\n            minutes = Math.min(maxMinutes, minutes);\n        if (hours === maxHr && minutes === maxMinutes)\n            seconds = config.maxDate.getSeconds();\n    }\n    return { hours: hours, minutes: minutes, seconds: seconds };\n}\n\n\n//# sourceURL=webpack://posbok/./node_modules/flatpickr/dist/esm/utils/dates.js?");

/***/ }),

/***/ "./node_modules/flatpickr/dist/esm/utils/dom.js":
/*!******************************************************!*\
  !*** ./node_modules/flatpickr/dist/esm/utils/dom.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearNode: () => (/* binding */ clearNode),\n/* harmony export */   createElement: () => (/* binding */ createElement),\n/* harmony export */   createNumberInput: () => (/* binding */ createNumberInput),\n/* harmony export */   findParent: () => (/* binding */ findParent),\n/* harmony export */   getEventTarget: () => (/* binding */ getEventTarget),\n/* harmony export */   toggleClass: () => (/* binding */ toggleClass)\n/* harmony export */ });\nfunction toggleClass(elem, className, bool) {\n    if (bool === true)\n        return elem.classList.add(className);\n    elem.classList.remove(className);\n}\nfunction createElement(tag, className, content) {\n    var e = window.document.createElement(tag);\n    className = className || \"\";\n    content = content || \"\";\n    e.className = className;\n    if (content !== undefined)\n        e.textContent = content;\n    return e;\n}\nfunction clearNode(node) {\n    while (node.firstChild)\n        node.removeChild(node.firstChild);\n}\nfunction findParent(node, condition) {\n    if (condition(node))\n        return node;\n    else if (node.parentNode)\n        return findParent(node.parentNode, condition);\n    return undefined;\n}\nfunction createNumberInput(inputClassName, opts) {\n    var wrapper = createElement(\"div\", \"numInputWrapper\"), numInput = createElement(\"input\", \"numInput \" + inputClassName), arrowUp = createElement(\"span\", \"arrowUp\"), arrowDown = createElement(\"span\", \"arrowDown\");\n    if (navigator.userAgent.indexOf(\"MSIE 9.0\") === -1) {\n        numInput.type = \"number\";\n    }\n    else {\n        numInput.type = \"text\";\n        numInput.pattern = \"\\\\d*\";\n    }\n    if (opts !== undefined)\n        for (var key in opts)\n            numInput.setAttribute(key, opts[key]);\n    wrapper.appendChild(numInput);\n    wrapper.appendChild(arrowUp);\n    wrapper.appendChild(arrowDown);\n    return wrapper;\n}\nfunction getEventTarget(event) {\n    try {\n        if (typeof event.composedPath === \"function\") {\n            var path = event.composedPath();\n            return path[0];\n        }\n        return event.target;\n    }\n    catch (error) {\n        return event.target;\n    }\n}\n\n\n//# sourceURL=webpack://posbok/./node_modules/flatpickr/dist/esm/utils/dom.js?");

/***/ }),

/***/ "./node_modules/flatpickr/dist/esm/utils/formatting.js":
/*!*************************************************************!*\
  !*** ./node_modules/flatpickr/dist/esm/utils/formatting.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formats: () => (/* binding */ formats),\n/* harmony export */   monthToStr: () => (/* binding */ monthToStr),\n/* harmony export */   revFormat: () => (/* binding */ revFormat),\n/* harmony export */   tokenRegex: () => (/* binding */ tokenRegex)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/flatpickr/dist/esm/utils/index.js\");\n\nvar doNothing = function () { return undefined; };\nvar monthToStr = function (monthNumber, shorthand, locale) { return locale.months[shorthand ? \"shorthand\" : \"longhand\"][monthNumber]; };\nvar revFormat = {\n    D: doNothing,\n    F: function (dateObj, monthName, locale) {\n        dateObj.setMonth(locale.months.longhand.indexOf(monthName));\n    },\n    G: function (dateObj, hour) {\n        dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));\n    },\n    H: function (dateObj, hour) {\n        dateObj.setHours(parseFloat(hour));\n    },\n    J: function (dateObj, day) {\n        dateObj.setDate(parseFloat(day));\n    },\n    K: function (dateObj, amPM, locale) {\n        dateObj.setHours((dateObj.getHours() % 12) +\n            12 * (0,_utils__WEBPACK_IMPORTED_MODULE_0__.int)(new RegExp(locale.amPM[1], \"i\").test(amPM)));\n    },\n    M: function (dateObj, shortMonth, locale) {\n        dateObj.setMonth(locale.months.shorthand.indexOf(shortMonth));\n    },\n    S: function (dateObj, seconds) {\n        dateObj.setSeconds(parseFloat(seconds));\n    },\n    U: function (_, unixSeconds) { return new Date(parseFloat(unixSeconds) * 1000); },\n    W: function (dateObj, weekNum, locale) {\n        var weekNumber = parseInt(weekNum);\n        var date = new Date(dateObj.getFullYear(), 0, 2 + (weekNumber - 1) * 7, 0, 0, 0, 0);\n        date.setDate(date.getDate() - date.getDay() + locale.firstDayOfWeek);\n        return date;\n    },\n    Y: function (dateObj, year) {\n        dateObj.setFullYear(parseFloat(year));\n    },\n    Z: function (_, ISODate) { return new Date(ISODate); },\n    d: function (dateObj, day) {\n        dateObj.setDate(parseFloat(day));\n    },\n    h: function (dateObj, hour) {\n        dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));\n    },\n    i: function (dateObj, minutes) {\n        dateObj.setMinutes(parseFloat(minutes));\n    },\n    j: function (dateObj, day) {\n        dateObj.setDate(parseFloat(day));\n    },\n    l: doNothing,\n    m: function (dateObj, month) {\n        dateObj.setMonth(parseFloat(month) - 1);\n    },\n    n: function (dateObj, month) {\n        dateObj.setMonth(parseFloat(month) - 1);\n    },\n    s: function (dateObj, seconds) {\n        dateObj.setSeconds(parseFloat(seconds));\n    },\n    u: function (_, unixMillSeconds) {\n        return new Date(parseFloat(unixMillSeconds));\n    },\n    w: doNothing,\n    y: function (dateObj, year) {\n        dateObj.setFullYear(2000 + parseFloat(year));\n    },\n};\nvar tokenRegex = {\n    D: \"\",\n    F: \"\",\n    G: \"(\\\\d\\\\d|\\\\d)\",\n    H: \"(\\\\d\\\\d|\\\\d)\",\n    J: \"(\\\\d\\\\d|\\\\d)\\\\w+\",\n    K: \"\",\n    M: \"\",\n    S: \"(\\\\d\\\\d|\\\\d)\",\n    U: \"(.+)\",\n    W: \"(\\\\d\\\\d|\\\\d)\",\n    Y: \"(\\\\d{4})\",\n    Z: \"(.+)\",\n    d: \"(\\\\d\\\\d|\\\\d)\",\n    h: \"(\\\\d\\\\d|\\\\d)\",\n    i: \"(\\\\d\\\\d|\\\\d)\",\n    j: \"(\\\\d\\\\d|\\\\d)\",\n    l: \"\",\n    m: \"(\\\\d\\\\d|\\\\d)\",\n    n: \"(\\\\d\\\\d|\\\\d)\",\n    s: \"(\\\\d\\\\d|\\\\d)\",\n    u: \"(.+)\",\n    w: \"(\\\\d\\\\d|\\\\d)\",\n    y: \"(\\\\d{2})\",\n};\nvar formats = {\n    Z: function (date) { return date.toISOString(); },\n    D: function (date, locale, options) {\n        return locale.weekdays.shorthand[formats.w(date, locale, options)];\n    },\n    F: function (date, locale, options) {\n        return monthToStr(formats.n(date, locale, options) - 1, false, locale);\n    },\n    G: function (date, locale, options) {\n        return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.pad)(formats.h(date, locale, options));\n    },\n    H: function (date) { return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.pad)(date.getHours()); },\n    J: function (date, locale) {\n        return locale.ordinal !== undefined\n            ? date.getDate() + locale.ordinal(date.getDate())\n            : date.getDate();\n    },\n    K: function (date, locale) { return locale.amPM[(0,_utils__WEBPACK_IMPORTED_MODULE_0__.int)(date.getHours() > 11)]; },\n    M: function (date, locale) {\n        return monthToStr(date.getMonth(), true, locale);\n    },\n    S: function (date) { return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.pad)(date.getSeconds()); },\n    U: function (date) { return date.getTime() / 1000; },\n    W: function (date, _, options) {\n        return options.getWeek(date);\n    },\n    Y: function (date) { return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.pad)(date.getFullYear(), 4); },\n    d: function (date) { return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.pad)(date.getDate()); },\n    h: function (date) { return (date.getHours() % 12 ? date.getHours() % 12 : 12); },\n    i: function (date) { return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.pad)(date.getMinutes()); },\n    j: function (date) { return date.getDate(); },\n    l: function (date, locale) {\n        return locale.weekdays.longhand[date.getDay()];\n    },\n    m: function (date) { return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.pad)(date.getMonth() + 1); },\n    n: function (date) { return date.getMonth() + 1; },\n    s: function (date) { return date.getSeconds(); },\n    u: function (date) { return date.getTime(); },\n    w: function (date) { return date.getDay(); },\n    y: function (date) { return String(date.getFullYear()).substring(2); },\n};\n\n\n//# sourceURL=webpack://posbok/./node_modules/flatpickr/dist/esm/utils/formatting.js?");

/***/ }),

/***/ "./node_modules/flatpickr/dist/esm/utils/index.js":
/*!********************************************************!*\
  !*** ./node_modules/flatpickr/dist/esm/utils/index.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   arrayify: () => (/* binding */ arrayify),\n/* harmony export */   debounce: () => (/* binding */ debounce),\n/* harmony export */   int: () => (/* binding */ int),\n/* harmony export */   pad: () => (/* binding */ pad)\n/* harmony export */ });\nvar pad = function (number, length) {\n    if (length === void 0) { length = 2; }\n    return (\"000\" + number).slice(length * -1);\n};\nvar int = function (bool) { return (bool === true ? 1 : 0); };\nfunction debounce(fn, wait) {\n    var t;\n    return function () {\n        var _this = this;\n        var args = arguments;\n        clearTimeout(t);\n        t = setTimeout(function () { return fn.apply(_this, args); }, wait);\n    };\n}\nvar arrayify = function (obj) {\n    return obj instanceof Array ? obj : [obj];\n};\n\n\n//# sourceURL=webpack://posbok/./node_modules/flatpickr/dist/esm/utils/index.js?");

/***/ }),

/***/ "./node_modules/flatpickr/dist/esm/utils/polyfills.js":
/*!************************************************************!*\
  !*** ./node_modules/flatpickr/dist/esm/utils/polyfills.js ***!
  \************************************************************/
/***/ (() => {

eval("\nif (typeof Object.assign !== \"function\") {\n    Object.assign = function (target) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!target) {\n            throw TypeError(\"Cannot convert undefined or null to object\");\n        }\n        var _loop_1 = function (source) {\n            if (source) {\n                Object.keys(source).forEach(function (key) { return (target[key] = source[key]); });\n            }\n        };\n        for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {\n            var source = args_1[_a];\n            _loop_1(source);\n        }\n        return target;\n    };\n}\n\n\n//# sourceURL=webpack://posbok/./node_modules/flatpickr/dist/esm/utils/polyfills.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./JS/goods.js");
/******/ 	
/******/ })()
;